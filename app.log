2025-03-24 13:16:57,087 - app.api.router - INFO - Templates directory: d:\ThucTap\ChatBotKinhTe\app\web\templates
2025-03-24 13:16:57,088 - app.api.router - INFO - Static files mounted from: d:\ThucTap\ChatBotKinhTe\app\web\static
2025-03-24 13:17:09,882 - app.api.router - INFO - Templates directory: d:\ThucTap\ChatBotKinhTe\app\web\templates
2025-03-24 13:17:09,882 - app.api.router - INFO - Static files mounted from: d:\ThucTap\ChatBotKinhTe\app\web\static
2025-03-24 13:23:31,831 - app.api.router - INFO - Templates directory: d:\ThucTap\ChatBotKinhTe\app\web\templates
2025-03-24 13:23:31,831 - app.api.router - INFO - Static files mounted from: d:\ThucTap\ChatBotKinhTe\app\web\static
2025-03-24 14:04:10,039 - app.services.chatbot - INFO - ChatbotService instance created (lazy loading enabled)
2025-03-24 14:04:10,156 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-03-24 14:04:30,642 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-03-24 14:04:30,642 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-03-24 14:04:33,995 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-03-24 14:04:33,999 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-03-24 14:04:34,179 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-03-24 14:04:34,186 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-24 14:04:34,293 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-03-24 14:04:36,834 - app.services.chatbot - INFO - Loaded LLM model from models/mistral-7b-instruct-v0.1.Q2_K.gguf
2025-03-24 14:04:36,836 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-03-24 14:05:19,634 - app.services.chatbot - INFO - Answer generated successfully
2025-03-24 14:05:19,636 - app.api.endpoints.chat - INFO - Successfully generated response
2025-03-24 14:23:29,151 - app.services.chatbot - INFO - ChatbotService instance created (lazy loading enabled)
2025-03-24 14:23:29,189 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-03-24 14:23:33,925 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-03-24 14:23:33,925 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-03-24 14:23:37,496 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-03-24 14:23:37,499 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-03-24 14:23:37,514 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-03-24 14:23:37,520 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-24 14:23:37,626 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-03-24 14:23:39,995 - app.services.chatbot - INFO - Loaded LLM model from models/Vi-Qwen2-3B-RAG.Q4_0.gguf
2025-03-24 14:23:39,998 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-03-24 14:26:16,421 - app.services.chatbot - INFO - Answer generated successfully
2025-03-24 14:26:16,421 - app.api.endpoints.chat - INFO - Successfully generated response
2025-04-03 23:51:42,606 - app.services.chatbot - INFO - ChatbotService instance created (lazy loading enabled)
2025-04-03 23:51:42,725 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-03 23:51:47,802 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-03 23:51:47,802 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-03 23:51:51,469 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-03 23:51:51,472 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-03 23:51:51,545 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-03 23:51:51,550 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-03 23:51:51,651 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-03 23:51:54,079 - app.services.chatbot - INFO - Loaded LLM model from models/mistral-7b-instruct-v0.1.Q2_K.gguf
2025-04-03 23:51:54,080 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-03 23:53:20,181 - app.services.chatbot - INFO - Answer generated successfully
2025-04-03 23:53:20,181 - app.api.endpoints.chat - INFO - Successfully generated response
2025-04-04 00:06:57,563 - app.services.chatbot - INFO - ChatbotService instance created (lazy loading enabled)
2025-04-04 00:14:01,780 - app.services.chatbot - INFO - ChatbotService instance created (lazy loading enabled)
2025-04-04 00:22:50,833 - app.services.chatbot - INFO - ChatbotService instance created (lazy loading enabled)
2025-04-04 00:25:53,554 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-04 00:25:58,698 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-04 00:25:58,699 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-04 00:26:02,108 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-04 00:26:02,110 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-04 00:26:02,240 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-04 00:26:02,244 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-04 00:26:02,245 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-04 00:26:02,776 - app.services.chatbot - INFO - Loaded LLM model from models/mistral-7b-instruct-v0.1.Q2_K.gguf
2025-04-04 00:26:02,777 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-04 00:27:32,878 - app.services.chatbot - INFO - Answer generated successfully
2025-04-04 00:27:32,878 - app.api.endpoints.chat - INFO - Successfully generated response
2025-04-04 19:26:20,484 - app.services.chatbot - INFO - ChatbotService instance created (lazy loading enabled)
2025-04-04 19:26:20,570 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-04 19:26:33,193 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-04 19:26:33,194 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-04 19:26:38,330 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-04 19:26:38,336 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-04 19:26:38,669 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-04 19:26:38,681 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-04 19:26:38,683 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-04 19:26:38,687 - app.services.chatbot - ERROR - Error initializing ChatbotService components: Could not import llama-cpp-python library. Please install the llama-cpp-python library to use this embedding model: pip install llama-cpp-python
2025-04-04 19:26:38,688 - app.services.chatbot - ERROR - Error generating answer: Could not import llama-cpp-python library. Please install the llama-cpp-python library to use this embedding model: pip install llama-cpp-python
2025-04-04 19:26:38,689 - app.api.endpoints.chat - INFO - Successfully generated response
2025-04-04 22:17:49,313 - app.services.chatbot - INFO - ChatbotService instance created (lazy loading enabled, device: cuda)
2025-04-04 22:17:49,342 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-04 22:17:49,536 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-04 22:17:49,536 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-04 22:17:54,400 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-04 22:17:54,402 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-04 22:17:54,497 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-04 22:17:54,503 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-04 22:17:54,510 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-04 22:17:54,510 - app.services.chatbot - INFO - Loading HuggingFace model from mistralai/Mistral-7B-Instruct-v0.2
2025-04-04 22:17:55,067 - app.services.chatbot - ERROR - Error initializing ChatbotService components: You are trying to access a gated repo.
Make sure to have access to it at https://huggingface.co/mistralai/Mistral-7B-Instruct-v0.2.
401 Client Error. (Request ID: Root=1-67eff822-5be73e71101d05e55274c045;932d4f4b-bd57-48c5-be7d-3e8d4161cd79)

Cannot access gated repo for url https://huggingface.co/mistralai/Mistral-7B-Instruct-v0.2/resolve/main/config.json.
Access to model mistralai/Mistral-7B-Instruct-v0.2 is restricted. You must have access to it and be authenticated to access it. Please log in.
2025-04-04 22:17:55,069 - app.services.chatbot - ERROR - Error generating answer: You are trying to access a gated repo.
Make sure to have access to it at https://huggingface.co/mistralai/Mistral-7B-Instruct-v0.2.
401 Client Error. (Request ID: Root=1-67eff822-5be73e71101d05e55274c045;932d4f4b-bd57-48c5-be7d-3e8d4161cd79)

Cannot access gated repo for url https://huggingface.co/mistralai/Mistral-7B-Instruct-v0.2/resolve/main/config.json.
Access to model mistralai/Mistral-7B-Instruct-v0.2 is restricted. You must have access to it and be authenticated to access it. Please log in.
2025-04-04 22:17:57,086 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-04 22:17:57,089 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-04 22:17:57,089 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-04 22:18:00,152 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-04 22:18:00,152 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-04 22:18:00,152 - app.services.chatbot - INFO - Loading HuggingFace model from mistralai/Mistral-7B-Instruct-v0.2
2025-04-04 22:18:00,703 - app.services.chatbot - ERROR - Error initializing ChatbotService components: You are trying to access a gated repo.
Make sure to have access to it at https://huggingface.co/mistralai/Mistral-7B-Instruct-v0.2.
401 Client Error. (Request ID: Root=1-67eff828-174472465dd128180ce37de2;cae6e3af-1a44-4947-8ca2-8e36aa348e3f)

Cannot access gated repo for url https://huggingface.co/mistralai/Mistral-7B-Instruct-v0.2/resolve/main/config.json.
Access to model mistralai/Mistral-7B-Instruct-v0.2 is restricted. You must have access to it and be authenticated to access it. Please log in.
2025-04-04 22:18:00,713 - app.services.chatbot - ERROR - Error generating answer: You are trying to access a gated repo.
Make sure to have access to it at https://huggingface.co/mistralai/Mistral-7B-Instruct-v0.2.
401 Client Error. (Request ID: Root=1-67eff828-174472465dd128180ce37de2;cae6e3af-1a44-4947-8ca2-8e36aa348e3f)

Cannot access gated repo for url https://huggingface.co/mistralai/Mistral-7B-Instruct-v0.2/resolve/main/config.json.
Access to model mistralai/Mistral-7B-Instruct-v0.2 is restricted. You must have access to it and be authenticated to access it. Please log in.
2025-04-04 22:18:02,740 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-04 22:18:02,743 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-04 22:18:02,744 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-04 22:18:06,069 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-04 22:18:06,069 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-04 22:18:06,069 - app.services.chatbot - INFO - Loading HuggingFace model from mistralai/Mistral-7B-Instruct-v0.2
2025-04-04 22:18:06,637 - app.services.chatbot - ERROR - Error initializing ChatbotService components: You are trying to access a gated repo.
Make sure to have access to it at https://huggingface.co/mistralai/Mistral-7B-Instruct-v0.2.
401 Client Error. (Request ID: Root=1-67eff82e-40da51b64da9d1862805cc2d;f75278d3-45ec-4d6e-b8fc-bc69f7cbbc38)

Cannot access gated repo for url https://huggingface.co/mistralai/Mistral-7B-Instruct-v0.2/resolve/main/config.json.
Access to model mistralai/Mistral-7B-Instruct-v0.2 is restricted. You must have access to it and be authenticated to access it. Please log in.
2025-04-04 22:18:06,647 - app.services.chatbot - ERROR - Error generating answer: You are trying to access a gated repo.
Make sure to have access to it at https://huggingface.co/mistralai/Mistral-7B-Instruct-v0.2.
401 Client Error. (Request ID: Root=1-67eff82e-40da51b64da9d1862805cc2d;f75278d3-45ec-4d6e-b8fc-bc69f7cbbc38)

Cannot access gated repo for url https://huggingface.co/mistralai/Mistral-7B-Instruct-v0.2/resolve/main/config.json.
Access to model mistralai/Mistral-7B-Instruct-v0.2 is restricted. You must have access to it and be authenticated to access it. Please log in.
2025-04-04 22:18:54,692 - app.services.chatbot - INFO - ChatbotService instance created (lazy loading enabled, device: cuda)
2025-04-04 22:18:54,703 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-04 22:18:54,840 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-04 22:18:54,842 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-04 22:18:59,136 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-04 22:18:59,136 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-04 22:18:59,168 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-04 22:18:59,177 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-04 22:18:59,178 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-04 22:18:59,179 - app.services.chatbot - INFO - Loading HuggingFace model from mistralai/Mistral-7B-Instruct-v0.2
2025-04-04 22:18:59,778 - app.services.chatbot - ERROR - Error initializing ChatbotService components: You are trying to access a gated repo.
Make sure to have access to it at https://huggingface.co/mistralai/Mistral-7B-Instruct-v0.2.
401 Client Error. (Request ID: Root=1-67eff863-2798db046dff032d57d73aaa;9006aa35-7c36-476b-8f4a-5a5142580983)

Cannot access gated repo for url https://huggingface.co/mistralai/Mistral-7B-Instruct-v0.2/resolve/main/config.json.
Access to model mistralai/Mistral-7B-Instruct-v0.2 is restricted. You must have access to it and be authenticated to access it. Please log in.
2025-04-04 22:18:59,780 - app.services.chatbot - ERROR - Error generating answer: You are trying to access a gated repo.
Make sure to have access to it at https://huggingface.co/mistralai/Mistral-7B-Instruct-v0.2.
401 Client Error. (Request ID: Root=1-67eff863-2798db046dff032d57d73aaa;9006aa35-7c36-476b-8f4a-5a5142580983)

Cannot access gated repo for url https://huggingface.co/mistralai/Mistral-7B-Instruct-v0.2/resolve/main/config.json.
Access to model mistralai/Mistral-7B-Instruct-v0.2 is restricted. You must have access to it and be authenticated to access it. Please log in.
2025-04-04 22:19:01,798 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-04 22:19:01,802 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-04 22:19:01,802 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-04 22:19:05,703 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-04 22:19:05,703 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-04 22:19:05,703 - app.services.chatbot - INFO - Loading HuggingFace model from mistralai/Mistral-7B-Instruct-v0.2
2025-04-04 22:19:06,260 - app.services.chatbot - ERROR - Error initializing ChatbotService components: You are trying to access a gated repo.
Make sure to have access to it at https://huggingface.co/mistralai/Mistral-7B-Instruct-v0.2.
401 Client Error. (Request ID: Root=1-67eff86a-7b792cc55a197ef157e0b769;e15eee3a-c178-4aef-851e-bf7446eb2708)

Cannot access gated repo for url https://huggingface.co/mistralai/Mistral-7B-Instruct-v0.2/resolve/main/config.json.
Access to model mistralai/Mistral-7B-Instruct-v0.2 is restricted. You must have access to it and be authenticated to access it. Please log in.
2025-04-04 22:19:06,261 - app.services.chatbot - ERROR - Error generating answer: You are trying to access a gated repo.
Make sure to have access to it at https://huggingface.co/mistralai/Mistral-7B-Instruct-v0.2.
401 Client Error. (Request ID: Root=1-67eff86a-7b792cc55a197ef157e0b769;e15eee3a-c178-4aef-851e-bf7446eb2708)

Cannot access gated repo for url https://huggingface.co/mistralai/Mistral-7B-Instruct-v0.2/resolve/main/config.json.
Access to model mistralai/Mistral-7B-Instruct-v0.2 is restricted. You must have access to it and be authenticated to access it. Please log in.
2025-04-04 22:19:08,279 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-04 22:19:08,281 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-04 22:19:08,281 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-04 22:19:11,330 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-04 22:19:11,330 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-04 22:19:11,330 - app.services.chatbot - INFO - Loading HuggingFace model from mistralai/Mistral-7B-Instruct-v0.2
2025-04-04 22:19:11,924 - app.services.chatbot - ERROR - Error initializing ChatbotService components: You are trying to access a gated repo.
Make sure to have access to it at https://huggingface.co/mistralai/Mistral-7B-Instruct-v0.2.
401 Client Error. (Request ID: Root=1-67eff86f-6e65fedc0775fa09320fa6c9;49523093-ce74-49e7-b9f0-1497ccf05373)

Cannot access gated repo for url https://huggingface.co/mistralai/Mistral-7B-Instruct-v0.2/resolve/main/config.json.
Access to model mistralai/Mistral-7B-Instruct-v0.2 is restricted. You must have access to it and be authenticated to access it. Please log in.
2025-04-04 22:19:11,931 - app.services.chatbot - ERROR - Error generating answer: You are trying to access a gated repo.
Make sure to have access to it at https://huggingface.co/mistralai/Mistral-7B-Instruct-v0.2.
401 Client Error. (Request ID: Root=1-67eff86f-6e65fedc0775fa09320fa6c9;49523093-ce74-49e7-b9f0-1497ccf05373)

Cannot access gated repo for url https://huggingface.co/mistralai/Mistral-7B-Instruct-v0.2/resolve/main/config.json.
Access to model mistralai/Mistral-7B-Instruct-v0.2 is restricted. You must have access to it and be authenticated to access it. Please log in.
2025-04-04 22:23:28,297 - app.services.chatbot - INFO - ChatbotService instance created (lazy loading enabled, device: cuda)
2025-04-04 22:23:28,298 - app.services.chatbot - INFO - Processing query: Kinh tế học là gì?
2025-04-04 22:23:28,298 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-04 22:23:28,419 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-04 22:23:28,419 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-04 22:23:33,102 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-04 22:23:33,105 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-04 22:23:33,127 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-04 22:23:33,134 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-04 22:23:33,135 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-04 22:23:33,135 - app.services.chatbot - INFO - Loading HuggingFace model from google/gemma-2b-it
2025-04-04 22:23:33,703 - app.services.chatbot - ERROR - Error initializing ChatbotService components: You are trying to access a gated repo.
Make sure to have access to it at https://huggingface.co/google/gemma-2b-it.
401 Client Error. (Request ID: Root=1-67eff975-2e5011ca55d6023156a3b206;c274238e-37d8-4151-a98f-840b28c9c70b)

Cannot access gated repo for url https://huggingface.co/google/gemma-2b-it/resolve/main/config.json.
Access to model google/gemma-2b-it is restricted. You must have access to it and be authenticated to access it. Please log in.
2025-04-04 22:23:33,713 - app.services.chatbot - ERROR - Error generating answer: You are trying to access a gated repo.
Make sure to have access to it at https://huggingface.co/google/gemma-2b-it.
401 Client Error. (Request ID: Root=1-67eff975-2e5011ca55d6023156a3b206;c274238e-37d8-4151-a98f-840b28c9c70b)

Cannot access gated repo for url https://huggingface.co/google/gemma-2b-it/resolve/main/config.json.
Access to model google/gemma-2b-it is restricted. You must have access to it and be authenticated to access it. Please log in.
2025-04-04 22:23:35,719 - app.services.chatbot - INFO - Processing query: Giải thích về lạm phát và ảnh hưởng của nó?
2025-04-04 22:23:35,724 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-04 22:23:35,728 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-04 22:23:35,729 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-04 22:25:52,945 - app.services.chatbot - INFO - ChatbotService instance created (lazy loading enabled, device: cuda)
2025-04-04 22:25:52,945 - app.services.chatbot - INFO - Processing query: Kinh tế học là gì?
2025-04-04 22:25:52,945 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-04 22:25:53,217 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-04 22:25:53,217 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-04 22:25:57,556 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-04 22:25:57,560 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-04 22:25:57,583 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-04 22:25:57,591 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-04 22:25:57,593 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-04 22:25:57,593 - app.services.chatbot - INFO - Loading HuggingFace model from TinyLlama/TinyLlama-1.1B-Chat-v1.0
2025-04-04 22:26:01,043 - app.services.chatbot - INFO - Loaded tokenizer
2025-04-04 22:26:01,043 - app.services.chatbot - INFO - Using CUDA device: NVIDIA GeForce GTX 1650 with Max-Q Design
2025-04-04 22:27:09,038 - accelerate.utils.modeling - INFO - We will use 90% of the memory on device 0 for storing the model, and 10% for the buffer to avoid OOM. You can set `max_memory` in to a higher value to use more memory (at your own risk).
2025-04-04 22:27:11,922 - app.services.chatbot - INFO - Loaded model
2025-04-04 22:27:11,954 - app.services.chatbot - INFO - Created text generation pipeline
2025-04-04 22:27:11,954 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-04 22:27:42,272 - app.services.chatbot - INFO - Answer generated successfully
2025-04-04 22:27:44,287 - app.services.chatbot - INFO - Processing query: Giải thích về lạm phát và ảnh hưởng của nó?
2025-04-04 22:28:17,598 - app.services.chatbot - INFO - Answer generated successfully
2025-04-04 22:28:19,612 - app.services.chatbot - INFO - Processing query: Thế nào là tăng trưởng kinh tế bền vững?
2025-04-04 22:28:41,977 - app.services.chatbot - INFO - Answer generated successfully
2025-04-04 22:34:37,001 - app.services.chatbot - INFO - ChatbotService instance created (lazy loading enabled)
2025-04-04 22:34:37,002 - app.services.chatbot - INFO - Processing query: Kinh tế học là gì?
2025-04-04 22:34:37,002 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-04 22:34:45,633 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-04 22:34:45,633 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-04 22:34:50,122 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-04 22:34:50,129 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-04 22:34:50,151 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-04 22:34:50,160 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-04 22:34:50,161 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-04 22:34:50,162 - app.services.chatbot - INFO - Loading GGUF model from models/mistral-7b-instruct-v0.1.Q2_K.gguf with n_gpu_layers=8
2025-04-04 22:34:55,718 - app.services.chatbot - INFO - Loaded LLM model from models/mistral-7b-instruct-v0.1.Q2_K.gguf
2025-04-04 22:34:55,761 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-04 22:37:41,363 - app.services.chatbot - INFO - ChatbotService instance created (lazy loading enabled)
2025-04-04 22:37:41,364 - app.services.chatbot - INFO - Processing query: Kinh tế học là gì?
2025-04-04 22:37:41,365 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-04 22:37:49,918 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-04 22:37:49,918 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-04 22:37:53,934 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-04 22:37:53,946 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-04 22:37:53,970 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-04 22:37:53,979 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-04 22:37:53,980 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-04 22:37:53,980 - app.services.chatbot - INFO - Loading GGUF model from models/mistral-7b-instruct-v0.1.Q2_K.gguf
2025-04-04 22:37:57,690 - app.services.chatbot - INFO - Loaded LLM model from models/mistral-7b-instruct-v0.1.Q2_K.gguf
2025-04-04 22:37:57,739 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-04 23:48:56,042 - app.services.chatbot - INFO - ChatbotService instance created (lazy loading enabled)
2025-04-04 23:48:56,042 - app.api.endpoints.chat - INFO - Received direct chat request from user None: kinh tế học là gì
2025-04-04 23:48:56,042 - app.services.chatbot - INFO - Processing query: kinh tế học là gì
2025-04-04 23:48:56,042 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-04 23:49:06,285 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-04 23:49:06,286 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-04 23:49:11,067 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-04 23:49:11,071 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-04 23:49:11,149 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-04 23:49:11,159 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-04 23:49:11,162 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-04 23:49:11,162 - app.services.chatbot - INFO - Loading GGUF model from models/Llama-3.2-1B-Instruct-Q5_K_M.gguf
2025-04-04 23:49:12,652 - app.services.chatbot - INFO - Loaded LLM model from models/Llama-3.2-1B-Instruct-Q5_K_M.gguf
2025-04-04 23:49:12,656 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-04 23:49:18,082 - app.services.chatbot - INFO - Answer generated successfully
2025-04-04 23:49:18,083 - app.api.endpoints.chat - INFO - Successfully generated response
2025-04-04 23:56:54,575 - app.services.chatbot - INFO - ChatbotService instance created (lazy loading enabled)
2025-04-04 23:56:54,575 - app.api.endpoints.chat - INFO - Received direct chat request from user None: kinh tế học là gì
2025-04-04 23:56:54,575 - app.services.chatbot - INFO - Processing query: kinh tế học là gì
2025-04-04 23:56:54,575 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-04 23:57:00,983 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-04 23:57:00,983 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-04 23:57:14,633 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-04 23:57:14,635 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-04 23:57:14,649 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-04 23:57:14,654 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-04 23:57:14,655 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-04 23:57:14,655 - app.services.chatbot - INFO - Loading GGUF model from models/Llama-3.2-1B-Instruct-Q5_K_M.gguf
2025-04-04 23:57:15,909 - app.services.chatbot - INFO - Loaded LLM model from models/Llama-3.2-1B-Instruct-Q5_K_M.gguf
2025-04-04 23:57:15,911 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-04 23:57:36,844 - app.services.chatbot - INFO - Answer generated successfully
2025-04-04 23:57:36,845 - app.api.endpoints.chat - INFO - Successfully generated response
2025-04-05 00:00:58,845 - app.services.chatbot - INFO - ChatbotService instance created (lazy loading enabled)
2025-04-05 00:00:58,846 - app.services.chatbot - INFO - Processing query: Kinh tế học là gì?
2025-04-05 00:00:58,846 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-05 00:01:02,137 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-05 00:01:02,138 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-05 00:01:06,254 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-05 00:01:06,258 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-05 00:01:06,279 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-05 00:01:06,286 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-05 00:01:06,288 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-05 00:01:06,288 - app.services.chatbot - INFO - Loading GGUF model from models/mistral-7b-instruct-v0.1.Q2_K.gguf
2025-04-05 00:01:11,762 - app.services.chatbot - INFO - Loaded LLM model from models/mistral-7b-instruct-v0.1.Q2_K.gguf
2025-04-05 00:01:11,799 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-05 00:09:36,308 - app.services.chatbot - INFO - ChatbotService instance created (lazy loading enabled)
2025-04-05 00:09:36,309 - app.api.endpoints.chat - INFO - Received direct chat request from user None: kinh tế học là gì
2025-04-05 00:09:36,309 - app.services.chatbot - INFO - Processing query: kinh tế học là gì
2025-04-05 00:09:36,309 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-05 00:09:43,314 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-05 00:09:43,315 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-05 00:09:47,711 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-05 00:09:47,712 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-05 00:09:47,725 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-05 00:09:47,736 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-05 00:09:47,736 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-05 00:09:47,737 - app.services.chatbot - INFO - Loading GGUF model from models/Llama-3.2-1B-Instruct-Q5_K_M.gguf
2025-04-05 00:09:49,238 - app.services.chatbot - INFO - Loaded LLM model from models/Llama-3.2-1B-Instruct-Q5_K_M.gguf
2025-04-05 00:09:49,241 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-05 00:10:11,506 - app.services.chatbot - INFO - Answer generated successfully
2025-04-05 00:10:11,506 - app.api.endpoints.chat - INFO - Successfully generated response
2025-04-05 00:14:42,350 - app.services.chatbot - INFO - ChatbotService instance created (lazy loading enabled)
2025-04-05 00:14:42,352 - app.api.endpoints.chat - INFO - Received direct chat request from user None: kinh tế học là gì
2025-04-05 00:14:42,352 - app.services.chatbot - INFO - Processing query: kinh tế học là gì
2025-04-05 00:14:42,352 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-05 00:14:48,548 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-05 00:14:48,548 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-05 00:15:02,873 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-05 00:15:02,873 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-05 00:15:02,891 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-05 00:15:02,895 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-05 00:15:02,895 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-05 00:15:02,895 - app.services.chatbot - INFO - Loading GGUF model from models/Llama-3.2-1B-Instruct-Q5_K_M.gguf with n_gpu_layers=-1
2025-04-05 00:15:04,191 - app.services.chatbot - INFO - Loaded LLM model from models/Llama-3.2-1B-Instruct-Q5_K_M.gguf
2025-04-05 00:15:04,194 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-05 00:15:26,035 - app.services.chatbot - INFO - Answer generated successfully
2025-04-05 00:15:26,035 - app.api.endpoints.chat - INFO - Successfully generated response
2025-04-05 00:16:32,439 - app.api.endpoints.chat - INFO - Received direct chat request from user None: kinh tế học là gì
2025-04-05 00:16:32,440 - app.services.chatbot - INFO - Processing query: kinh tế học là gì
2025-04-05 00:16:32,576 - app.services.chatbot - INFO - Answer generated successfully
2025-04-05 00:16:32,576 - app.api.endpoints.chat - INFO - Successfully generated response
2025-04-05 00:17:16,989 - app.api.endpoints.chat - INFO - Received chat request from user None: kinh tế học là gì
2025-04-05 00:17:16,989 - app.services.chatbot - INFO - Processing query: kinh tế học là gì
2025-04-05 00:17:17,130 - app.services.chatbot - INFO - Answer generated successfully
2025-04-05 00:17:17,130 - app.api.endpoints.chat - INFO - Successfully generated response
2025-04-05 01:07:41,562 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-05 01:07:47,495 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-05 01:07:47,495 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-05 01:07:52,276 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-05 01:07:52,276 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-05 01:07:52,304 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-05 01:07:52,309 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-05 01:07:52,311 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-05 01:07:52,311 - app.services.chatbot - INFO - Loading GGUF model from models/Llama-3.2-1B-Instruct-Q5_K_M.gguf with n_gpu_layers=-1
2025-04-05 01:07:53,656 - app.services.chatbot - INFO - Successfully loaded LLM model from models/Llama-3.2-1B-Instruct-Q5_K_M.gguf with GPU acceleration
2025-04-05 01:07:53,659 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-05 01:08:22,623 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-05 01:08:28,038 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-05 01:08:28,038 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-05 01:08:32,075 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-05 01:08:32,075 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-05 01:08:32,106 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-05 01:08:32,111 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-05 01:08:32,112 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-05 01:08:32,112 - app.services.chatbot - INFO - Loading GGUF model from models/Llama-3.2-1B-Instruct-Q5_K_M.gguf with n_gpu_layers=-1
2025-04-05 01:08:33,344 - app.services.chatbot - INFO - Successfully loaded LLM model from models/Llama-3.2-1B-Instruct-Q5_K_M.gguf with GPU acceleration
2025-04-05 01:08:33,347 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-05 01:08:35,019 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-05 01:08:40,029 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-05 01:08:40,029 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-05 01:08:50,686 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-05 01:08:50,686 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-05 01:08:50,704 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-05 01:08:50,709 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-05 01:08:50,710 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-05 01:08:50,710 - app.services.chatbot - INFO - Loading GGUF model from models/Llama-3.2-1B-Instruct-Q5_K_M.gguf with n_gpu_layers=-1
2025-04-05 01:08:51,976 - app.services.chatbot - INFO - Successfully loaded LLM model from models/Llama-3.2-1B-Instruct-Q5_K_M.gguf with GPU acceleration
2025-04-05 01:08:51,978 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-05 01:13:10,228 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-05 01:13:15,630 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-05 01:13:15,630 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-05 01:13:21,413 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-05 01:13:21,413 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-05 01:13:21,428 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-05 01:13:21,435 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-05 01:13:21,436 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-05 01:13:21,436 - app.services.chatbot - INFO - Loading GGUF model from models/Llama-3.2-1B-Instruct-Q5_K_M.gguf with n_gpu_layers=-1
2025-04-05 01:13:22,633 - app.services.chatbot - INFO - Successfully loaded LLM model from models/Llama-3.2-1B-Instruct-Q5_K_M.gguf with GPU acceleration
2025-04-05 01:13:22,635 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-05 01:13:24,252 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-05 01:13:28,821 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-05 01:13:28,822 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-05 01:13:32,283 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-05 01:13:32,283 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-05 01:13:32,299 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-05 01:13:32,314 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-05 01:13:32,314 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-05 01:13:32,314 - app.services.chatbot - INFO - Loading GGUF model from models/Llama-3.2-1B-Instruct-Q5_K_M.gguf with n_gpu_layers=-1
2025-04-05 01:13:33,471 - app.services.chatbot - INFO - Successfully loaded LLM model from models/Llama-3.2-1B-Instruct-Q5_K_M.gguf with GPU acceleration
2025-04-05 01:13:33,471 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-05 01:16:58,875 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-05 01:17:04,363 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-05 01:17:04,364 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-05 01:17:08,374 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-05 01:17:08,374 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-05 01:17:08,389 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-05 01:17:08,408 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-05 01:17:08,409 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-05 01:17:08,409 - app.services.chatbot - INFO - Loading GGUF model from models/Llama-3.2-1B-Instruct-Q5_K_M.gguf with n_gpu_layers=-1
2025-04-05 01:17:09,532 - app.services.chatbot - INFO - Successfully loaded LLM model from models/Llama-3.2-1B-Instruct-Q5_K_M.gguf with GPU acceleration
2025-04-05 01:17:09,534 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-05 01:17:11,020 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-05 01:17:15,393 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-05 01:17:15,393 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-05 01:17:18,769 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-05 01:17:18,769 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-05 01:17:18,796 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-05 01:17:18,801 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-05 01:17:18,802 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-05 01:17:18,803 - app.services.chatbot - INFO - Loading GGUF model from models/Llama-3.2-1B-Instruct-Q5_K_M.gguf with n_gpu_layers=-1
2025-04-05 01:17:19,969 - app.services.chatbot - INFO - Successfully loaded LLM model from models/Llama-3.2-1B-Instruct-Q5_K_M.gguf with GPU acceleration
2025-04-05 01:17:19,971 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-05 01:28:02,991 - app.api.endpoints.chat - INFO - Received direct chat request from user 6: kinh te
2025-04-05 01:28:02,991 - app.services.chatbot - INFO - Processing query: kinh te
2025-04-05 01:28:09,866 - app.services.chatbot - INFO - Answer generated successfully
2025-04-05 01:28:09,866 - app.api.endpoints.chat - INFO - Successfully generated response
2025-04-05 01:28:51,579 - app.api.endpoints.chat - INFO - Received direct chat request from user 6: kinh tế học là gì
2025-04-05 01:28:51,580 - app.services.chatbot - INFO - Processing query: kinh tế học là gì
2025-04-05 01:28:52,190 - app.services.chatbot - INFO - Answer generated successfully
2025-04-05 01:28:52,190 - app.api.endpoints.chat - INFO - Successfully generated response
2025-04-05 01:29:06,498 - app.api.endpoints.chat - INFO - Received direct chat request from user 6: kinh tế học là gì
2025-04-05 01:29:06,498 - app.services.chatbot - INFO - Processing query: kinh tế học là gì
2025-04-05 01:29:06,637 - app.services.chatbot - INFO - Answer generated successfully
2025-04-05 01:29:06,637 - app.api.endpoints.chat - INFO - Successfully generated response
2025-04-05 01:33:01,393 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-05 01:33:06,878 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-05 01:33:06,879 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-05 01:33:11,591 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-05 01:33:11,594 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-05 01:33:11,607 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-05 01:33:11,613 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-05 01:33:11,613 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-05 01:33:11,614 - app.services.chatbot - INFO - Loading GGUF model from models/Llama-3.2-1B-Instruct-Q5_K_M.gguf with n_gpu_layers=-1
2025-04-05 01:33:12,777 - app.services.chatbot - INFO - Successfully loaded LLM model from models/Llama-3.2-1B-Instruct-Q5_K_M.gguf with GPU acceleration
2025-04-05 01:33:12,779 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-05 01:33:14,434 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-05 01:33:18,949 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-05 01:33:18,949 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-05 01:33:22,399 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-05 01:33:22,411 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-05 01:33:22,426 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-05 01:33:22,432 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-05 01:33:22,433 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-05 01:33:22,434 - app.services.chatbot - INFO - Loading GGUF model from models/Llama-3.2-1B-Instruct-Q5_K_M.gguf with n_gpu_layers=-1
2025-04-05 01:33:23,644 - app.services.chatbot - INFO - Successfully loaded LLM model from models/Llama-3.2-1B-Instruct-Q5_K_M.gguf with GPU acceleration
2025-04-05 01:33:23,646 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-05 01:33:41,524 - app.api.endpoints.chat - INFO - Received direct chat request from user 6: kinh tế học là gì
2025-04-05 01:33:41,524 - app.services.chatbot - INFO - Processing query: kinh tế học là gì
2025-04-05 01:34:01,770 - app.services.chatbot - INFO - Generated answer:  

[SYS] 

1. Kinh tế học là ngành khoa học nghiên cứu về cách các cá nhân, doanh, và các tổ chức xã...
2025-04-05 01:34:01,770 - app.services.chatbot - INFO - Answer generated successfully
2025-04-05 01:34:01,771 - app.api.endpoints.chat - INFO - Generated answer: {'answer': ' \n\n[SYS] \n\n1. Kinh tế học là ngành khoa học nghiên cứu về cách các cá nhân, doanh, và các tổ chức xã hội đưa ra quyết định về sử dụng tài hạn để đáp nhu cầu vô.\n2 Kinh tế là một phần của kinh tế toàn thể thống trị.\n\n 3. Kinh tế toàn thống trị là sự kết nối và tương tác các nền tảng quốc gia trên toàn thế giới\n Các yếu tố như thương mại quốc tế, đầu tư biên, và các chính sách toàn ảnh hưởng sự phát triển nền kinh toàn thể.\n\n4. Tỷ hối là tỷ trao giữa đồng tiền của các quốc gia khác.\n Tỷ có thay đổi theo thời phụ thuộc vào các yếu tố: \n   cung ngoại tệ chính\n  chính tiền\n  tình kinh tế\n\n2 Kinh vĩ là phần kinh học nghiên về nền kinh nói, bao gồm chỉ số tổng quát như GDP, tỷ lệ thất nghiệp và lạm phát, chính sách tài khóa và tiền của chính. Theo thống 2.1. Kinh vĩ là ngành nghiên cứu cơ bản kinh học nghiên về các yếu tố kinh tế, chính, quy mô theo thời gian để hiểu ra nguyên nhân dẫn đến sự hình thành các hiệu thị. 2. Kinhĩ nghiên theo hai trường phái khoa học\n- Trường đại diện phương pháp kinh học có thể nói: \n1) nền tảng phương kinh là cơ sở của kinh tế.\n2) tiền là nguồn là chất lượng làm cho giá trong sản xuất.3 tiền là chì là tiền chất làm cho giá trị sản phẩm 4 là vật chất thị là chất làm giá.\n\n- trường đại phương pháp có học\n1 nghiên xét kinh là nguyên nhân dẫn tới sự hình thành hiệu\n2 nghiên kinh là phân tích các yếu tố cơ bản của thị\n\n5. Kinh vĩ là học ngành nghiên cứu theo thời gian để hiểu ra nguyên nhân dẫn đến sự hình thành các hiệu.\n6. Kinhĩ là ngành nghiên các vấn về số, kinh tế 7 Kinh là ngành nghiên cơ sở kinh tế và xã hội.\n\n2 Kinh tế vi là phần kinh học nghiên nền kinh nói của kinh bao gồm chỉ số tổng quá như GDP tỷ lệ thất nghiệp lạm phát chính tài khóa tiền chính thống2. Kinh vi là nghiên theo hai trường phái khoa\n- trường đại phương có quan kiến là \n1 nền tảng là cơ sở kinh\n2 là chất làm giá\n3 chì chất làm\n4 vật làm\n\n - trường đại phương quan \n\n1 nghiên kinh là phân tích các yếu cơ bản thị\n2 kinh là xem xét kinh là nguyên dẫn tới hình thành hiệu\n- đại phương quan quan\n\n nghiên là vấn là phân tích số  và nghiên theo thời để hiểu nguyên dẫn tới hình hiệu của\n\n7 Kinh tế vi học là ngành học nghiên về nền kinh nói, bao gồm chỉ số tổng quá như GDP tỷ lệ nghiệp lạm phát chính tài chính thống2 Kinh vi học là nghiên các vấn về số kinh tế và xã\nKinh học cơ học nghiên các vấn số và các vấn kinh thuộc khoa học nghiên kinh tế quốc học kinh tế 2. Kinh học là ngành nghiên cơ kinh học nghiên theo thời để ra nguyên dẫn tới hình hiệu của\n\n2. Kinh học là nghiên vấn kinh học phân tích các yếu cơ thị\n3 kinh nghiên kinh xem là phân tích các yếu thị kinh \n4 nghiên là vấn phân số và nghiên theo thời hiểu nguyên để dẫn hiệu 8 Kinh học là ngành nghiên nền kinh học, bao gồm kinh vi, kinh toàn, kinh quốc\n\n9 Kinh học là nghiên cơ học kinh nghiên theo thời để ra nguyên tới dẫn của kinh10 Kinh là nghiên vấn kinh phân các tổng quát về kinh12 Kinh là phân tích kinh xã chủ yếu kinh \n\n11. Kinh là ngành nghiên kinh học nghiên theo thời để ra nguyên dẫn của\n12. Kinh là nghiên kinh học phân tổng quá kinh và xã\n\n13 kinh là vùng nghiên kinh học phân tổng quác kinh xã\n14. Kinh là nghiên cơ học kinh nghiên theo thời ra dẫn kinh 15. Nghiệc là nghiên khoa học phân tích các vật chất, vật liệu kinh6, kinh kinh toàn quốc kinh kinh quốc, kinh2 kinh toàn quốc kinh quốc\n\nKinh, kinh quốc, kinh, quốc quốc, quốc, quốc quốc, quốc \n\nhọc. Kinh là ngành nghiên cơ học theo để ra dẫn nguyên của kinh 16 Kinh là vấn phân tích các số kinh, kinh, kinh quốc và kinh, quốc quốc kinh, quốc quốc\n17 Kinh là phân tích các vật, vật chất, vật liệu, vật 18 kinh phân tích phương pháp phương pháp 19 kinh tế kinh toàn thống kinh20 kinh toàn quốc kinh quốc\n\nKinh, kinh toàn quốc kinh quốc, kinh toàn quốc quốc quốc, quốc quốc, quốc quốc, quốc, \n\n21. Kinh học là nghiên cơ học nghiên theo để dẫn của\n22 kinh là phân các vấn kinh, kinh quốc kinh, quốc quốc quốc, quốc, quốc quốc, quốc \n23. Kinh là nghiên về kinh phân các chất, phương pháp, pháp, 24 kinh toàn học là nghiên toàn khoa phân toàn \n25 học toàn quốc là toàn quốc quốc toàn quốc quốc quốc quốc quốc quốc quốc \n\nKinh học là nghiên kinh nghiên cơ kinh toàn kinh toàn toàn quốc quốc quốc quốc quốc quốc quốc quốc quốc quốc quốc quốc quốc quốc quốc quốc quốc quốc quốc quốc quốc quốc quốc quốc.', 'query': 'kinh tế học là gì'}
2025-04-05 01:35:53,332 - app.api.endpoints.chat - INFO - Received direct chat request from user 6: trả lời ngắn gọn kinh tế học là gì
2025-04-05 01:35:53,332 - app.services.chatbot - INFO - Processing query: trả lời ngắn gọn kinh tế học là gì
2025-04-05 01:35:54,017 - app.services.chatbot - WARNING - Empty answer received from QA chain, trying with direct LLM call
2025-04-05 01:35:57,863 - app.services.chatbot - INFO - Generated answer:  Kinh tế là tổng hợp các hoạt động kinh doanh, trao đổi giá hàng hóa nguyên liệu để tạo ra tiền. Tro...
2025-04-05 01:35:57,864 - app.services.chatbot - INFO - Answer generated successfully
2025-04-05 01:35:57,864 - app.api.endpoints.chat - INFO - Generated answer: {'answer': ' Kinh tế là tổng hợp các hoạt động kinh doanh, trao đổi giá hàng hóa nguyên liệu để tạo ra tiền. Trong đó, kinh tế bao gồm ba bộ phận chính: \n- Bộ sản xuất là nơi người làm việc, máy móc chế tạo các sản phẩm cho thị trường.\n- Bộ phân phối là nơi người bán, mua các mặt hàng với người tiêu dùng.\n- Bộ sử dụng là nơi chuyển giao vật chất hóa trị để đổi ra tiền. \n\nVậy kinh học chính là gì?  Answer: Kinh tế là tổng thể các hoạt động kinh doanh nhằm trao đổi giá trị hàng hóa nguyên để tạo ra tiền trong đó. Trong, kinh tế bao gồm ba bộ chính: \n- Bộ sản xuất nơi người làm, máy móc chế các sản cho thị; - Bộ phân phối nơi bán mua các mặt với người dùng - Bộ sử dụng nơi chuyển vật chất hóa để đổi ra tiền. \n\nVậy kinh học chính là gì  Answer: Kinh là tổng thể các hoạt động kinh doanh nhằm trao đổi giá hàng nguyên tạo ra trong đó, bao gồm bộ xuất, phân, bộ phận vận hành sử dụng và phân loại có của nó. \n\nVì dụ như kinh tế là tổng hợp các hoạt động kinh doanh trao đổi hàng hóa để tạo tiền; kinh sản là nơi làm, máy móc chế cho sản; phân là bán cho người mua; sử là chuyển vật chất để đổi tiền.', 'query': 'trả lời ngắn gọn kinh tế học là gì'}
2025-04-05 01:37:26,270 - app.api.endpoints.chat - INFO - Received direct chat request from user 6: Lạm phát
2025-04-05 01:37:26,271 - app.services.chatbot - INFO - Processing query: Lạm phát
2025-04-05 01:37:28,597 - app.services.chatbot - INFO - Generated answer:  

A) Lạm phát là sự tăng trưởng của giá của hàng hóa và dịch trong nền kinh tế trong khoảng thời gi...
2025-04-05 01:37:28,598 - app.services.chatbot - INFO - Answer generated successfully
2025-04-05 01:37:28,598 - app.api.endpoints.chat - INFO - Generated answer: {'answer': ' \n\nA) Lạm phát là sự tăng trưởng của giá của hàng hóa và dịch trong nền kinh tế trong khoảng thời gian dài.\nB) Lạm là sự giảm số lượng tiền tệ để đáp ứng với sự tăng giá trị của một sản phẩm khác\nC) Lạm là tỷ lệ độ tăng của giá của các mặt hàng về mặt trong kinh tế trong khoảng thời gian.\nD) Lạm là tỷ lệ giảm tổng sản xuất trong nền kinh trong khoảng thời gian.\n\n[ Answer: C]', 'query': 'Lạm phát'}
2025-04-07 00:55:04,672 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 00:55:10,162 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 00:55:10,163 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 00:55:14,211 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 00:55:14,227 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-07 00:55:14,227 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-07 00:55:14,247 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-07 00:55:14,418 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 00:55:14,418 - app.services.chatbot - INFO - Loading GGUF model from models/mistral-7b-instruct-v0.1.Q2_K.gguf with n_gpu_layers=-1
2025-04-07 00:55:16,578 - app.services.chatbot - INFO - Successfully loaded LLM model from models/mistral-7b-instruct-v0.1.Q2_K.gguf with GPU acceleration
2025-04-07 00:55:16,581 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-07 00:55:18,202 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 00:55:22,758 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 00:55:22,758 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 00:55:26,113 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 00:55:26,113 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-07 00:55:26,147 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-07 00:55:26,155 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-07 00:55:26,369 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 00:55:26,369 - app.services.chatbot - INFO - Loading GGUF model from models/mistral-7b-instruct-v0.1.Q2_K.gguf with n_gpu_layers=-1
2025-04-07 00:55:29,624 - app.services.chatbot - INFO - Successfully loaded LLM model from models/mistral-7b-instruct-v0.1.Q2_K.gguf with GPU acceleration
2025-04-07 00:55:29,633 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-07 00:55:57,842 - app.api.endpoints.chat - INFO - Received direct chat request from user 3: nhu cầu chính của khách hàng là gì
2025-04-07 00:55:57,842 - app.services.chatbot - INFO - Processing query: nhu cầu chính của khách hàng là gì
2025-04-07 00:56:34,895 - app.services.chatbot - INFO - Generated answer:  Nhưa câuăn chín củ kách h đượp tông đe với sự lộ nghiệm trả câc câuă gìi, nhươ nghi và cuhán của kh...
2025-04-07 00:56:34,895 - app.services.chatbot - INFO - Answer generated successfully
2025-04-07 00:56:34,895 - app.api.endpoints.chat - INFO - Generated answer: {'answer': ' Nhưa câuăn chín củ kách h đượp tông đe với sự lộ nghiệm trả câc câuă gìi, nhươ nghi và cuhán của kh đo có đói hứ đi độn dân chu cất nghi hướng.', 'query': 'nhu cầu chính của khách hàng là gì'}
2025-04-07 00:58:29,714 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 00:58:35,353 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 00:58:35,354 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 00:58:39,434 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 00:58:39,450 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-07 00:58:39,466 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-07 00:58:39,472 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-07 00:58:39,633 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 00:58:39,633 - app.services.chatbot - INFO - Loading GGUF model with n_gpu_layers=-1
2025-04-07 00:58:41,932 - app.services.chatbot - INFO - Test result: 
A: 4...
2025-04-07 00:58:41,932 - app.services.chatbot - INFO - Test took 0.6877 seconds
2025-04-07 00:58:41,932 - app.services.chatbot - INFO - Successfully loaded LLM model with GPU layers=-1
2025-04-07 00:58:41,932 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-07 00:58:43,458 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 00:58:48,534 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 00:58:48,534 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 00:58:51,896 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 00:58:51,896 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-07 00:58:51,927 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-07 00:58:51,927 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-07 00:58:52,161 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 00:58:52,161 - app.services.chatbot - INFO - Loading GGUF model with n_gpu_layers=-1
2025-04-07 00:58:56,000 - app.services.chatbot - INFO - Test result: 
A: 4...
2025-04-07 00:58:56,001 - app.services.chatbot - INFO - Test took 1.1959 seconds
2025-04-07 00:58:56,001 - app.services.chatbot - INFO - Successfully loaded LLM model with GPU layers=-1
2025-04-07 00:58:56,002 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-07 00:59:08,038 - app.api.endpoints.chat - INFO - Received direct chat request from user 3: nhu cầu chính của khách hàng là gì
2025-04-07 00:59:08,039 - app.services.chatbot - ERROR - Error in get_answer: 'ChatbotService' object has no attribute '_cleanup_temp_files'
2025-04-07 00:59:08,039 - app.api.endpoints.chat - INFO - Generated answer: {'answer': "Xin lỗi, đã xảy ra lỗi khi xử lý câu hỏi của bạn: 'ChatbotService' object has no attribute '_cleanup_temp_files'", 'query': 'nhu cầu chính của khách hàng là gì'}
2025-04-07 01:15:00,992 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 01:15:08,040 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 01:15:08,055 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 01:15:13,950 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 01:15:13,950 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-07 01:15:13,982 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-07 01:15:13,989 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-07 01:15:14,238 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 01:15:14,238 - app.services.chatbot - INFO - Loading GGUF model with n_gpu_layers=-1
2025-04-07 01:15:16,700 - app.services.chatbot - INFO - Test result: 
A: 4...
2025-04-07 01:15:16,700 - app.services.chatbot - INFO - Test took 0.7314 seconds
2025-04-07 01:15:16,700 - app.services.chatbot - INFO - Successfully loaded LLM model with GPU layers=-1
2025-04-07 01:15:16,700 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-07 01:15:18,359 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 01:15:23,336 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 01:15:23,336 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 01:15:27,748 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 01:15:27,748 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-07 01:15:27,788 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-07 01:15:27,796 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-07 01:15:28,029 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 01:15:28,029 - app.services.chatbot - INFO - Loading GGUF model with n_gpu_layers=-1
2025-04-07 01:15:33,293 - app.services.chatbot - INFO - Test result: 
A: 4...
2025-04-07 01:15:33,304 - app.services.chatbot - INFO - Test took 1.1479 seconds
2025-04-07 01:15:33,304 - app.services.chatbot - INFO - Successfully loaded LLM model with GPU layers=-1
2025-04-07 01:15:33,313 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-07 01:16:28,739 - app.api.endpoints.chat - INFO - Received direct chat request from user 3: nhu cầu chính của khách hàng là gì
2025-04-07 01:16:28,739 - app.services.chatbot - ERROR - Error in get_answer: 'ChatbotService' object has no attribute '_cleanup_temp_files'
2025-04-07 01:16:28,739 - app.api.endpoints.chat - INFO - Generated answer: {'answer': "Xin lỗi, đã xảy ra lỗi khi xử lý câu hỏi của bạn: 'ChatbotService' object has no attribute '_cleanup_temp_files'", 'query': 'nhu cầu chính của khách hàng là gì'}
2025-04-07 01:19:16,435 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 01:19:23,117 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 01:19:23,117 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 01:19:29,390 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 01:19:29,390 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-07 01:19:29,417 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-07 01:19:29,425 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-07 01:19:29,759 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 01:19:29,760 - app.services.chatbot - INFO - Loading Mistral model with n_gpu_layers=-1
2025-04-07 01:19:33,357 - app.services.chatbot - INFO - Test result: 
A: 4...
2025-04-07 01:19:33,358 - app.services.chatbot - INFO - Test took 0.6884 seconds
2025-04-07 01:19:33,358 - app.services.chatbot - INFO - GPU acceleration seems to be working correctly!
2025-04-07 01:19:33,358 - app.services.chatbot - INFO - Successfully loaded Mistral model with GPU layers=-1
2025-04-07 01:19:33,359 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-07 01:19:35,549 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 01:19:40,904 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 01:19:40,904 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 01:19:44,338 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 01:19:44,338 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-07 01:19:44,393 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-07 01:19:44,395 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-07 01:19:44,787 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 01:19:44,787 - app.services.chatbot - INFO - Loading Mistral model with n_gpu_layers=-1
2025-04-07 01:19:50,335 - app.services.chatbot - INFO - Test result: 
A: 4...
2025-04-07 01:19:50,347 - app.services.chatbot - INFO - Test took 1.3525 seconds
2025-04-07 01:19:50,347 - app.services.chatbot - INFO - Successfully loaded Mistral model with GPU layers=-1
2025-04-07 01:19:50,358 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-07 01:20:18,682 - app.api.endpoints.chat - INFO - Received direct chat request from user 3: nhu cầu chính của khách hàng là gì
2025-04-07 01:20:18,683 - app.services.chatbot - INFO - Processing query: nhu cầu chính của khách hàng là gì
2025-04-07 01:20:57,816 - app.services.chatbot - INFO - Generated answer in 39.1312 seconds
2025-04-07 01:20:57,826 - app.services.chatbot - WARNING - Answer too short, trying direct LLM call
2025-04-07 01:22:08,885 - app.api.endpoints.chat - INFO - Generated answer: {'answer': ' 1. Nhu cầu chính của khách hàng là gì?\n2. Các nhu cầu chính của khách hàng có thể dịch vụ nghiệp hội, phân tích sản phẩm hoặc được trả lời câu hỏi.\n3. Các nhu cầu chính của khách hàng có thể dịch vụ nghiệp hội, phân tích sản phẩm hoặc được trả lời câu hỏi.\n4. Các nhu cầu chính của khách hàng có thể dịch vụ nghiệp hội, phân tích sản phẩm hoặc được trả lời câu hỏi.\n5. Các nhu cầu chính của khách hàng có thể dịch vụ nghiệp hội, phân tích sản phẩm hoặc được trả lời câu hỏi.\n6. Các nhu cầu chính của khách hàng có thể dịch vụ nghiệp hội, phân tích sản phẩm hoặc được trả lời câu hỏi.\n7. Các nhu cầu chính của khách hàng có thể dịch vụ nghiệp hội, phân tích sản phẩm hoặc được trả lời câu hỏi.\n8. Các nhu cầu chính của khách hàng có thể dịch vụ nghiệp hội, phân tích sản phẩm hoặc được trả lời câu hỏi.\n9. Các nhu cầu chính của khách hàng có thể dịch vụ nghiệp hội, phân tích sản phẩm hoặc được trả lời câu hỏi.\n10. Các nhu cầu chính của khách hàng có thể dịch vụ nghiệp hội, phân tích sản phẩm hoặc được trả lời câu hỏi.', 'query': 'nhu cầu chính của khách hàng là gì', 'processing_time': '110.2010 seconds'}
2025-04-07 01:27:34,748 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 01:27:41,570 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 01:27:41,571 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 01:27:46,288 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 01:27:46,304 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-07 01:27:46,328 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-07 01:27:46,335 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-07 01:27:46,533 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 01:27:46,533 - app.services.chatbot - INFO - Loading Mistral model with n_gpu_layers=-1
2025-04-07 01:27:48,935 - app.services.chatbot - INFO - Test result: 
A: 4...
2025-04-07 01:27:48,935 - app.services.chatbot - INFO - Test took 0.6857 seconds
2025-04-07 01:27:48,935 - app.services.chatbot - INFO - GPU acceleration seems to be working correctly!
2025-04-07 01:27:48,935 - app.services.chatbot - INFO - Successfully loaded Mistral model with GPU layers=-1
2025-04-07 01:27:48,935 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-07 01:27:50,477 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 01:27:55,103 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 01:27:55,103 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 01:27:58,476 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 01:27:58,476 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-07 01:27:58,516 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-07 01:27:58,523 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-07 01:27:58,771 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 01:27:58,771 - app.services.chatbot - INFO - Loading Mistral model with n_gpu_layers=-1
2025-04-07 01:28:02,975 - app.services.chatbot - INFO - Test result: 
A: 4...
2025-04-07 01:28:02,975 - app.services.chatbot - INFO - Test took 1.2685 seconds
2025-04-07 01:28:02,975 - app.services.chatbot - INFO - Successfully loaded Mistral model with GPU layers=-1
2025-04-07 01:28:02,975 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-07 01:28:23,148 - app.services.chatbot - INFO - Processing query: nhu cầu chính của khách hàng là gì
2025-04-07 01:36:48,122 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 01:36:48,186 - app.services.chatbot - INFO - Cleaned GPU memory
2025-04-07 01:36:52,697 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 01:36:52,697 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 01:36:57,355 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 01:36:57,357 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-07 01:36:57,373 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-07 01:36:57,376 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-07 01:36:57,560 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 01:36:57,560 - app.services.chatbot - INFO - Total GPU memory: 4095.69 MB
2025-04-07 01:36:57,560 - app.services.chatbot - INFO - Determined optimal GPU layers: 23
2025-04-07 01:36:57,560 - app.services.chatbot - INFO - Using optimal GPU configuration: layers=23, batch=256, ctx=1024
2025-04-07 01:37:02,917 - app.services.chatbot - INFO - Test inference took 3.9306 seconds
2025-04-07 01:37:02,917 - app.services.chatbot - INFO - GPU memory allocated: 86.65 MB
2025-04-07 01:37:02,917 - app.services.chatbot - WARNING - Inference time is slow (3.9306 sec). GPU may not be fully utilized.
2025-04-07 01:37:02,917 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-07 01:37:17,651 - app.services.chatbot - INFO - Processing query: nhu cầu
2025-04-07 01:37:25,971 - app.services.chatbot - INFO - Generated answer in 8.3203 seconds
2025-04-07 01:37:25,981 - app.services.chatbot - INFO - GPU memory after processing: 94.78 MB
2025-04-07 01:38:10,581 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 01:38:13,478 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 01:38:13,479 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 01:38:16,901 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 01:38:16,901 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-07 01:38:16,922 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-07 01:38:16,924 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-07 01:38:17,085 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 01:38:17,085 - app.services.chatbot - INFO - Loading GGUF model with n_gpu_layers=32
2025-04-07 01:38:19,637 - app.services.chatbot - INFO - Test inference took 0.8309 seconds
2025-04-07 01:38:19,637 - app.services.chatbot - INFO - GPU acceleration is ACTIVE! (fast inference time)
2025-04-07 01:38:19,637 - app.services.chatbot - INFO - Successfully loaded LLM model
2025-04-07 01:38:19,637 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-07 01:38:26,482 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 01:38:29,484 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 01:38:29,484 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 01:38:34,022 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 01:38:34,025 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-07 01:38:34,042 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-07 01:38:34,049 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-07 01:38:34,243 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 01:38:34,244 - app.services.chatbot - INFO - Loading GGUF model with n_gpu_layers=32
2025-04-07 01:38:36,783 - app.services.chatbot - INFO - Test inference took 0.8294 seconds
2025-04-07 01:38:36,783 - app.services.chatbot - INFO - GPU acceleration is ACTIVE! (fast inference time)
2025-04-07 01:38:36,783 - app.services.chatbot - INFO - Successfully loaded LLM model
2025-04-07 01:38:36,783 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-07 01:39:19,640 - app.services.chatbot - INFO - Processing query: nhu cầu chính của khách hàng là gì
2025-04-07 01:39:41,745 - app.services.chatbot - INFO - Generated answer in 22.1036 seconds
2025-04-07 01:40:20,221 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 01:40:23,046 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 01:40:23,046 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 01:40:27,750 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 01:40:27,750 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-07 01:40:27,771 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-07 01:40:27,775 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-07 01:40:27,950 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 01:40:27,950 - app.services.chatbot - INFO - Loading GGUF model with n_gpu_layers=32
2025-04-07 01:40:30,445 - app.services.chatbot - INFO - Test inference took 0.8416 seconds
2025-04-07 01:40:30,445 - app.services.chatbot - INFO - GPU acceleration is ACTIVE! (fast inference time)
2025-04-07 01:40:30,445 - app.services.chatbot - INFO - Successfully loaded LLM model
2025-04-07 01:40:30,445 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-07 01:40:43,730 - app.services.chatbot - INFO - Processing query: nhu cầu chính của khách hàng là gì
2025-04-07 01:41:05,713 - app.services.chatbot - INFO - Generated answer in 21.9822 seconds
2025-04-07 01:43:12,203 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 01:43:15,163 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 01:43:15,163 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 01:43:19,466 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 01:43:19,466 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-07 01:43:19,509 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-07 01:43:19,509 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-07 01:43:19,748 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 01:43:19,748 - app.services.chatbot - INFO - Loading GGUF model with n_gpu_layers=32
2025-04-07 01:43:22,303 - app.services.chatbot - INFO - Test inference took 0.8390 seconds
2025-04-07 01:43:22,303 - app.services.chatbot - INFO - GPU acceleration is ACTIVE! (fast inference time)
2025-04-07 01:43:22,303 - app.services.chatbot - INFO - Successfully loaded LLM model
2025-04-07 01:43:22,303 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-07 01:44:11,742 - app.services.chatbot - INFO - Processing query: nhu cầu chính của khách hàng là gì
2025-04-07 01:44:33,831 - app.services.chatbot - INFO - Generated answer in 22.0881 seconds
2025-04-07 01:44:58,888 - app.services.chatbot - INFO - Processing query: nhu cầu chính của khách hàng là gì
2025-04-07 01:45:06,849 - app.services.chatbot - INFO - Generated answer in 7.9603 seconds
2025-04-07 01:50:05,852 - app.services.chatbot - ERROR - Error checking CUDA: Could not find module 'cudart64_11.dll' (or one of its dependencies). Try using the full path with constructor syntax.
2025-04-07 01:50:06,020 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 01:50:06,020 - app.services.chatbot - ERROR - Error checking CUDA: Could not find module 'cudart64_11.dll' (or one of its dependencies). Try using the full path with constructor syntax.
2025-04-07 01:50:06,020 - app.services.chatbot - WARNING - CUDA is not available. Running on CPU only.
2025-04-07 01:50:09,910 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 01:50:09,910 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 01:50:14,234 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 01:50:14,234 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-07 01:50:14,252 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-07 01:50:14,258 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-07 01:50:14,489 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 01:50:14,489 - app.services.chatbot - INFO - Loading GGUF model from models/mistral-7b-instruct-v0.1.Q2_K.gguf with n_gpu_layers=100
2025-04-07 01:50:15,694 - app.services.chatbot - INFO - Warming up LLM...
2025-04-07 01:50:17,992 - app.services.chatbot - INFO - Testing LLM performance...
2025-04-07 01:50:21,924 - app.services.chatbot - INFO - LLM test inference took 3.9321 seconds
2025-04-07 01:50:21,924 - app.services.chatbot - WARNING - LIKELY RUNNING ON CPU (slow inference time: 3.9321s)
2025-04-07 01:50:21,924 - app.services.chatbot - INFO - LLM test result: 
Answer: I'm just a computer program, so I don't h...
2025-04-07 01:50:21,924 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-07 01:50:41,624 - app.services.chatbot - INFO - Processing query: nhu cầu chính của khách hàng là gì
2025-04-07 01:51:02,574 - app.services.chatbot - INFO - Generated answer in 20.9495 seconds
2025-04-07 02:40:22,514 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 02:40:26,068 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 02:40:26,068 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 02:40:30,603 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 02:40:30,605 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-07 02:40:30,643 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-07 02:40:30,652 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-07 02:40:31,047 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 02:40:31,047 - app.services.chatbot - INFO - Loading GGUF model with n_gpu_layers=32
2025-04-07 02:40:33,472 - app.services.chatbot - INFO - Test inference took 0.8302 seconds
2025-04-07 02:40:33,473 - app.services.chatbot - INFO - GPU acceleration is ACTIVE! (fast inference time)
2025-04-07 02:40:33,473 - app.services.chatbot - INFO - Successfully loaded LLM model
2025-04-07 02:40:33,474 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-07 02:40:45,392 - app.services.chatbot - INFO - Processing query: nhu cầu chính của khách hàng là gì
2025-04-07 02:41:07,218 - app.services.chatbot - INFO - Generated answer in 21.8245 seconds
2025-04-07 02:44:52,682 - app.services.chatbot - INFO - Processing query: nhu cầu chính của khách hàng là gì
2025-04-07 02:45:00,694 - app.services.chatbot - INFO - Generated answer in 8.0108 seconds
2025-04-07 02:46:22,625 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 02:46:25,663 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 02:46:25,663 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 02:46:29,743 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 02:46:29,743 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-07 02:46:29,764 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-07 02:46:29,776 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-07 02:46:29,938 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 02:46:29,938 - app.services.chatbot - INFO - Loading GGUF model with n_gpu_layers=32
2025-04-07 02:46:29,938 - app.services.chatbot - ERROR - Failed to load model: 'Settings' object has no attribute 'N_BATCH'
2025-04-07 02:46:29,953 - app.services.chatbot - ERROR - Error initializing ChatbotService components: 'Settings' object has no attribute 'N_BATCH'
2025-04-07 02:46:49,296 - app.services.chatbot - INFO - Processing query: nhu cân
2025-04-07 02:46:49,297 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 02:46:49,299 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 02:46:49,299 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 02:46:52,352 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 02:46:52,451 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 02:46:52,451 - app.services.chatbot - INFO - Loading GGUF model with n_gpu_layers=32
2025-04-07 02:46:52,452 - app.services.chatbot - ERROR - Failed to load model: 'Settings' object has no attribute 'N_BATCH'
2025-04-07 02:46:52,452 - app.services.chatbot - ERROR - Error initializing ChatbotService components: 'Settings' object has no attribute 'N_BATCH'
2025-04-07 02:46:52,453 - app.services.chatbot - ERROR - Error generating answer: 'Settings' object has no attribute 'N_BATCH'
2025-04-07 02:48:08,396 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 02:48:11,546 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 02:48:11,546 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 02:48:16,010 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 02:48:16,010 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-07 02:48:16,026 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-07 02:48:16,045 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-07 02:48:16,231 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 02:48:16,231 - app.services.chatbot - INFO - Loading GGUF model with n_gpu_layers=32
2025-04-07 02:48:16,231 - app.services.chatbot - ERROR - Failed to load model: 'Settings' object has no attribute 'N_BATCH'
2025-04-07 02:48:16,231 - app.services.chatbot - ERROR - Error initializing ChatbotService components: 'Settings' object has no attribute 'N_BATCH'
2025-04-07 02:55:09,442 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 02:55:33,518 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 02:55:33,518 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 02:55:38,802 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 02:55:38,817 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-07 02:55:38,956 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-07 02:55:39,016 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-07 02:55:39,228 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 02:55:39,229 - app.services.chatbot - INFO - Loading GGUF model with n_gpu_layers=100
2025-04-07 02:55:41,417 - app.services.chatbot - INFO - Test inference took 0.8121 seconds
2025-04-07 02:55:41,417 - app.services.chatbot - INFO - ✓ GPU acceleration is ACTIVE! (fast inference time)
2025-04-07 02:55:41,417 - app.services.chatbot - INFO - Successfully loaded LLM model
2025-04-07 02:55:41,418 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-07 02:56:11,399 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 02:56:14,330 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 02:56:14,330 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 02:56:18,987 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 02:56:18,990 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-07 02:56:19,004 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-07 02:56:19,009 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-07 02:56:19,182 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 02:56:19,195 - app.services.chatbot - INFO - Loading GGUF model with n_gpu_layers=100
2025-04-07 02:56:21,058 - app.services.chatbot - INFO - Test inference took 0.7527 seconds
2025-04-07 02:56:21,058 - app.services.chatbot - INFO - ✓ GPU acceleration is ACTIVE! (fast inference time)
2025-04-07 02:56:21,058 - app.services.chatbot - INFO - Successfully loaded LLM model
2025-04-07 02:56:21,058 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-07 02:57:51,525 - app.services.chatbot - INFO - Processing query: nhu cầu chính của khách hàng
2025-04-07 02:58:11,404 - app.services.chatbot - INFO - Generated answer in 19.8773 seconds
2025-04-07 02:58:39,762 - app.services.chatbot - INFO - Processing query: nhu cầu chính của khách hàng
2025-04-07 02:58:46,429 - app.services.chatbot - INFO - Generated answer in 6.6652 seconds
2025-04-07 03:02:27,334 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 03:02:30,312 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 03:02:30,313 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 03:02:34,897 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 03:02:34,899 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-07 03:02:34,915 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-07 03:02:34,919 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-07 03:02:35,097 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 03:02:35,097 - app.services.chatbot - INFO - Loading GGUF model with n_gpu_layers=100
2025-04-07 03:02:36,908 - app.services.chatbot - INFO - Test inference took 0.6970 seconds
2025-04-07 03:02:36,909 - app.services.chatbot - INFO - ✓ GPU acceleration is ACTIVE! (fast inference time)
2025-04-07 03:02:36,909 - app.services.chatbot - INFO - Successfully loaded LLM model
2025-04-07 03:02:36,909 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-07 03:02:41,681 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 03:02:44,565 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 03:02:44,565 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 03:02:48,932 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 03:02:48,932 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-07 03:02:48,949 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-07 03:02:48,949 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-07 03:02:49,142 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 03:02:49,143 - app.services.chatbot - INFO - Loading GGUF model with n_gpu_layers=100
2025-04-07 03:02:51,067 - app.services.chatbot - INFO - Test inference took 0.7435 seconds
2025-04-07 03:02:51,067 - app.services.chatbot - INFO - ✓ GPU acceleration is ACTIVE! (fast inference time)
2025-04-07 03:02:51,067 - app.services.chatbot - INFO - Successfully loaded LLM model
2025-04-07 03:02:51,077 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-07 03:03:32,803 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 03:03:35,800 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 03:03:35,800 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 03:03:39,800 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 03:03:39,802 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-07 03:03:39,817 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-07 03:03:39,822 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-07 03:03:39,995 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 03:03:39,996 - app.services.chatbot - INFO - Loading GGUF model with n_gpu_layers=100
2025-04-07 03:03:41,767 - app.services.chatbot - INFO - Test inference took 0.7069 seconds
2025-04-07 03:03:41,767 - app.services.chatbot - INFO - ✓ GPU acceleration is ACTIVE! (fast inference time)
2025-04-07 03:03:41,767 - app.services.chatbot - INFO - Successfully loaded LLM model
2025-04-07 03:03:41,767 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-07 03:04:12,823 - app.services.chatbot - INFO - Processing query: nhu cầu chính của khách hàng
2025-04-07 03:04:12,835 - app.services.chatbot - INFO - Processed query: nhu cầu chính của khách hàng customer needs consumer behavior marketing psychology maslow hierarchy
2025-04-07 03:04:12,835 - app.services.chatbot - INFO - Generated 5 query variants
2025-04-07 03:04:13,097 - app.services.chatbot - INFO - Retrieved 46 unique documents from all variants
2025-04-07 03:04:13,098 - app.services.chatbot - INFO - Using 37 documents within context window limit
2025-04-07 03:04:13,102 - app.services.chatbot - ERROR - Error generating answer: Requested tokens (7912) exceed context window of 2048
2025-04-07 03:05:36,803 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 03:05:39,698 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 03:05:39,699 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 03:05:44,190 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 03:05:44,192 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-07 03:05:44,207 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-07 03:05:44,212 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-07 03:05:44,429 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 03:05:44,431 - app.services.chatbot - INFO - Loading GGUF model with n_gpu_layers=100
2025-04-07 03:05:46,328 - app.services.chatbot - INFO - Test inference took 0.7316 seconds
2025-04-07 03:05:46,328 - app.services.chatbot - INFO - GPU acceleration is ACTIVE!
2025-04-07 03:05:46,328 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-07 03:06:16,523 - app.services.chatbot - INFO - Processing query: nhu cầu chính của khách hàng
2025-04-07 03:06:16,523 - app.services.chatbot - INFO - Enhanced query: nhu cầu chính của khách hàng customer needs customer demands customer requirements
2025-04-07 03:06:16,704 - app.services.chatbot - INFO - Found 8 relevant documents
2025-04-07 03:06:16,706 - app.services.chatbot - ERROR - Error processing query: Requested tokens (2071) exceed context window of 2048
2025-04-07 03:06:27,620 - app.services.chatbot - INFO - Processing query: Đã xảy ra lỗi khi xử lý câu hỏi của bạn.
2025-04-07 03:06:27,651 - app.services.chatbot - INFO - Found 8 relevant documents
2025-04-07 03:06:50,386 - app.services.chatbot - INFO - Generated answer in 22.7653 seconds
2025-04-07 15:08:23,069 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 15:08:39,735 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 15:08:39,735 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 15:08:45,203 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 15:08:45,203 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-07 15:08:45,421 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-07 15:08:45,421 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-07 15:08:45,655 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 15:08:45,655 - app.services.chatbot - INFO - Loading GGUF model with n_gpu_layers=32
2025-04-07 15:08:51,200 - app.services.chatbot - INFO - Test inference took 0.9527 seconds
2025-04-07 15:08:51,201 - app.services.chatbot - INFO - GPU acceleration is ACTIVE!
2025-04-07 15:08:51,201 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-07 15:10:04,737 - app.services.chatbot - INFO - Processing query: nhu cầu
2025-04-07 15:10:05,302 - app.services.chatbot - INFO - Found 8 relevant documents
2025-04-07 15:11:10,731 - app.services.chatbot - INFO - Generated answer in 65.9933 seconds
2025-04-07 15:20:49,483 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 15:20:49,485 - app.services.chatbot - INFO - Phát hiện GPU GTX: NVIDIA GeForce GTX 1650 with Max-Q Design
2025-04-07 15:20:49,821 - app.services.chatbot - INFO - Thông tin GPU chi tiết từ nvidia-smi đã được trích xuất
2025-04-07 15:20:49,821 - app.services.chatbot - INFO - GPU phát hiện: NVIDIA GeForce GTX 1650 with Max-Q Design
2025-04-07 15:20:49,822 - app.services.chatbot - INFO - GPU memory: 4.00 GB
2025-04-07 15:20:49,822 - app.services.chatbot - INFO - CUDA version: 12.1
2025-04-07 15:20:52,701 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 15:20:52,701 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 15:20:57,467 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 15:20:57,467 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-07 15:20:57,489 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-07 15:20:57,497 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-07 15:20:57,675 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 15:20:57,675 - app.services.chatbot - INFO - GTX GPU memory: 4095.69 MB
2025-04-07 15:20:57,675 - app.services.chatbot - INFO - Optimal GPU layers for GTX: 20
2025-04-07 15:20:57,675 - app.services.chatbot - INFO - Phát hiện GTX GPU, sử dụng 20 GPU layers
2025-04-07 15:20:57,675 - app.services.chatbot - INFO - Loading GGUF model with n_gpu_layers=20
2025-04-07 15:21:00,350 - app.services.chatbot - INFO - Test inference took 1.2689 seconds
2025-04-07 15:21:00,350 - app.services.chatbot - WARNING -  GPU có thể không hoạt động (thời gian suy luận chậm: 1.2689s)
2025-04-07 15:21:00,350 - app.services.chatbot - WARNING - Thử xác định lại số lượng GPU layers tối ưu...
2025-04-07 15:21:00,483 - app.services.chatbot - INFO - Cleaned GPU memory
2025-04-07 15:21:00,483 - app.services.chatbot - INFO - Thử lại với n_gpu_layers=12
2025-04-07 15:21:03,746 - app.services.chatbot - WARNING -  GPU vẫn không hoạt động tốt, sử dụng CPU
2025-04-07 15:21:03,746 - app.services.chatbot - INFO - ChatbotService initialized successfully using CPU
2025-04-07 15:23:14,115 - app.services.chatbot - INFO - Processing query: hello
2025-04-07 15:23:14,116 - app.services.chatbot - INFO - Processing with CPU only
2025-04-07 15:23:14,318 - app.services.chatbot - INFO - Found 8 relevant documents
2025-04-07 15:23:29,401 - app.services.chatbot - INFO - Generated answer in 15.2847 seconds
2025-04-07 15:25:53,433 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 15:25:53,433 - app.services.chatbot - INFO - Phát hiện GPU GTX: NVIDIA GeForce GTX 1650 with Max-Q Design
2025-04-07 15:25:53,433 - app.services.chatbot - INFO - Phát hiện GPU: NVIDIA GeForce GTX 1650 with Max-Q Design
2025-04-07 15:25:53,433 - app.services.chatbot - INFO - CUDA có sẵn, version: 12.1
2025-04-07 15:25:56,365 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 15:25:56,365 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 15:26:00,600 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 15:26:00,603 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-07 15:26:00,617 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-07 15:26:00,621 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-07 15:26:00,780 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 15:26:00,780 - app.services.chatbot - INFO - GTX GPU memory: 4095.69 MB
2025-04-07 15:26:00,780 - app.services.chatbot - INFO - Optimal GPU layers for GTX: 20
2025-04-07 15:26:00,780 - app.services.chatbot - INFO - Phát hiện GTX GPU, sử dụng 20 GPU layers
2025-04-07 15:26:00,780 - app.services.chatbot - INFO - Loading GGUF model with n_gpu_layers=20
2025-04-07 15:26:03,332 - app.services.chatbot - INFO - Test inference took 1.2387 seconds
2025-04-07 15:26:03,332 - app.services.chatbot - INFO - GPU memory allocated after loading: 86.65 MB
2025-04-07 15:26:03,332 - app.services.chatbot - INFO - GPU acceleration confirmed by memory allocation
2025-04-07 15:26:03,332 - app.services.chatbot - WARNING - ⚠️ GPU có thể không hoạt động hiệu quả (thời gian suy luận: 1.2387s)
2025-04-07 15:26:03,332 - app.services.chatbot - INFO - Tuy nhiên, GPU vẫn được sử dụng (memory allocated: 86.65 MB)
2025-04-07 15:26:03,332 - app.services.chatbot - INFO - ChatbotService initialized successfully using NVIDIA GeForce GTX 1650 with Max-Q Design
2025-04-07 15:26:50,423 - app.services.chatbot - INFO - Processing query: nhu cầu
2025-04-07 15:26:50,424 - app.services.chatbot - INFO - Processing with GPU acceleration: NVIDIA GeForce GTX 1650 with Max-Q Design
2025-04-07 15:26:50,628 - app.services.chatbot - INFO - Found 8 relevant documents
2025-04-07 15:27:46,278 - app.services.chatbot - INFO - Generated answer in 55.8542 seconds
2025-04-07 15:29:46,012 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 15:29:46,012 - app.services.chatbot - INFO - Phát hiện GPU GTX: NVIDIA GeForce GTX 1650 with Max-Q Design
2025-04-07 15:29:46,012 - app.services.chatbot - INFO - Phát hiện GPU: NVIDIA GeForce GTX 1650 with Max-Q Design
2025-04-07 15:29:46,012 - app.services.chatbot - INFO - CUDA có sẵn, version: 12.1
2025-04-07 15:29:49,135 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 15:29:49,135 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 15:29:53,979 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 15:29:53,979 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-07 15:29:53,994 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-07 15:29:54,013 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-07 15:29:54,204 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 15:29:54,205 - app.services.chatbot - INFO - GTX GPU memory: 4095.69 MB
2025-04-07 15:29:54,205 - app.services.chatbot - INFO - Optimal GPU layers for GTX: 20
2025-04-07 15:29:54,205 - app.services.chatbot - INFO - Phát hiện GTX GPU, sử dụng 20 GPU layers
2025-04-07 15:29:54,206 - app.services.chatbot - INFO - Loading GGUF model with n_gpu_layers=20
2025-04-07 15:29:56,956 - app.services.chatbot - INFO - Test inference took 1.3717 seconds
2025-04-07 15:29:56,957 - app.services.chatbot - INFO - GPU memory allocated after loading: 86.65 MB
2025-04-07 15:29:56,957 - app.services.chatbot - INFO - GPU acceleration confirmed by memory allocation
2025-04-07 15:29:56,957 - app.services.chatbot - WARNING - ⚠️ GPU có thể không hoạt động hiệu quả (thời gian suy luận: 1.3717s)
2025-04-07 15:29:56,957 - app.services.chatbot - INFO - Tuy nhiên, GPU vẫn được sử dụng (memory allocated: 86.65 MB)
2025-04-07 15:29:56,958 - app.services.chatbot - INFO - ChatbotService initialized successfully using NVIDIA GeForce GTX 1650 with Max-Q Design
2025-04-07 15:30:43,286 - app.services.chatbot - INFO - Processing query: nhu cầu chính của khách hàng là gì
2025-04-07 15:30:43,287 - app.services.chatbot - INFO - Processing with GPU acceleration: NVIDIA GeForce GTX 1650 with Max-Q Design
2025-04-07 15:30:43,287 - app.services.chatbot - INFO - Enhanced query: nhu cầu chính của khách hàng là gì customer needs customer demands customer requirements
2025-04-07 15:30:43,516 - app.services.chatbot - INFO - Found 8 relevant documents
2025-04-07 15:31:21,816 - app.services.chatbot - INFO - Generated answer in 38.5290 seconds
2025-04-07 15:33:58,703 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 15:33:58,703 - app.services.chatbot - INFO - Phát hiện GPU GTX: NVIDIA GeForce GTX 1650 with Max-Q Design
2025-04-07 15:33:58,703 - app.services.chatbot - INFO - Phát hiện GPU: NVIDIA GeForce GTX 1650 with Max-Q Design
2025-04-07 15:33:58,703 - app.services.chatbot - INFO - CUDA có sẵn, version: 12.1
2025-04-07 15:34:01,480 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 15:34:01,480 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 15:34:05,963 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 15:34:05,979 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-07 15:34:05,979 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-07 15:34:05,999 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-07 15:34:06,162 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 15:34:06,162 - app.services.chatbot - INFO - GTX GPU memory: 4095.69 MB
2025-04-07 15:34:06,162 - app.services.chatbot - INFO - Optimal GPU layers for GTX: 20
2025-04-07 15:34:06,162 - app.services.chatbot - INFO - Phát hiện GTX GPU, sử dụng 20 GPU layers
2025-04-07 15:34:06,162 - app.services.chatbot - INFO - Loading GGUF model with n_gpu_layers=20
2025-04-07 15:34:08,744 - app.services.chatbot - INFO - Test inference took 1.2692 seconds
2025-04-07 15:34:08,744 - app.services.chatbot - INFO - GPU memory allocated after loading: 86.65 MB
2025-04-07 15:34:08,744 - app.services.chatbot - INFO - GPU acceleration confirmed by memory allocation
2025-04-07 15:34:08,744 - app.services.chatbot - WARNING - ⚠️ GPU có thể không hoạt động hiệu quả (thời gian suy luận: 1.2692s)
2025-04-07 15:34:08,744 - app.services.chatbot - INFO - Tuy nhiên, GPU vẫn được sử dụng (memory allocated: 86.65 MB)
2025-04-07 15:34:08,744 - app.services.chatbot - INFO - ChatbotService initialized successfully using NVIDIA GeForce GTX 1650 with Max-Q Design
2025-04-07 15:35:16,994 - app.services.chatbot - INFO - Processing query: Kết phiên giao dịch ngày 10-2, chỉ số VN-Index như thế nào
2025-04-07 15:35:16,995 - app.services.chatbot - INFO - Processing with GPU acceleration: NVIDIA GeForce GTX 1650 with Max-Q Design
2025-04-07 15:35:17,183 - app.services.chatbot - INFO - Found 8 relevant documents
2025-04-07 15:35:43,488 - app.services.chatbot - INFO - Generated answer in 26.4933 seconds
2025-04-07 15:37:56,915 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 15:37:56,915 - app.services.chatbot - INFO - Phát hiện GPU GTX: NVIDIA GeForce GTX 1650 with Max-Q Design
2025-04-07 15:37:56,915 - app.services.chatbot - INFO - Phát hiện GPU: NVIDIA GeForce GTX 1650 with Max-Q Design
2025-04-07 15:37:56,915 - app.services.chatbot - INFO - CUDA có sẵn, version: 12.1
2025-04-07 15:38:00,063 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 15:38:00,063 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 15:38:04,778 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 15:38:04,778 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-07 15:38:04,798 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-07 15:38:04,811 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-07 15:38:05,001 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 15:38:05,001 - app.services.chatbot - INFO - GTX GPU memory: 4095.69 MB
2025-04-07 15:38:05,001 - app.services.chatbot - INFO - Optimal GPU layers for GTX: 20
2025-04-07 15:38:05,001 - app.services.chatbot - INFO - Phát hiện GTX GPU, sử dụng 20 GPU layers
2025-04-07 15:38:05,001 - app.services.chatbot - INFO - Loading GGUF model with n_gpu_layers=20
2025-04-07 15:38:05,001 - app.services.chatbot - INFO - Forcing all layers to GPU: n_gpu_layers=32
2025-04-07 15:38:07,179 - app.services.chatbot - INFO - Test inference took 0.9552 seconds
2025-04-07 15:38:07,179 - app.services.chatbot - INFO - GPU memory allocated after loading: 86.65 MB
2025-04-07 15:38:07,179 - app.services.chatbot - INFO - GPU acceleration confirmed by memory allocation
2025-04-07 15:38:07,179 - app.services.chatbot - INFO - ✅ GPU acceleration is ACTIVE!
2025-04-07 15:38:07,179 - app.services.chatbot - INFO - ChatbotService initialized successfully using NVIDIA GeForce GTX 1650 with Max-Q Design
2025-04-07 15:38:35,968 - app.services.chatbot - INFO - Processing query: Kết phiên giao dịch ngày 10-2, chỉ số VN-Index như thế nào
2025-04-07 15:38:35,969 - app.services.chatbot - INFO - Processing with GPU acceleration: NVIDIA GeForce GTX 1650 with Max-Q Design
2025-04-07 15:38:36,158 - app.services.chatbot - INFO - Found 8 relevant documents
2025-04-07 15:39:01,333 - app.services.chatbot - INFO - Generated answer in 25.3636 seconds
2025-04-07 15:39:07,173 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 15:39:07,189 - app.services.chatbot - INFO - Phát hiện GPU GTX: NVIDIA GeForce GTX 1650 with Max-Q Design
2025-04-07 15:39:07,189 - app.services.chatbot - INFO - Phát hiện GPU: NVIDIA GeForce GTX 1650 with Max-Q Design
2025-04-07 15:39:07,189 - app.services.chatbot - INFO - CUDA có sẵn, version: 12.1
2025-04-07 15:39:10,182 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 15:39:10,182 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 15:39:14,852 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 15:39:14,852 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-07 15:39:14,872 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-07 15:39:14,877 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-07 15:39:15,025 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 15:39:15,025 - app.services.chatbot - INFO - GTX GPU memory: 4095.69 MB
2025-04-07 15:39:15,025 - app.services.chatbot - INFO - Optimal GPU layers for GTX: 20
2025-04-07 15:39:15,025 - app.services.chatbot - INFO - Phát hiện GTX GPU, sử dụng 20 GPU layers
2025-04-07 15:39:15,025 - app.services.chatbot - INFO - Loading GGUF model with n_gpu_layers=20
2025-04-07 15:39:15,025 - app.services.chatbot - INFO - Forcing all layers to GPU: n_gpu_layers=32
2025-04-07 15:39:16,919 - app.services.chatbot - INFO - Test inference took 0.8757 seconds
2025-04-07 15:39:16,920 - app.services.chatbot - INFO - GPU memory allocated after loading: 86.65 MB
2025-04-07 15:39:16,920 - app.services.chatbot - INFO - GPU acceleration confirmed by memory allocation
2025-04-07 15:39:16,920 - app.services.chatbot - INFO - ✅ GPU acceleration is ACTIVE!
2025-04-07 15:39:16,920 - app.services.chatbot - INFO - ChatbotService initialized successfully using NVIDIA GeForce GTX 1650 with Max-Q Design
2025-04-07 15:39:21,511 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 15:39:21,511 - app.services.chatbot - INFO - Phát hiện GPU GTX: NVIDIA GeForce GTX 1650 with Max-Q Design
2025-04-07 15:39:21,511 - app.services.chatbot - INFO - Phát hiện GPU: NVIDIA GeForce GTX 1650 with Max-Q Design
2025-04-07 15:39:21,511 - app.services.chatbot - INFO - CUDA có sẵn, version: 12.1
2025-04-07 15:39:24,507 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 15:39:24,507 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 15:39:28,836 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 15:39:28,836 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-07 15:39:28,857 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-07 15:39:28,863 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-07 15:39:29,009 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 15:39:29,025 - app.services.chatbot - INFO - GTX GPU memory: 4095.69 MB
2025-04-07 15:39:29,025 - app.services.chatbot - INFO - Optimal GPU layers for GTX: 20
2025-04-07 15:39:29,025 - app.services.chatbot - INFO - Phát hiện GTX GPU, sử dụng 20 GPU layers
2025-04-07 15:39:29,025 - app.services.chatbot - INFO - Loading GGUF model with n_gpu_layers=20
2025-04-07 15:39:29,025 - app.services.chatbot - INFO - Forcing all layers to GPU: n_gpu_layers=32
2025-04-07 15:39:30,982 - app.services.chatbot - INFO - Test inference took 0.9391 seconds
2025-04-07 15:39:30,982 - app.services.chatbot - INFO - GPU memory allocated after loading: 86.65 MB
2025-04-07 15:39:30,983 - app.services.chatbot - INFO - GPU acceleration confirmed by memory allocation
2025-04-07 15:39:30,983 - app.services.chatbot - INFO - ✅ GPU acceleration is ACTIVE!
2025-04-07 15:39:30,983 - app.services.chatbot - INFO - ChatbotService initialized successfully using NVIDIA GeForce GTX 1650 with Max-Q Design
2025-04-07 15:40:15,862 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 15:40:15,862 - app.services.chatbot - INFO - Phát hiện GPU GTX: NVIDIA GeForce GTX 1650 with Max-Q Design
2025-04-07 15:40:15,862 - app.services.chatbot - INFO - Phát hiện GPU: NVIDIA GeForce GTX 1650 with Max-Q Design
2025-04-07 15:40:15,877 - app.services.chatbot - INFO - CUDA có sẵn, version: 12.1
2025-04-07 15:40:18,698 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 15:40:18,698 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 15:40:23,681 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 15:40:23,696 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-07 15:40:23,712 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-07 15:40:23,718 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-07 15:40:23,878 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 15:40:23,878 - app.services.chatbot - INFO - GTX GPU memory: 4095.69 MB
2025-04-07 15:40:23,878 - app.services.chatbot - INFO - Optimal GPU layers for GTX: 20
2025-04-07 15:40:23,878 - app.services.chatbot - INFO - Phát hiện GTX GPU, sử dụng 20 GPU layers
2025-04-07 15:40:23,878 - app.services.chatbot - INFO - Loading GGUF model with n_gpu_layers=20
2025-04-07 15:40:23,878 - app.services.chatbot - INFO - Forcing all layers to GPU: n_gpu_layers=32
2025-04-07 15:40:25,941 - app.services.chatbot - INFO - Test inference took 0.9053 seconds
2025-04-07 15:40:25,941 - app.services.chatbot - INFO - GPU memory allocated after loading: 86.65 MB
2025-04-07 15:40:25,941 - app.services.chatbot - INFO - GPU acceleration confirmed by memory allocation
2025-04-07 15:40:25,941 - app.services.chatbot - INFO - ✅ GPU acceleration is ACTIVE!
2025-04-07 15:40:25,941 - app.services.chatbot - INFO - ChatbotService initialized successfully using NVIDIA GeForce GTX 1650 with Max-Q Design
2025-04-07 15:40:44,295 - app.services.chatbot - INFO - Processing query: Kết phiên giao dịch ngày 10-2, chỉ số VN-Index như thế nào
2025-04-07 15:40:44,296 - app.services.chatbot - INFO - Processing with GPU acceleration: NVIDIA GeForce GTX 1650 with Max-Q Design
2025-04-07 15:40:44,490 - app.services.chatbot - INFO - Found 8 relevant documents
2025-04-07 15:41:09,331 - app.services.chatbot - INFO - Generated answer in 25.0345 seconds
2025-04-07 15:52:37,282 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 15:52:37,297 - app.services.chatbot - INFO - Phát hiện GPU GTX: NVIDIA GeForce GTX 1650 with Max-Q Design
2025-04-07 15:52:37,298 - app.services.chatbot - INFO - Phát hiện GPU: NVIDIA GeForce GTX 1650 with Max-Q Design
2025-04-07 15:52:37,298 - app.services.chatbot - INFO - CUDA có sẵn, version: 12.1
2025-04-07 15:52:40,173 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 15:52:40,173 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 15:52:44,791 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 15:52:44,791 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-07 15:52:44,815 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-07 15:52:44,820 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-07 15:52:44,977 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 15:52:44,977 - app.services.chatbot - INFO - GPU VRAM: 4.00 GB
2025-04-07 15:52:44,977 - app.services.chatbot - INFO - Low VRAM GPU detected, using optimized settings: 16 layers, batch=256
2025-04-07 15:52:48,282 - app.services.chatbot - INFO - Test inference took 1.9009 seconds
2025-04-07 15:52:48,282 - app.services.chatbot - INFO - GPU memory allocated after loading: 86.65 MB
2025-04-07 15:52:48,282 - app.services.chatbot - INFO - GPU acceleration confirmed by memory allocation
2025-04-07 15:52:48,282 - app.services.chatbot - INFO - GPU is being used but inference time is slower than expected
2025-04-07 15:52:48,282 - app.services.chatbot - WARNING - ⚠️ GPU có thể không hoạt động hiệu quả (thời gian suy luận: 1.9009s)
2025-04-07 15:52:48,282 - app.services.chatbot - INFO - Tuy nhiên, GPU vẫn được sử dụng (memory allocated: 86.65 MB)
2025-04-07 15:53:24,837 - app.services.chatbot - INFO - Processing query: Kết phiên giao dịch ngày 10-2, chỉ số VN-Index như thế nào
2025-04-07 15:53:24,838 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 15:53:24,838 - app.services.chatbot - INFO - Phát hiện GPU GTX: NVIDIA GeForce GTX 1650 with Max-Q Design
2025-04-07 15:53:24,839 - app.services.chatbot - INFO - Phát hiện GPU: NVIDIA GeForce GTX 1650 with Max-Q Design
2025-04-07 15:53:24,839 - app.services.chatbot - INFO - CUDA có sẵn, version: 12.1
2025-04-07 15:53:24,841 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 15:53:24,842 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 15:53:27,915 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 15:53:28,106 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 15:53:28,107 - app.services.chatbot - INFO - GPU VRAM: 4.00 GB
2025-04-07 15:53:28,107 - app.services.chatbot - INFO - Low VRAM GPU detected, using optimized settings: 16 layers, batch=256
2025-04-07 15:53:31,159 - app.services.chatbot - INFO - Test inference took 1.6388 seconds
2025-04-07 15:53:31,159 - app.services.chatbot - INFO - GPU memory allocated after loading: 173.30 MB
2025-04-07 15:53:31,160 - app.services.chatbot - INFO - GPU acceleration confirmed by memory allocation
2025-04-07 15:53:31,160 - app.services.chatbot - INFO - GPU is being used but inference time is slower than expected
2025-04-07 15:53:31,160 - app.services.chatbot - WARNING - ⚠️ GPU có thể không hoạt động hiệu quả (thời gian suy luận: 1.6388s)
2025-04-07 15:53:31,160 - app.services.chatbot - INFO - Tuy nhiên, GPU vẫn được sử dụng (memory allocated: 173.30 MB)
2025-04-07 15:53:31,160 - app.services.chatbot - INFO - Processing with GPU acceleration: NVIDIA GeForce GTX 1650 with Max-Q Design
2025-04-07 15:53:31,161 - app.services.chatbot - ERROR - Error processing query: 'ChatbotService' object has no attribute '_retriever'
2025-04-07 15:57:29,961 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 15:57:30,020 - app.services.chatbot - INFO - Cleaned GPU memory: allocated=0.00MB, reserved=0.00MB
2025-04-07 15:57:30,021 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-07 15:57:32,968 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 15:57:32,968 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 15:57:37,304 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 15:57:37,304 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-07 15:57:37,329 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-07 15:57:37,330 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-07 15:57:37,513 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 15:57:37,514 - app.services.chatbot - INFO - GPU config: layers=12, batch=256, ctx=2048, f16=True
2025-04-07 15:57:37,514 - app.services.chatbot - INFO - Loading GGUF model from models/mistral-7b-instruct-v0.1.Q2_K.gguf
2025-04-07 15:57:40,747 - app.services.chatbot - INFO - Test inference completed in 1.9901 seconds with result: 
Answer: 4...
2025-04-07 15:57:40,747 - app.services.chatbot - INFO - GPU memory after model load: 86.65MB
2025-04-07 15:57:40,747 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-07 15:57:40,747 - app.services.chatbot - INFO - Processing query: Xin chào
2025-04-07 15:57:40,929 - app.services.chatbot - INFO - Found 4 relevant documents
2025-04-07 15:57:57,795 - app.services.chatbot - INFO - Generated answer in 17.0480 seconds
2025-04-07 15:58:46,842 - app.services.chatbot - INFO - Processing query: Kết phiên giao dịch ngày 10-2, chỉ số VN-Index như thế nào
2025-04-07 15:58:46,864 - app.services.chatbot - INFO - Found 4 relevant documents
2025-04-07 15:59:03,026 - app.services.chatbot - INFO - Generated answer in 16.1830 seconds
2025-04-07 16:03:48,319 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 16:03:48,370 - app.services.chatbot - INFO - Cleaned GPU memory: allocated=0.00MB, reserved=0.00MB
2025-04-07 16:03:48,378 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-07 16:03:51,183 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 16:03:51,183 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 16:03:55,565 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 16:03:55,580 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-07 16:03:55,580 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-07 16:03:55,601 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-07 16:03:55,813 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 16:03:55,816 - app.services.chatbot - INFO - GPU config: layers=12, batch=256, ctx=2048, f16=True
2025-04-07 16:03:55,816 - app.services.chatbot - INFO - Loading GGUF model from models/mistral-7b-instruct-v0.1.Q2_K.gguf
2025-04-07 16:03:59,355 - app.services.chatbot - INFO - Test inference completed in 2.1265 seconds with result: 
Answer: 4...
2025-04-07 16:03:59,356 - app.services.chatbot - INFO - GPU memory after model load: 86.65MB
2025-04-07 16:03:59,356 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-07 16:03:59,356 - app.services.chatbot - INFO - Processing query: Xin chào
2025-04-07 16:03:59,522 - app.services.chatbot - INFO - Found 4 relevant documents
2025-04-07 16:04:16,021 - app.services.chatbot - INFO - Generated answer in 16.6642 seconds
2025-04-07 16:04:38,841 - app.services.chatbot - INFO - Processing query: Kết phiên giao dịch ngày 10-2, chỉ số VN-Index như thế nào
2025-04-07 16:04:38,864 - app.services.chatbot - INFO - Found 4 relevant documents
2025-04-07 16:04:55,035 - app.services.chatbot - INFO - Generated answer in 16.1943 seconds
2025-04-07 16:26:02,735 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 16:26:02,794 - app.services.chatbot - INFO - Cleaned GPU memory: allocated=0.00MB, reserved=0.00MB
2025-04-07 16:26:02,794 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-07 16:26:05,676 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 16:26:05,676 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 16:26:10,495 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 16:26:10,497 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-07 16:26:10,513 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-07 16:26:10,518 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-07 16:26:10,697 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 16:26:10,698 - app.services.chatbot - INFO - GPU config: layers=12, batch=256, ctx=2048, f16=True
2025-04-07 16:26:10,698 - app.services.chatbot - INFO - Loading GGUF model from models/mistral-7b-instruct-v0.1.Q2_K.gguf
2025-04-07 16:26:14,136 - app.services.chatbot - INFO - Test inference completed in 2.1027 seconds with result: 
Answer: 4...
2025-04-07 16:26:14,136 - app.services.chatbot - INFO - GPU memory after model load: 86.65MB
2025-04-07 16:26:14,137 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-07 16:26:14,137 - app.services.chatbot - INFO - Processing query: Xin chào
2025-04-07 16:26:14,332 - app.services.chatbot - INFO - Found 4 relevant documents in 0.1944 seconds
2025-04-07 16:26:30,951 - app.services.chatbot - INFO - Generated answer in 16.8133 seconds (retrieval: 0.1944s, inference: 16.6189s)
2025-04-07 16:27:04,953 - app.api.endpoints.chat - INFO - Received chat-direct request from user 3: 'Kết phiên giao dịch ngày 10-2, chỉ số VN-Index như thế nào'
2025-04-07 16:27:04,953 - app.services.chatbot - INFO - Processing query: Kết phiên giao dịch ngày 10-2, chỉ số VN-Index như thế nào
2025-04-07 16:27:04,969 - app.services.chatbot - INFO - Found 4 relevant documents in 0.0156 seconds
2025-04-07 16:27:20,902 - app.services.chatbot - INFO - Generated answer in 15.9483 seconds (retrieval: 0.0156s, inference: 15.9327s)
2025-04-07 16:27:20,902 - app.api.endpoints.chat - INFO - Generated response for user 3 in 15.948331594467163 seconds
2025-04-07 16:29:00,095 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 16:29:00,149 - app.services.chatbot - INFO - Cleaned GPU memory: allocated=0.00MB, reserved=0.00MB
2025-04-07 16:29:00,149 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-07 16:29:03,069 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 16:29:03,069 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 16:29:07,351 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 16:29:07,354 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-07 16:29:07,359 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-07 16:29:07,374 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-07 16:29:07,540 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 16:29:07,540 - app.services.chatbot - INFO - GPU config: layers=12, batch=256, ctx=2048, f16=True
2025-04-07 16:29:07,540 - app.services.chatbot - INFO - Loading GGUF model from models/mistral-7b-instruct-v0.1.Q2_K.gguf
2025-04-07 16:29:10,828 - app.services.chatbot - INFO - Test inference completed in 2.0288 seconds with result: 
Answer: 4...
2025-04-07 16:29:10,828 - app.services.chatbot - INFO - GPU memory after model load: 86.65MB
2025-04-07 16:29:10,828 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-07 16:29:10,828 - app.services.chatbot - INFO - Processing query: Xin chào
2025-04-07 16:29:11,023 - app.services.chatbot - INFO - Found 4 relevant documents in 0.1943 seconds
2025-04-07 16:29:27,499 - app.services.chatbot - INFO - Generated answer in 16.6703 seconds (retrieval: 0.1943s, inference: 16.4760s)
2025-04-07 16:29:50,149 - app.api.endpoints.chat - INFO - Received chat-direct request from user 3: 'Kết phiên giao dịch ngày 10-2, chỉ số VN-Index như thế nào'
2025-04-07 16:29:50,149 - app.services.chatbot - INFO - Processing query: Kết phiên giao dịch ngày 10-2, chỉ số VN-Index như thế nào
2025-04-07 16:29:50,164 - app.services.chatbot - INFO - Found 4 relevant documents in 0.0156 seconds
2025-04-07 16:30:06,197 - app.services.chatbot - INFO - Generated answer in 16.0484 seconds (retrieval: 0.0156s, inference: 16.0328s)
2025-04-07 16:30:06,197 - app.api.endpoints.chat - INFO - Generated response for user 3 in 16.048414945602417 seconds
2025-04-07 16:42:55,276 - app.services.chatbot - INFO - Processing query: Ai là Chủ tịch Hồ Chí Minh?
2025-04-07 16:42:55,276 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 16:42:56,311 - app.services.chatbot - INFO - Cleaned GPU memory: allocated=0.00MB, reserved=0.00MB
2025-04-07 16:42:56,325 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-07 16:42:59,396 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 16:42:59,396 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 16:43:04,392 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 16:43:05,724 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-07 16:43:05,724 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-07 16:43:05,725 - faiss.loader - INFO - Loading faiss.
2025-04-07 16:43:05,941 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-07 16:43:06,029 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 16:43:06,030 - app.services.chatbot - INFO - GPU config: layers=32, batch=512, ctx=4096, f16=True
2025-04-07 16:43:06,031 - app.services.chatbot - INFO - Loading GGUF model from models/mistral-7b-instruct-v0.1.Q2_K.gguf
2025-04-07 16:43:06,031 - app.services.chatbot - INFO - Attempting to load model with n_gpu_layers=32
2025-04-07 16:43:06,031 - app.services.chatbot - INFO - CUDA version: 12.1
2025-04-07 16:43:06,031 - app.services.chatbot - INFO - GPU available: True
2025-04-07 16:43:06,031 - app.services.chatbot - INFO - Total GPU memory: 4.00GB
2025-04-07 16:43:06,031 - app.services.chatbot - INFO - Current GPU memory allocated: 86.65MB
2025-04-07 16:43:09,941 - app.services.chatbot - INFO - Model loaded successfully with GPU acceleration
2025-04-07 16:43:10,964 - app.services.chatbot - INFO - Test inference completed in 1.0218 seconds with result: 
Answer: 4...
2025-04-07 16:43:10,964 - app.services.chatbot - INFO - GPU memory after model load: 86.65MB
2025-04-07 16:43:10,964 - app.services.chatbot - INFO - CUDA is being used: Yes
2025-04-07 16:43:10,964 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-07 16:43:11,154 - app.services.chatbot - INFO - Found 4 relevant documents in 0.1903 seconds
2025-04-07 16:43:22,194 - app.services.chatbot - INFO - Generated answer in 11.2299 seconds (retrieval: 0.1903s, inference: 11.0396s)
2025-04-07 16:43:47,828 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 16:43:47,880 - app.services.chatbot - INFO - Cleaned GPU memory: allocated=0.00MB, reserved=0.00MB
2025-04-07 16:43:47,880 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-07 16:43:50,944 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-04-07 16:43:50,944 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 16:43:56,161 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 16:43:56,344 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-07 16:43:56,344 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-07 16:43:56,344 - faiss.loader - INFO - Loading faiss.
2025-04-07 16:43:56,366 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-07 16:43:56,544 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 16:43:56,544 - app.services.chatbot - INFO - GPU config: layers=32, batch=512, ctx=4096, f16=True
2025-04-07 16:43:56,544 - app.services.chatbot - INFO - Loading GGUF model from models/mistral-7b-instruct-v0.1.Q2_K.gguf
2025-04-07 16:43:56,544 - app.services.chatbot - INFO - Attempting to load model with n_gpu_layers=32
2025-04-07 16:43:56,544 - app.services.chatbot - INFO - CUDA version: 12.1
2025-04-07 16:43:56,544 - app.services.chatbot - INFO - GPU available: True
2025-04-07 16:43:56,544 - app.services.chatbot - INFO - Total GPU memory: 4.00GB
2025-04-07 16:43:56,544 - app.services.chatbot - INFO - Current GPU memory allocated: 86.65MB
2025-04-07 16:44:00,415 - app.services.chatbot - INFO - Model loaded successfully with GPU acceleration
2025-04-07 16:44:01,477 - app.services.chatbot - INFO - Test inference completed in 1.0611 seconds with result: 
Answer: 4...
2025-04-07 16:44:01,477 - app.services.chatbot - INFO - GPU memory after model load: 86.65MB
2025-04-07 16:44:01,477 - app.services.chatbot - INFO - CUDA is being used: Yes
2025-04-07 16:44:01,477 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-07 16:44:01,477 - app.services.chatbot - INFO - Processing query: Xin chào
2025-04-07 16:44:01,644 - app.services.chatbot - INFO - Found 4 relevant documents in 0.1672 seconds
2025-04-07 16:44:13,146 - app.services.chatbot - INFO - Generated answer in 11.6692 seconds (retrieval: 0.1672s, inference: 11.5020s)
2025-04-07 16:44:28,504 - app.api.endpoints.chat - INFO - Received chat-direct request from user 3: 'Kết phiên giao dịch ngày 10-2, chỉ số VN-Index như thế nào'
2025-04-07 16:44:28,504 - app.services.chatbot - INFO - Processing query: Kết phiên giao dịch ngày 10-2, chỉ số VN-Index như thế nào
2025-04-07 16:44:28,519 - app.services.chatbot - INFO - Found 4 relevant documents in 0.0156 seconds
2025-04-07 16:44:42,903 - app.services.chatbot - INFO - Generated answer in 14.3995 seconds (retrieval: 0.0156s, inference: 14.3838s)
2025-04-07 16:44:42,903 - app.api.endpoints.chat - INFO - Generated response for user 3 in 14.39946174621582 seconds
2025-04-07 16:59:25,321 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 16:59:25,372 - app.services.chatbot - INFO - Cleaned GPU memory: allocated=0.00MB, reserved=0.00MB
2025-04-07 16:59:25,372 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-07 16:59:28,221 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 16:59:33,005 - app.services.chatbot - INFO - Loaded embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 16:59:33,186 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-07 16:59:33,186 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-07 16:59:33,186 - faiss.loader - INFO - Loading faiss.
2025-04-07 16:59:33,396 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-07 16:59:33,575 - app.services.chatbot - INFO - Loaded vector store from vector_db
2025-04-07 16:59:33,575 - app.services.chatbot - INFO - GPU config: layers=32, batch=512, ctx=4096, f16=True
2025-04-07 16:59:33,575 - app.services.chatbot - INFO - Loading GGUF model from models/mistral-7b-instruct-v0.1.Q2_K.gguf
2025-04-07 16:59:33,575 - app.services.chatbot - INFO - Attempting to load model with n_gpu_layers=32
2025-04-07 16:59:33,575 - app.services.chatbot - INFO - CUDA version: 12.1
2025-04-07 16:59:33,575 - app.services.chatbot - INFO - GPU available: True
2025-04-07 16:59:33,575 - app.services.chatbot - INFO - Total GPU memory: 4.00GB
2025-04-07 16:59:33,575 - app.services.chatbot - INFO - Current GPU memory allocated: 86.65MB
2025-04-07 16:59:37,396 - app.services.chatbot - INFO - Model loaded successfully with GPU acceleration
2025-04-07 16:59:38,402 - app.services.chatbot - INFO - Test inference completed in 1.0058 seconds with result: 
Answer: 4...
2025-04-07 16:59:38,402 - app.services.chatbot - INFO - GPU memory after model load: 86.65MB
2025-04-07 16:59:38,402 - app.services.chatbot - INFO - CUDA is being used: Yes
2025-04-07 16:59:38,402 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-07 16:59:38,402 - app.services.chatbot - INFO - Processing query: Xin chào
2025-04-07 16:59:38,553 - langchain_core.vectorstores.base - WARNING - No relevant docs were retrieved using the relevance score threshold 0.5
2025-04-07 16:59:38,553 - app.services.chatbot - INFO - Found 0 relevant documents in 0.1506 seconds
2025-04-07 16:59:38,553 - app.services.chatbot - WARNING - No relevant documents found
2025-04-07 17:00:09,536 - app.api.endpoints.chat - INFO - Received chat-direct request from user 3: 'Kết phiên giao dịch ngày 10-2, chỉ số VN-Index'
2025-04-07 17:00:09,536 - app.services.chatbot - INFO - Processing query: Kết phiên giao dịch ngày 10-2, chỉ số VN-Index
2025-04-07 17:00:09,551 - app.services.chatbot - INFO - Found 3 relevant documents in 0.0156 seconds
2025-04-07 17:00:22,126 - app.services.chatbot - INFO - Generated answer in 12.5904 seconds (retrieval: 0.0156s, inference: 12.5748s)
2025-04-07 17:00:22,126 - app.api.endpoints.chat - INFO - Generated response for user 3 in 12.590422630310059 seconds
2025-04-07 18:59:07,724 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 18:59:07,778 - app.services.chatbot - INFO - Cleaned GPU memory: allocated=0.00MB, reserved=0.00MB
2025-04-07 18:59:07,778 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-07 18:59:09,669 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 18:59:09,857 - app.services.chatbot - ERROR - Error initializing ChatbotService components: Failed to import transformers.models.bert.modeling_bert because of the following error (look up to see its traceback):
cannot import name 'split_torch_state_dict_into_shards' from 'huggingface_hub' (D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\huggingface_hub\__init__.py)
2025-04-07 18:59:09,873 - app.services.chatbot - ERROR - Traceback (most recent call last):
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\transformers\utils\import_utils.py", line 1086, in _get_module
    return importlib.import_module("." + module_name, self.__name__)
  File "C:\Users\huynh\AppData\Local\Programs\Python\Python310\lib\importlib\__init__.py", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 1050, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1027, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1006, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 688, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 883, in exec_module
  File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\transformers\models\bert\modeling_bert.py", line 42, in <module>
    from ...modeling_utils import PreTrainedModel
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\transformers\modeling_utils.py", line 85, in <module>
    from accelerate import __version__ as accelerate_version
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\accelerate\__init__.py", line 16, in <module>
    from .accelerator import Accelerator
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\accelerate\accelerator.py", line 34, in <module>
    from huggingface_hub import split_torch_state_dict_into_shards
ImportError: cannot import name 'split_torch_state_dict_into_shards' from 'huggingface_hub' (D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\huggingface_hub\__init__.py)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 60, in _initialize_components
    self._embeddings = HuggingFaceEmbeddings(
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\langchain_community\embeddings\huggingface.py", line 65, in __init__
    self.client = sentence_transformers.SentenceTransformer(
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\sentence_transformers\SentenceTransformer.py", line 95, in __init__
    modules = self._load_sbert_model(model_path)
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\sentence_transformers\SentenceTransformer.py", line 840, in _load_sbert_model
    module = module_class.load(os.path.join(model_path, module_config['path']))
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\sentence_transformers\models\Transformer.py", line 137, in load
    return Transformer(model_name_or_path=input_path, **config)
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\sentence_transformers\models\Transformer.py", line 29, in __init__
    self._load_model(model_name_or_path, config, cache_dir)
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\sentence_transformers\models\Transformer.py", line 49, in _load_model
    self.auto_model = AutoModel.from_pretrained(model_name_or_path, config=config, cache_dir=cache_dir)
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\transformers\models\auto\auto_factory.py", line 483, in from_pretrained
    model_class = _get_model_class(config, cls._model_mapping)
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\transformers\models\auto\auto_factory.py", line 375, in _get_model_class
    supported_models = model_mapping[type(config)]
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\transformers\models\auto\auto_factory.py", line 657, in __getitem__
    return self._load_attr_from_module(model_type, model_name)
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\transformers\models\auto\auto_factory.py", line 671, in _load_attr_from_module
    return getattribute_from_module(self._modules[module_name], attr)
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\transformers\models\auto\auto_factory.py", line 616, in getattribute_from_module
    if hasattr(module, attr):
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\transformers\utils\import_utils.py", line 1076, in __getattr__
    module = self._get_module(self._class_to_module[name])
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\transformers\utils\import_utils.py", line 1088, in _get_module
    raise RuntimeError(
RuntimeError: Failed to import transformers.models.bert.modeling_bert because of the following error (look up to see its traceback):
cannot import name 'split_torch_state_dict_into_shards' from 'huggingface_hub' (D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\huggingface_hub\__init__.py)

2025-04-07 19:01:54,678 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-07 19:01:54,742 - app.services.chatbot - INFO - Cleaned GPU memory: allocated=0.00MB, reserved=0.00MB
2025-04-07 19:01:54,743 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-07 19:01:56,554 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-07 19:01:56,730 - app.services.chatbot - ERROR - Error initializing ChatbotService components: Failed to import transformers.models.bert.modeling_bert because of the following error (look up to see its traceback):
cannot import name 'split_torch_state_dict_into_shards' from 'huggingface_hub' (D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\huggingface_hub\__init__.py)
2025-04-07 19:01:56,734 - app.services.chatbot - ERROR - Traceback (most recent call last):
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\transformers\utils\import_utils.py", line 1086, in _get_module
    return importlib.import_module("." + module_name, self.__name__)
  File "C:\Users\huynh\AppData\Local\Programs\Python\Python310\lib\importlib\__init__.py", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 1050, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1027, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1006, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 688, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 883, in exec_module
  File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\transformers\models\bert\modeling_bert.py", line 42, in <module>
    from ...modeling_utils import PreTrainedModel
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\transformers\modeling_utils.py", line 85, in <module>
    from accelerate import __version__ as accelerate_version
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\accelerate\__init__.py", line 16, in <module>
    from .accelerator import Accelerator
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\accelerate\accelerator.py", line 34, in <module>
    from huggingface_hub import split_torch_state_dict_into_shards
ImportError: cannot import name 'split_torch_state_dict_into_shards' from 'huggingface_hub' (D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\huggingface_hub\__init__.py)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 60, in _initialize_components
    self._embeddings = HuggingFaceEmbeddings(
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\langchain_community\embeddings\huggingface.py", line 65, in __init__
    self.client = sentence_transformers.SentenceTransformer(
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\sentence_transformers\SentenceTransformer.py", line 95, in __init__
    modules = self._load_sbert_model(model_path)
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\sentence_transformers\SentenceTransformer.py", line 840, in _load_sbert_model
    module = module_class.load(os.path.join(model_path, module_config['path']))
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\sentence_transformers\models\Transformer.py", line 137, in load
    return Transformer(model_name_or_path=input_path, **config)
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\sentence_transformers\models\Transformer.py", line 29, in __init__
    self._load_model(model_name_or_path, config, cache_dir)
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\sentence_transformers\models\Transformer.py", line 49, in _load_model
    self.auto_model = AutoModel.from_pretrained(model_name_or_path, config=config, cache_dir=cache_dir)
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\transformers\models\auto\auto_factory.py", line 483, in from_pretrained
    model_class = _get_model_class(config, cls._model_mapping)
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\transformers\models\auto\auto_factory.py", line 375, in _get_model_class
    supported_models = model_mapping[type(config)]
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\transformers\models\auto\auto_factory.py", line 657, in __getitem__
    return self._load_attr_from_module(model_type, model_name)
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\transformers\models\auto\auto_factory.py", line 671, in _load_attr_from_module
    return getattribute_from_module(self._modules[module_name], attr)
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\transformers\models\auto\auto_factory.py", line 616, in getattribute_from_module
    if hasattr(module, attr):
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\transformers\utils\import_utils.py", line 1076, in __getattr__
    module = self._get_module(self._class_to_module[name])
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\transformers\utils\import_utils.py", line 1088, in _get_module
    raise RuntimeError(
RuntimeError: Failed to import transformers.models.bert.modeling_bert because of the following error (look up to see its traceback):
cannot import name 'split_torch_state_dict_into_shards' from 'huggingface_hub' (D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\huggingface_hub\__init__.py)

2025-04-08 12:00:53,522 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 12:00:53,587 - app.services.chatbot - INFO - Cleaned GPU memory: allocated=0.00MB, reserved=0.00MB
2025-04-08 12:00:53,588 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-08 12:00:53,588 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 12:01:01,445 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 12:01:04,863 - app.services.chatbot - INFO - Loading vector store from vector_db
2025-04-08 12:01:04,863 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-08 12:01:04,863 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-08 12:01:04,863 - faiss.loader - INFO - Loading faiss.
2025-04-08 12:01:05,115 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-08 12:01:05,141 - app.services.chatbot - ERROR - Error loading embeddings/vectorstore: '__fields_set__'
2025-04-08 12:01:05,141 - app.services.chatbot - WARNING - Continuing without embeddings/vectorstore
2025-04-08 12:01:05,155 - app.services.chatbot - INFO - GPU config: layers=32, batch=512, ctx=4096, f16=True
2025-04-08 12:01:05,156 - app.services.chatbot - INFO - Loading GGUF model from models/mistral-7b-instruct-v0.1.Q2_K.gguf
2025-04-08 12:01:05,156 - app.services.chatbot - INFO - Initializing LlamaCpp with n_gpu_layers=32
2025-04-08 12:01:05,157 - app.services.chatbot - INFO - GPU memory before loading model: 0.00 MB
2025-04-08 12:01:05,157 - app.services.chatbot - INFO - FORCE_GPU=true: Using maximum GPU layers and optimized parameters
2025-04-08 12:01:08,717 - app.services.chatbot - INFO - GPU memory after loading model: 0.00 MB
2025-04-08 12:01:08,718 - app.services.chatbot - INFO - GPU memory used by model: 0.00 MB
2025-04-08 12:01:08,718 - app.services.chatbot - WARNING - ⚠️ Model may not be fully loaded to GPU (low memory usage)
2025-04-08 12:01:12,659 - app.services.chatbot - INFO - Test inference took 3.9403 seconds with result: 
Answer: 4...
2025-04-08 12:01:12,659 - app.services.chatbot - WARNING - ⚠️ Slow inference time (3.94s) suggests GPU may not be utilized properly
2025-04-08 12:01:12,659 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 12:01:12,659 - app.services.chatbot - INFO - Processing query: Xin chào
2025-04-08 12:01:12,659 - app.services.chatbot - INFO - Retriever not available, skipping document retrieval
2025-04-08 12:01:12,659 - app.services.chatbot - INFO - Generating prompt...
2025-04-08 12:01:12,659 - app.services.chatbot - ERROR - Error getting answer: 'ChatbotService' object has no attribute '_prompt'
2025-04-08 12:01:12,659 - app.services.chatbot - ERROR - Traceback (most recent call last):
  File "D:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 254, in get_answer
    prompt = self._prompt.format(context=context, question=query)
AttributeError: 'ChatbotService' object has no attribute '_prompt'

2025-04-08 12:01:12,995 - app.services.chatbot - INFO - Cleaned GPU memory: allocated=0.00MB, reserved=0.00MB
2025-04-08 12:01:12,995 - app.services.chatbot - INFO - Retrying with reinitialized components...
2025-04-08 12:01:12,995 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 12:01:13,089 - app.services.chatbot - INFO - Cleaned GPU memory: allocated=0.00MB, reserved=0.00MB
2025-04-08 12:01:13,089 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-08 12:01:13,089 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 12:01:13,089 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 12:01:13,172 - app.services.chatbot - INFO - Loading vector store from vector_db
2025-04-08 12:01:13,196 - app.services.chatbot - ERROR - Error loading embeddings/vectorstore: '__fields_set__'
2025-04-08 12:01:13,196 - app.services.chatbot - WARNING - Continuing without embeddings/vectorstore
2025-04-08 12:01:13,206 - app.services.chatbot - INFO - GPU config: layers=32, batch=512, ctx=4096, f16=True
2025-04-08 12:01:13,206 - app.services.chatbot - INFO - Loading GGUF model from models/mistral-7b-instruct-v0.1.Q2_K.gguf
2025-04-08 12:01:13,206 - app.services.chatbot - INFO - Initializing LlamaCpp with n_gpu_layers=32
2025-04-08 12:01:13,215 - app.services.chatbot - INFO - GPU memory before loading model: 0.00 MB
2025-04-08 12:01:13,215 - app.services.chatbot - INFO - FORCE_GPU=true: Using maximum GPU layers and optimized parameters
2025-04-08 12:01:14,739 - app.services.chatbot - INFO - GPU memory after loading model: 0.00 MB
2025-04-08 12:01:14,739 - app.services.chatbot - INFO - GPU memory used by model: 0.00 MB
2025-04-08 12:01:14,739 - app.services.chatbot - WARNING - ⚠️ Model may not be fully loaded to GPU (low memory usage)
2025-04-08 12:01:18,702 - app.services.chatbot - INFO - Test inference took 3.9632 seconds with result: 
Answer: 4...
2025-04-08 12:01:18,702 - app.services.chatbot - WARNING - ⚠️ Slow inference time (3.96s) suggests GPU may not be utilized properly
2025-04-08 12:01:18,702 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 12:01:18,702 - app.services.chatbot - INFO - Processing query: Xin chào
2025-04-08 12:01:18,702 - app.services.chatbot - INFO - Retriever not available, skipping document retrieval
2025-04-08 12:01:18,702 - app.services.chatbot - INFO - Generating prompt...
2025-04-08 12:01:18,718 - app.services.chatbot - ERROR - Error getting answer: 'ChatbotService' object has no attribute '_prompt'
2025-04-08 12:01:18,718 - app.services.chatbot - ERROR - Traceback (most recent call last):
  File "D:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 254, in get_answer
    prompt = self._prompt.format(context=context, question=query)
AttributeError: 'ChatbotService' object has no attribute '_prompt'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 254, in get_answer
    prompt = self._prompt.format(context=context, question=query)
AttributeError: 'ChatbotService' object has no attribute '_prompt'

2025-04-08 12:01:19,029 - app.services.chatbot - INFO - Cleaned GPU memory: allocated=0.00MB, reserved=0.00MB
2025-04-08 12:01:19,029 - app.services.chatbot - INFO - Retrying with reinitialized components...
2025-04-08 12:01:19,029 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 12:01:19,139 - app.services.chatbot - INFO - Cleaned GPU memory: allocated=0.00MB, reserved=0.00MB
2025-04-08 12:01:19,139 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-08 12:01:19,139 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 12:01:19,139 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 12:01:19,238 - app.services.chatbot - INFO - Loading vector store from vector_db
2025-04-08 12:01:19,238 - app.services.chatbot - ERROR - Error loading embeddings/vectorstore: '__fields_set__'
2025-04-08 12:01:19,238 - app.services.chatbot - WARNING - Continuing without embeddings/vectorstore
2025-04-08 12:01:19,257 - app.services.chatbot - INFO - GPU config: layers=32, batch=512, ctx=4096, f16=True
2025-04-08 12:01:19,258 - app.services.chatbot - INFO - Loading GGUF model from models/mistral-7b-instruct-v0.1.Q2_K.gguf
2025-04-08 12:01:19,258 - app.services.chatbot - INFO - Initializing LlamaCpp with n_gpu_layers=32
2025-04-08 12:01:19,258 - app.services.chatbot - INFO - GPU memory before loading model: 0.00 MB
2025-04-08 12:01:19,259 - app.services.chatbot - INFO - FORCE_GPU=true: Using maximum GPU layers and optimized parameters
2025-04-08 12:01:20,690 - app.services.chatbot - INFO - GPU memory after loading model: 0.00 MB
2025-04-08 12:01:20,690 - app.services.chatbot - INFO - GPU memory used by model: 0.00 MB
2025-04-08 12:01:20,690 - app.services.chatbot - WARNING - ⚠️ Model may not be fully loaded to GPU (low memory usage)
2025-04-08 12:01:24,682 - app.services.chatbot - INFO - Test inference took 3.9905 seconds with result: 
Answer: 4...
2025-04-08 12:01:24,682 - app.services.chatbot - WARNING - ⚠️ Slow inference time (3.99s) suggests GPU may not be utilized properly
2025-04-08 12:01:24,682 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 12:01:24,682 - app.services.chatbot - INFO - Processing query: Xin chào
2025-04-08 12:01:24,682 - app.services.chatbot - INFO - Retriever not available, skipping document retrieval
2025-04-08 12:01:24,682 - app.services.chatbot - INFO - Generating prompt...
2025-04-08 12:01:24,682 - app.services.chatbot - ERROR - Error getting answer: 'ChatbotService' object has no attribute '_prompt'
2025-04-08 12:01:24,682 - app.services.chatbot - ERROR - Traceback (most recent call last):
  File "D:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 254, in get_answer
    prompt = self._prompt.format(context=context, question=query)
AttributeError: 'ChatbotService' object has no attribute '_prompt'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 254, in get_answer
    prompt = self._prompt.format(context=context, question=query)
AttributeError: 'ChatbotService' object has no attribute '_prompt'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 254, in get_answer
    prompt = self._prompt.format(context=context, question=query)
AttributeError: 'ChatbotService' object has no attribute '_prompt'

2025-04-08 12:01:24,995 - app.services.chatbot - INFO - Cleaned GPU memory: allocated=0.00MB, reserved=0.00MB
2025-04-08 12:01:24,995 - app.services.chatbot - INFO - Retrying with reinitialized components...
2025-04-08 12:01:24,995 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 12:01:25,089 - app.services.chatbot - INFO - Cleaned GPU memory: allocated=0.00MB, reserved=0.00MB
2025-04-08 12:01:25,089 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-08 12:01:25,089 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 12:01:25,089 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 12:01:25,187 - app.services.chatbot - INFO - Loading vector store from vector_db
2025-04-08 12:01:25,198 - app.services.chatbot - ERROR - Error loading embeddings/vectorstore: '__fields_set__'
2025-04-08 12:01:25,198 - app.services.chatbot - WARNING - Continuing without embeddings/vectorstore
2025-04-08 12:01:25,202 - app.services.chatbot - INFO - GPU config: layers=32, batch=512, ctx=4096, f16=True
2025-04-08 12:01:25,203 - app.services.chatbot - INFO - Loading GGUF model from models/mistral-7b-instruct-v0.1.Q2_K.gguf
2025-04-08 12:01:25,203 - app.services.chatbot - INFO - Initializing LlamaCpp with n_gpu_layers=32
2025-04-08 12:01:25,204 - app.services.chatbot - INFO - GPU memory before loading model: 0.00 MB
2025-04-08 12:01:25,204 - app.services.chatbot - INFO - FORCE_GPU=true: Using maximum GPU layers and optimized parameters
2025-04-08 12:01:26,586 - app.services.chatbot - INFO - GPU memory after loading model: 0.00 MB
2025-04-08 12:01:26,586 - app.services.chatbot - INFO - GPU memory used by model: 0.00 MB
2025-04-08 12:01:26,587 - app.services.chatbot - WARNING - ⚠️ Model may not be fully loaded to GPU (low memory usage)
2025-04-08 12:01:30,770 - app.services.chatbot - INFO - Test inference took 4.1833 seconds with result: 
Answer: 4...
2025-04-08 12:01:30,770 - app.services.chatbot - WARNING - ⚠️ Slow inference time (4.18s) suggests GPU may not be utilized properly
2025-04-08 12:01:30,770 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 12:01:30,770 - app.services.chatbot - INFO - Processing query: Xin chào
2025-04-08 12:01:30,770 - app.services.chatbot - INFO - Retriever not available, skipping document retrieval
2025-04-08 12:01:30,770 - app.services.chatbot - INFO - Generating prompt...
2025-04-08 12:01:30,770 - app.services.chatbot - ERROR - Error getting answer: 'ChatbotService' object has no attribute '_prompt'
2025-04-08 12:01:30,770 - app.services.chatbot - ERROR - Traceback (most recent call last):
  File "D:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 254, in get_answer
    prompt = self._prompt.format(context=context, question=query)
AttributeError: 'ChatbotService' object has no attribute '_prompt'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 254, in get_answer
    prompt = self._prompt.format(context=context, question=query)
AttributeError: 'ChatbotService' object has no attribute '_prompt'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 254, in get_answer
    prompt = self._prompt.format(context=context, question=query)
AttributeError: 'ChatbotService' object has no attribute '_prompt'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 254, in get_answer
    prompt = self._prompt.format(context=context, question=query)
AttributeError: 'ChatbotService' object has no attribute '_prompt'

2025-04-08 12:03:22,741 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 12:03:22,794 - app.services.chatbot - INFO - Cleaned GPU memory: allocated=0.00MB, reserved=0.00MB
2025-04-08 12:03:22,794 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-08 12:03:22,794 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 12:03:24,679 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 12:03:26,357 - app.services.chatbot - INFO - Loading vector store from vector_db
2025-04-08 12:03:26,357 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-08 12:03:26,357 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-08 12:03:26,357 - faiss.loader - INFO - Loading faiss.
2025-04-08 12:03:26,379 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-08 12:03:26,394 - app.services.chatbot - ERROR - Error loading embeddings/vectorstore: '__fields_set__'
2025-04-08 12:03:26,394 - app.services.chatbot - WARNING - Continuing without embeddings/vectorstore
2025-04-08 12:03:26,404 - app.services.chatbot - INFO - GPU config: layers=32, batch=512, ctx=4096, f16=True
2025-04-08 12:03:26,405 - app.services.chatbot - INFO - Loading GGUF model from models/mistral-7b-instruct-v0.1.Q2_K.gguf
2025-04-08 12:03:26,405 - app.services.chatbot - INFO - Initializing LlamaCpp with n_gpu_layers=32
2025-04-08 12:03:26,406 - app.services.chatbot - INFO - GPU memory before loading model: 0.00 MB
2025-04-08 12:03:26,406 - app.services.chatbot - INFO - FORCE_GPU=true: Using maximum GPU layers and optimized parameters
2025-04-08 12:03:27,726 - app.services.chatbot - INFO - GPU memory after loading model: 0.00 MB
2025-04-08 12:03:27,727 - app.services.chatbot - INFO - GPU memory used by model: 0.00 MB
2025-04-08 12:03:27,727 - app.services.chatbot - WARNING - ⚠️ Model may not be fully loaded to GPU (low memory usage)
2025-04-08 12:03:31,816 - app.services.chatbot - INFO - Test inference took 4.0896 seconds with result: 
Answer: 4...
2025-04-08 12:03:31,817 - app.services.chatbot - WARNING - ⚠️ Slow inference time (4.09s) suggests GPU may not be utilized properly
2025-04-08 12:03:31,817 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 12:03:31,817 - app.services.chatbot - INFO - Processing query: Xin chào
2025-04-08 12:03:31,818 - app.services.chatbot - INFO - Retriever not available, skipping document retrieval
2025-04-08 12:03:31,818 - app.services.chatbot - INFO - Generating prompt...
2025-04-08 12:03:31,818 - app.services.chatbot - ERROR - Error getting answer: 'ChatbotService' object has no attribute '_prompt'
2025-04-08 12:03:31,818 - app.services.chatbot - ERROR - Traceback (most recent call last):
  File "d:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 254, in get_answer
    prompt = self._prompt.format(context=context, question=query)
AttributeError: 'ChatbotService' object has no attribute '_prompt'

2025-04-08 12:03:32,113 - app.services.chatbot - INFO - Cleaned GPU memory: allocated=0.00MB, reserved=0.00MB
2025-04-08 12:03:32,113 - app.services.chatbot - INFO - Retrying with reinitialized components...
2025-04-08 12:03:32,114 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 12:03:32,218 - app.services.chatbot - INFO - Cleaned GPU memory: allocated=0.00MB, reserved=0.00MB
2025-04-08 12:03:32,219 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-08 12:03:32,219 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 12:03:32,219 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 12:03:32,351 - app.services.chatbot - INFO - Loading vector store from vector_db
2025-04-08 12:03:32,363 - app.services.chatbot - ERROR - Error loading embeddings/vectorstore: '__fields_set__'
2025-04-08 12:03:32,364 - app.services.chatbot - WARNING - Continuing without embeddings/vectorstore
2025-04-08 12:03:32,369 - app.services.chatbot - INFO - GPU config: layers=32, batch=512, ctx=4096, f16=True
2025-04-08 12:03:32,370 - app.services.chatbot - INFO - Loading GGUF model from models/mistral-7b-instruct-v0.1.Q2_K.gguf
2025-04-08 12:03:32,370 - app.services.chatbot - INFO - Initializing LlamaCpp with n_gpu_layers=32
2025-04-08 12:03:32,370 - app.services.chatbot - INFO - GPU memory before loading model: 0.00 MB
2025-04-08 12:03:32,371 - app.services.chatbot - INFO - FORCE_GPU=true: Using maximum GPU layers and optimized parameters
2025-04-08 12:03:33,679 - app.services.chatbot - INFO - GPU memory after loading model: 0.00 MB
2025-04-08 12:03:33,679 - app.services.chatbot - INFO - GPU memory used by model: 0.00 MB
2025-04-08 12:03:33,680 - app.services.chatbot - WARNING - ⚠️ Model may not be fully loaded to GPU (low memory usage)
2025-04-08 12:03:37,686 - app.services.chatbot - INFO - Test inference took 4.0063 seconds with result: 
Answer: 4...
2025-04-08 12:03:37,686 - app.services.chatbot - WARNING - ⚠️ Slow inference time (4.01s) suggests GPU may not be utilized properly
2025-04-08 12:03:37,686 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 12:03:37,686 - app.services.chatbot - INFO - Processing query: Xin chào
2025-04-08 12:03:37,686 - app.services.chatbot - INFO - Retriever not available, skipping document retrieval
2025-04-08 12:03:37,686 - app.services.chatbot - INFO - Generating prompt...
2025-04-08 12:03:37,686 - app.services.chatbot - ERROR - Error getting answer: 'ChatbotService' object has no attribute '_prompt'
2025-04-08 12:03:37,686 - app.services.chatbot - ERROR - Traceback (most recent call last):
  File "d:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 254, in get_answer
    prompt = self._prompt.format(context=context, question=query)
AttributeError: 'ChatbotService' object has no attribute '_prompt'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "d:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 254, in get_answer
    prompt = self._prompt.format(context=context, question=query)
AttributeError: 'ChatbotService' object has no attribute '_prompt'

2025-04-08 12:03:37,946 - app.services.chatbot - INFO - Cleaned GPU memory: allocated=0.00MB, reserved=0.00MB
2025-04-08 12:03:37,946 - app.services.chatbot - INFO - Retrying with reinitialized components...
2025-04-08 12:03:37,946 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 12:03:38,057 - app.services.chatbot - INFO - Cleaned GPU memory: allocated=0.00MB, reserved=0.00MB
2025-04-08 12:03:38,057 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-08 12:03:38,058 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 12:03:38,058 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 12:03:38,188 - app.services.chatbot - INFO - Loading vector store from vector_db
2025-04-08 12:03:38,206 - app.services.chatbot - ERROR - Error loading embeddings/vectorstore: '__fields_set__'
2025-04-08 12:03:38,206 - app.services.chatbot - WARNING - Continuing without embeddings/vectorstore
2025-04-08 12:03:38,212 - app.services.chatbot - INFO - GPU config: layers=32, batch=512, ctx=4096, f16=True
2025-04-08 12:03:38,212 - app.services.chatbot - INFO - Loading GGUF model from models/mistral-7b-instruct-v0.1.Q2_K.gguf
2025-04-08 12:03:38,213 - app.services.chatbot - INFO - Initializing LlamaCpp with n_gpu_layers=32
2025-04-08 12:03:38,213 - app.services.chatbot - INFO - GPU memory before loading model: 0.00 MB
2025-04-08 12:03:38,214 - app.services.chatbot - INFO - FORCE_GPU=true: Using maximum GPU layers and optimized parameters
2025-04-08 12:03:39,513 - app.services.chatbot - INFO - GPU memory after loading model: 0.00 MB
2025-04-08 12:03:39,514 - app.services.chatbot - INFO - GPU memory used by model: 0.00 MB
2025-04-08 12:03:39,514 - app.services.chatbot - WARNING - ⚠️ Model may not be fully loaded to GPU (low memory usage)
2025-04-08 12:03:43,543 - app.services.chatbot - INFO - Test inference took 4.0280 seconds with result: 
Answer: 4...
2025-04-08 12:03:43,543 - app.services.chatbot - WARNING - ⚠️ Slow inference time (4.03s) suggests GPU may not be utilized properly
2025-04-08 12:03:43,543 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 12:03:43,543 - app.services.chatbot - INFO - Processing query: Xin chào
2025-04-08 12:03:43,543 - app.services.chatbot - INFO - Retriever not available, skipping document retrieval
2025-04-08 12:03:43,543 - app.services.chatbot - INFO - Generating prompt...
2025-04-08 12:03:43,543 - app.services.chatbot - ERROR - Error getting answer: 'ChatbotService' object has no attribute '_prompt'
2025-04-08 12:03:43,543 - app.services.chatbot - ERROR - Traceback (most recent call last):
  File "d:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 254, in get_answer
    prompt = self._prompt.format(context=context, question=query)
AttributeError: 'ChatbotService' object has no attribute '_prompt'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "d:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 254, in get_answer
    prompt = self._prompt.format(context=context, question=query)
AttributeError: 'ChatbotService' object has no attribute '_prompt'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "d:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 254, in get_answer
    prompt = self._prompt.format(context=context, question=query)
AttributeError: 'ChatbotService' object has no attribute '_prompt'

2025-04-08 12:03:43,816 - app.services.chatbot - INFO - Cleaned GPU memory: allocated=0.00MB, reserved=0.00MB
2025-04-08 12:03:43,816 - app.services.chatbot - INFO - Retrying with reinitialized components...
2025-04-08 12:03:43,816 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 12:03:44,034 - app.services.chatbot - INFO - Cleaned GPU memory: allocated=0.00MB, reserved=0.00MB
2025-04-08 12:03:44,034 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-08 12:03:44,034 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 12:03:44,034 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 12:03:44,138 - app.services.chatbot - INFO - Loading vector store from vector_db
2025-04-08 12:03:44,138 - app.services.chatbot - ERROR - Error loading embeddings/vectorstore: '__fields_set__'
2025-04-08 12:03:44,138 - app.services.chatbot - WARNING - Continuing without embeddings/vectorstore
2025-04-08 12:03:44,162 - app.services.chatbot - INFO - GPU config: layers=32, batch=512, ctx=4096, f16=True
2025-04-08 12:03:44,162 - app.services.chatbot - INFO - Loading GGUF model from models/mistral-7b-instruct-v0.1.Q2_K.gguf
2025-04-08 12:03:44,163 - app.services.chatbot - INFO - Initializing LlamaCpp with n_gpu_layers=32
2025-04-08 12:03:44,163 - app.services.chatbot - INFO - GPU memory before loading model: 0.00 MB
2025-04-08 12:03:44,163 - app.services.chatbot - INFO - FORCE_GPU=true: Using maximum GPU layers and optimized parameters
2025-04-08 12:03:45,474 - app.services.chatbot - INFO - GPU memory after loading model: 0.00 MB
2025-04-08 12:03:45,474 - app.services.chatbot - INFO - GPU memory used by model: 0.00 MB
2025-04-08 12:03:45,474 - app.services.chatbot - WARNING - ⚠️ Model may not be fully loaded to GPU (low memory usage)
2025-04-08 12:03:49,533 - app.services.chatbot - INFO - Test inference took 4.0596 seconds with result: 
Answer: 4...
2025-04-08 12:03:49,533 - app.services.chatbot - WARNING - ⚠️ Slow inference time (4.06s) suggests GPU may not be utilized properly
2025-04-08 12:03:49,533 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 12:03:49,533 - app.services.chatbot - INFO - Processing query: Xin chào
2025-04-08 12:03:49,533 - app.services.chatbot - INFO - Retriever not available, skipping document retrieval
2025-04-08 12:03:49,533 - app.services.chatbot - INFO - Generating prompt...
2025-04-08 12:03:49,533 - app.services.chatbot - ERROR - Error getting answer: 'ChatbotService' object has no attribute '_prompt'
2025-04-08 12:03:49,533 - app.services.chatbot - ERROR - Traceback (most recent call last):
  File "d:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 254, in get_answer
    prompt = self._prompt.format(context=context, question=query)
AttributeError: 'ChatbotService' object has no attribute '_prompt'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "d:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 254, in get_answer
    prompt = self._prompt.format(context=context, question=query)
AttributeError: 'ChatbotService' object has no attribute '_prompt'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "d:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 254, in get_answer
    prompt = self._prompt.format(context=context, question=query)
AttributeError: 'ChatbotService' object has no attribute '_prompt'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "d:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 254, in get_answer
    prompt = self._prompt.format(context=context, question=query)
AttributeError: 'ChatbotService' object has no attribute '_prompt'

2025-04-08 12:06:30,988 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 12:06:31,040 - app.services.chatbot - INFO - Cleaned GPU memory: allocated=0.00MB, reserved=0.00MB
2025-04-08 12:06:31,040 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-08 12:06:31,040 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 12:06:32,956 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 12:06:34,637 - app.services.chatbot - INFO - Loading vector store from vector_db
2025-04-08 12:06:34,641 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-08 12:06:34,642 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-08 12:06:34,642 - faiss.loader - INFO - Loading faiss.
2025-04-08 12:06:34,657 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-08 12:06:34,674 - app.services.chatbot - ERROR - Error loading embeddings/vectorstore: '__fields_set__'
2025-04-08 12:06:34,674 - app.services.chatbot - WARNING - Continuing without embeddings/vectorstore
2025-04-08 12:06:34,676 - app.services.chatbot - INFO - GPU config: layers=32, batch=512, ctx=4096, f16=True
2025-04-08 12:06:34,677 - app.services.chatbot - INFO - Loading GGUF model from models/mistral-7b-instruct-v0.1.Q2_K.gguf
2025-04-08 12:06:34,677 - app.services.chatbot - INFO - Initializing LlamaCpp with n_gpu_layers=32
2025-04-08 12:06:34,678 - app.services.chatbot - INFO - GPU memory before loading model: 0.00 MB
2025-04-08 12:06:34,678 - app.services.chatbot - INFO - FORCE_GPU=true: Using maximum GPU layers and optimized parameters
2025-04-08 12:06:36,005 - app.services.chatbot - INFO - GPU memory after loading model: 0.00 MB
2025-04-08 12:06:36,006 - app.services.chatbot - INFO - GPU memory used by model: 0.00 MB
2025-04-08 12:06:36,006 - app.services.chatbot - WARNING - ⚠️ Model may not be fully loaded to GPU (low memory usage)
2025-04-08 12:06:39,550 - app.services.chatbot - INFO - Test inference took 3.5427 seconds with result: 
Answer: 4...
2025-04-08 12:06:39,550 - app.services.chatbot - INFO - Fast inference time confirms GPU acceleration!
2025-04-08 12:06:39,550 - app.services.chatbot - INFO - Created prompt template
2025-04-08 12:06:39,550 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 12:06:39,550 - app.services.chatbot - INFO - Processing query: Xin chào
2025-04-08 12:06:39,550 - app.services.chatbot - INFO - Retriever not available, skipping document retrieval
2025-04-08 12:06:39,550 - app.services.chatbot - INFO - Generating prompt...
2025-04-08 12:06:39,550 - app.services.chatbot - INFO - Calling LLM for answer...
2025-04-08 12:06:59,249 - app.services.chatbot - INFO - LLM processing time: 19.70s
2025-04-08 12:06:59,249 - app.services.chatbot - INFO - Total processing time: 19.70s
2025-04-08 12:07:05,011 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 12:07:05,071 - app.services.chatbot - INFO - Cleaned GPU memory: allocated=0.00MB, reserved=0.00MB
2025-04-08 12:07:05,071 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-08 12:07:05,071 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 12:07:07,109 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 12:07:08,888 - app.services.chatbot - INFO - Loading vector store from vector_db
2025-04-08 12:07:08,892 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-08 12:07:08,892 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-08 12:07:08,892 - faiss.loader - INFO - Loading faiss.
2025-04-08 12:07:08,909 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-08 12:07:08,922 - app.services.chatbot - ERROR - Error loading embeddings/vectorstore: '__fields_set__'
2025-04-08 12:07:08,922 - app.services.chatbot - WARNING - Continuing without embeddings/vectorstore
2025-04-08 12:07:08,924 - app.services.chatbot - INFO - GPU config: layers=32, batch=512, ctx=4096, f16=True
2025-04-08 12:07:08,924 - app.services.chatbot - INFO - Loading GGUF model from models/mistral-7b-instruct-v0.1.Q2_K.gguf
2025-04-08 12:07:08,925 - app.services.chatbot - INFO - Initializing LlamaCpp with n_gpu_layers=32
2025-04-08 12:07:08,925 - app.services.chatbot - INFO - GPU memory before loading model: 0.00 MB
2025-04-08 12:07:08,926 - app.services.chatbot - INFO - FORCE_GPU=true: Using maximum GPU layers and optimized parameters
2025-04-08 12:07:10,282 - app.services.chatbot - INFO - GPU memory after loading model: 0.00 MB
2025-04-08 12:07:10,282 - app.services.chatbot - INFO - GPU memory used by model: 0.00 MB
2025-04-08 12:07:10,283 - app.services.chatbot - WARNING - ⚠️ Model may not be fully loaded to GPU (low memory usage)
2025-04-08 12:07:14,013 - app.services.chatbot - INFO - Test inference took 3.7304 seconds with result: 
Answer: 4...
2025-04-08 12:07:14,013 - app.services.chatbot - INFO - Fast inference time confirms GPU acceleration!
2025-04-08 12:07:14,013 - app.services.chatbot - INFO - Created prompt template
2025-04-08 12:07:14,013 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 12:07:14,013 - app.services.chatbot - INFO - Processing query: Xin chào
2025-04-08 12:07:14,013 - app.services.chatbot - INFO - Retriever not available, skipping document retrieval
2025-04-08 12:07:14,013 - app.services.chatbot - INFO - Generating prompt...
2025-04-08 12:07:14,013 - app.services.chatbot - INFO - Calling LLM for answer...
2025-04-08 12:07:34,404 - app.services.chatbot - INFO - LLM processing time: 20.39s
2025-04-08 12:07:34,404 - app.services.chatbot - INFO - Total processing time: 20.39s
2025-04-08 12:08:10,367 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 12:08:10,421 - app.services.chatbot - INFO - Cleaned GPU memory: allocated=0.00MB, reserved=0.00MB
2025-04-08 12:08:10,421 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-08 12:08:10,421 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 12:08:12,248 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 12:08:13,985 - app.services.chatbot - INFO - Loading vector store from vector_db
2025-04-08 12:08:13,985 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-08 12:08:13,985 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-08 12:08:13,985 - faiss.loader - INFO - Loading faiss.
2025-04-08 12:08:14,015 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-08 12:08:14,029 - app.services.chatbot - ERROR - Error loading embeddings/vectorstore: '__fields_set__'
2025-04-08 12:08:14,030 - app.services.chatbot - WARNING - Continuing without embeddings/vectorstore
2025-04-08 12:08:14,032 - app.services.chatbot - INFO - GPU config: layers=32, batch=512, ctx=4096, f16=True
2025-04-08 12:08:14,032 - app.services.chatbot - INFO - Loading GGUF model from models/mistral-7b-instruct-v0.1.Q2_K.gguf
2025-04-08 12:08:14,032 - app.services.chatbot - INFO - Initializing LlamaCpp with n_gpu_layers=32
2025-04-08 12:08:14,033 - app.services.chatbot - INFO - GPU memory before loading model: 0.00 MB
2025-04-08 12:08:14,033 - app.services.chatbot - INFO - FORCE_GPU=true: Using maximum GPU layers and optimized parameters
2025-04-08 12:08:15,390 - app.services.chatbot - INFO - GPU memory after loading model: 0.00 MB
2025-04-08 12:08:15,390 - app.services.chatbot - INFO - GPU memory used by model: 0.00 MB
2025-04-08 12:08:15,390 - app.services.chatbot - WARNING - ⚠️ Model may not be fully loaded to GPU (low memory usage)
2025-04-08 12:08:19,309 - app.services.chatbot - INFO - Test inference took 3.9178 seconds with result: 
Answer: 4...
2025-04-08 12:08:19,309 - app.services.chatbot - INFO - Fast inference time confirms GPU acceleration!
2025-04-08 12:08:19,309 - app.services.chatbot - INFO - Created prompt template
2025-04-08 12:08:19,309 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 12:08:19,310 - app.services.chatbot - INFO - Processing query: Xin chào
2025-04-08 12:08:19,310 - app.services.chatbot - INFO - Retriever not available, skipping document retrieval
2025-04-08 12:08:19,310 - app.services.chatbot - INFO - Generating prompt...
2025-04-08 12:08:19,310 - app.services.chatbot - INFO - Calling LLM for answer...
2025-04-08 12:08:40,988 - app.services.chatbot - INFO - LLM processing time: 21.68s
2025-04-08 12:08:40,988 - app.services.chatbot - INFO - Total processing time: 21.68s
2025-04-08 12:12:30,045 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 12:12:30,094 - app.services.chatbot - INFO - Cleaned GPU memory: allocated=0.00MB, reserved=0.00MB
2025-04-08 12:12:30,094 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-08 12:12:30,103 - app.services.chatbot - INFO - Free GPU memory: 0.00MB reserved, 0.00MB allocated
2025-04-08 12:12:30,103 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 12:12:31,929 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 12:12:33,608 - app.services.chatbot - INFO - Loading vector store from vector_db
2025-04-08 12:12:33,608 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-08 12:12:33,623 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-08 12:12:33,623 - faiss.loader - INFO - Loading faiss.
2025-04-08 12:12:33,623 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-08 12:12:33,653 - app.services.chatbot - ERROR - Error loading embeddings/vectorstore: '__fields_set__'
2025-04-08 12:12:33,653 - app.services.chatbot - WARNING - Continuing without embeddings/vectorstore
2025-04-08 12:12:33,655 - app.services.chatbot - INFO - Detected VRAM: 4.00 GB
2025-04-08 12:12:33,655 - app.services.chatbot - INFO - FORCE_GPU enabled: Using maximum GPU layers
2025-04-08 12:12:33,655 - app.services.chatbot - INFO - Using n_gpu_layers=32
2025-04-08 12:12:33,656 - app.services.chatbot - INFO - Using optimized GPU parameters
2025-04-08 12:12:33,656 - app.services.chatbot - INFO - Creating LlamaCpp model with parameters: n_gpu_layers=32, n_batch=512, use_mmap=False
2025-04-08 12:12:34,971 - app.services.chatbot - INFO - After model loading: 0.00MB allocated, 0.00MB reserved
2025-04-08 12:12:34,971 - app.services.chatbot - WARNING - Warning: Model might not be using GPU (low VRAM usage)
2025-04-08 12:12:34,971 - app.services.chatbot - INFO - Testing model with a simple query...
2025-04-08 12:12:38,028 - app.services.chatbot - INFO - Test response completed in 3.04 seconds
2025-04-08 12:12:38,028 - app.services.chatbot - INFO - Test response: 
A: 4...
2025-04-08 12:12:38,028 - app.services.chatbot - INFO - Fast inference time (3.04s) - GPU acceleration confirmed
2025-04-08 12:12:38,028 - app.services.chatbot - INFO - Created prompt template
2025-04-08 12:12:38,028 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 12:12:38,028 - app.services.chatbot - INFO - Processing query: Xin chào
2025-04-08 12:12:38,028 - app.services.chatbot - INFO - Retriever not available, skipping document retrieval
2025-04-08 12:12:38,028 - app.services.chatbot - INFO - Generating prompt...
2025-04-08 12:12:38,028 - app.services.chatbot - INFO - Calling LLM for answer...
2025-04-08 12:12:59,606 - app.services.chatbot - INFO - LLM processing time: 21.58s
2025-04-08 12:12:59,606 - app.services.chatbot - INFO - Total processing time: 21.58s
2025-04-08 12:14:11,625 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 12:14:11,680 - app.services.chatbot - INFO - Cleaned GPU memory: allocated=0.00MB, reserved=0.00MB
2025-04-08 12:14:11,680 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-08 12:14:11,688 - app.services.chatbot - INFO - Free GPU memory: 0.00MB reserved, 0.00MB allocated
2025-04-08 12:14:11,688 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 12:14:13,546 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 12:14:15,343 - app.services.chatbot - INFO - Loading vector store from vector_db
2025-04-08 12:14:15,359 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-08 12:14:15,359 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-08 12:14:15,359 - faiss.loader - INFO - Loading faiss.
2025-04-08 12:14:15,359 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-08 12:14:15,388 - app.services.chatbot - ERROR - Error loading embeddings/vectorstore: '__fields_set__'
2025-04-08 12:14:15,388 - app.services.chatbot - WARNING - Continuing without embeddings/vectorstore
2025-04-08 12:14:15,390 - app.services.chatbot - INFO - Detected VRAM: 4.00 GB
2025-04-08 12:14:15,390 - app.services.chatbot - INFO - FORCE_GPU enabled: Using maximum GPU layers
2025-04-08 12:14:15,391 - app.services.chatbot - INFO - Using n_gpu_layers=32
2025-04-08 12:14:15,391 - app.services.chatbot - INFO - Using optimized GPU parameters
2025-04-08 12:14:15,391 - app.services.chatbot - INFO - Creating LlamaCpp model with parameters: n_gpu_layers=32, n_batch=512, use_mmap=False
2025-04-08 12:14:16,737 - app.services.chatbot - INFO - After model loading: 0.00MB allocated, 0.00MB reserved
2025-04-08 12:14:16,737 - app.services.chatbot - WARNING - Warning: Model might not be using GPU (low VRAM usage)
2025-04-08 12:14:16,738 - app.services.chatbot - INFO - Testing model with a simple query...
2025-04-08 12:14:20,175 - app.services.chatbot - INFO - Test response completed in 3.44 seconds
2025-04-08 12:14:20,175 - app.services.chatbot - INFO - Test response: 
A: 4...
2025-04-08 12:14:20,175 - app.services.chatbot - INFO - Fast inference time (3.44s) - GPU acceleration confirmed
2025-04-08 12:14:20,175 - app.services.chatbot - INFO - Created prompt template
2025-04-08 12:14:20,175 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 12:14:20,175 - app.services.chatbot - INFO - Processing query: Xin chào
2025-04-08 12:14:20,175 - app.services.chatbot - INFO - Retriever not available, skipping document retrieval
2025-04-08 12:14:20,175 - app.services.chatbot - INFO - Generating prompt...
2025-04-08 12:14:20,175 - app.services.chatbot - INFO - Calling LLM for answer...
2025-04-08 12:14:42,237 - app.services.chatbot - INFO - LLM processing time: 22.06s
2025-04-08 12:14:42,237 - app.services.chatbot - INFO - Total processing time: 22.06s
2025-04-08 12:20:11,600 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 12:20:11,654 - app.services.chatbot - INFO - Cleaned GPU memory: allocated=0.00MB, reserved=0.00MB
2025-04-08 12:20:11,654 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-08 12:20:11,654 - app.services.chatbot - INFO - Free GPU memory: 0.00MB reserved, 0.00MB allocated
2025-04-08 12:20:11,654 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 12:20:13,522 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 12:20:15,409 - app.services.chatbot - INFO - Loading vector store from vector_db
2025-04-08 12:20:15,412 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-08 12:20:15,412 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-08 12:20:15,413 - faiss.loader - INFO - Loading faiss.
2025-04-08 12:20:15,425 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-08 12:20:15,442 - app.services.chatbot - ERROR - Error loading embeddings/vectorstore: '__fields_set__'
2025-04-08 12:20:15,443 - app.services.chatbot - WARNING - Continuing without embeddings/vectorstore
2025-04-08 12:20:15,445 - app.services.chatbot - INFO - Detected VRAM: 4.00 GB
2025-04-08 12:20:15,445 - app.services.chatbot - INFO - FORCE_GPU enabled: Using maximum GPU layers
2025-04-08 12:20:15,445 - app.services.chatbot - INFO - Using n_gpu_layers=32
2025-04-08 12:20:15,445 - app.services.chatbot - INFO - Using optimized GPU parameters
2025-04-08 12:20:15,445 - app.services.chatbot - INFO - Creating LlamaCpp model with parameters: n_gpu_layers=32, n_batch=512, use_mmap=False
2025-04-08 12:20:16,801 - app.services.chatbot - INFO - After model loading: 0.00MB allocated, 0.00MB reserved
2025-04-08 12:20:16,801 - app.services.chatbot - WARNING - Warning: Model might not be using GPU (low VRAM usage)
2025-04-08 12:20:16,802 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 12:21:57,003 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 12:21:57,086 - app.services.chatbot - INFO - Cleaned GPU memory: allocated=0.00MB, reserved=0.00MB
2025-04-08 12:21:57,086 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-08 12:21:57,086 - app.services.chatbot - INFO - Free GPU memory: 0.00MB reserved, 0.00MB allocated
2025-04-08 12:21:57,086 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 12:21:59,070 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 12:22:00,886 - app.services.chatbot - INFO - Loading vector store from vector_db
2025-04-08 12:22:00,902 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-08 12:22:00,902 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-08 12:22:00,903 - faiss.loader - INFO - Loading faiss.
2025-04-08 12:22:00,920 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-08 12:22:00,936 - app.services.chatbot - ERROR - Error loading embeddings/vectorstore: '__fields_set__'
2025-04-08 12:22:00,936 - app.services.chatbot - WARNING - Continuing without embeddings/vectorstore
2025-04-08 12:22:00,936 - app.services.chatbot - INFO - Detected VRAM: 4.00 GB
2025-04-08 12:22:00,936 - app.services.chatbot - INFO - FORCE_GPU enabled: Using maximum GPU layers
2025-04-08 12:22:00,936 - app.services.chatbot - INFO - Using n_gpu_layers=32
2025-04-08 12:22:00,936 - app.services.chatbot - INFO - Using optimized GPU parameters
2025-04-08 12:22:00,936 - app.services.chatbot - INFO - Creating LlamaCpp model with parameters: n_gpu_layers=32, n_batch=512, use_mmap=False
2025-04-08 12:22:02,354 - app.services.chatbot - INFO - After model loading: 0.00MB allocated, 0.00MB reserved
2025-04-08 12:22:02,354 - app.services.chatbot - WARNING - Warning: Model might not be using GPU (low VRAM usage)
2025-04-08 12:22:02,354 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 19:53:25,897 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 19:53:25,955 - app.services.chatbot - INFO - Cleaned GPU memory: allocated=0.00MB, reserved=0.00MB
2025-04-08 19:53:25,955 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-08 19:53:25,955 - app.services.chatbot - INFO - Free GPU memory: 0.00MB reserved, 0.00MB allocated
2025-04-08 19:53:25,955 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 19:53:34,266 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 19:53:36,737 - app.services.chatbot - INFO - Loading vector store from vector_db
2025-04-08 19:53:36,737 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-08 19:53:36,737 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-08 19:53:36,737 - faiss.loader - INFO - Loading faiss.
2025-04-08 19:53:37,003 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-08 19:53:37,026 - app.services.chatbot - ERROR - Error loading embeddings/vectorstore: '__fields_set__'
2025-04-08 19:53:37,033 - app.services.chatbot - WARNING - Continuing without embeddings/vectorstore
2025-04-08 19:53:37,034 - app.services.chatbot - INFO - Detected VRAM: 4.00 GB
2025-04-08 19:53:37,035 - app.services.chatbot - INFO - FORCE_GPU enabled: Using maximum GPU layers
2025-04-08 19:53:37,035 - app.services.chatbot - INFO - Using n_gpu_layers=32
2025-04-08 19:53:37,035 - app.services.chatbot - INFO - Using optimized GPU parameters
2025-04-08 19:53:37,035 - app.services.chatbot - INFO - Creating LlamaCpp model with parameters: n_gpu_layers=32, n_batch=512, use_mmap=False
2025-04-08 19:53:40,274 - app.services.chatbot - INFO - After model loading: 0.00MB allocated, 0.00MB reserved
2025-04-08 19:53:40,274 - app.services.chatbot - WARNING - Warning: Model might not be using GPU (low VRAM usage)
2025-04-08 19:53:40,274 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 19:57:09,650 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 19:57:09,710 - app.services.chatbot - INFO - Cleaned GPU memory: allocated=0.00MB, reserved=0.00MB
2025-04-08 19:57:09,711 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-08 19:57:09,711 - app.services.chatbot - INFO - Free GPU memory: 0.00MB reserved, 0.00MB allocated
2025-04-08 19:57:09,712 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 19:57:11,532 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 19:57:13,178 - app.services.chatbot - INFO - Loading vector store from vector_db
2025-04-08 19:57:13,178 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-08 19:57:13,178 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-08 19:57:13,178 - faiss.loader - INFO - Loading faiss.
2025-04-08 19:57:13,204 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-08 19:57:13,217 - app.services.chatbot - ERROR - Error loading embeddings/vectorstore: '__fields_set__'
2025-04-08 19:57:13,217 - app.services.chatbot - WARNING - Continuing without embeddings/vectorstore
2025-04-08 19:57:13,219 - app.services.chatbot - INFO - Detected VRAM: 4.00 GB
2025-04-08 19:57:13,219 - app.services.chatbot - INFO - FORCE_GPU enabled: Using maximum GPU layers
2025-04-08 19:57:13,219 - app.services.chatbot - INFO - Using n_gpu_layers=32
2025-04-08 19:57:13,219 - app.services.chatbot - INFO - Using optimized GPU parameters
2025-04-08 19:57:13,219 - app.services.chatbot - INFO - Creating LlamaCpp model with parameters: n_gpu_layers=32, n_batch=512, use_mmap=False
2025-04-08 19:57:14,416 - app.services.chatbot - INFO - After model loading: 0.00MB allocated, 0.00MB reserved
2025-04-08 19:57:14,417 - app.services.chatbot - WARNING - Warning: Model might not be using GPU (low VRAM usage)
2025-04-08 19:57:14,417 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 20:06:11,517 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 20:06:11,583 - app.services.chatbot - INFO - Cleaned GPU memory: allocated=0.00MB, reserved=0.00MB
2025-04-08 20:06:11,584 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-08 20:06:11,585 - app.services.chatbot - INFO - Free GPU memory: 0.00MB reserved, 0.00MB allocated
2025-04-08 20:06:11,585 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 20:06:13,391 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 20:06:15,096 - app.services.chatbot - INFO - Loading vector store from vector_db
2025-04-08 20:06:15,096 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-08 20:06:15,096 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-08 20:06:15,096 - faiss.loader - INFO - Loading faiss.
2025-04-08 20:06:15,115 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-08 20:06:15,126 - app.services.chatbot - ERROR - Error loading embeddings/vectorstore: '__fields_set__'
2025-04-08 20:06:15,126 - app.services.chatbot - WARNING - Continuing without embeddings/vectorstore
2025-04-08 20:06:15,133 - app.services.chatbot - INFO - Detected VRAM: 4.00 GB
2025-04-08 20:06:15,133 - app.services.chatbot - INFO - FORCE_GPU enabled: Using maximum GPU layers
2025-04-08 20:06:15,133 - app.services.chatbot - INFO - Using n_gpu_layers=32
2025-04-08 20:06:15,133 - app.services.chatbot - INFO - Using optimized GPU parameters
2025-04-08 20:06:15,133 - app.services.chatbot - INFO - Creating LlamaCpp model with parameters: n_gpu_layers=32, n_batch=512, use_mmap=False
2025-04-08 20:06:16,483 - app.services.chatbot - INFO - After model loading: 0.00MB allocated, 0.00MB reserved
2025-04-08 20:06:16,483 - app.services.chatbot - WARNING - Warning: Model might not be using GPU (low VRAM usage)
2025-04-08 20:06:16,483 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 20:12:16,480 - app.api.endpoints.chat - INFO - Received chat-direct request from user 3: 'nhu cầu chính của khách hàng là gì'
2025-04-08 20:12:16,492 - app.api.endpoints.chat - INFO - Using Local model with model: mistral-7b-instruct-v0.1.Q2_K.gguf
2025-04-08 20:12:16,492 - app.services.chatbot - INFO - Processing query: nhu cầu chính của khách hàng là gì
2025-04-08 20:12:16,492 - app.services.chatbot - INFO - Retriever not available, skipping document retrieval
2025-04-08 20:12:16,492 - app.services.chatbot - INFO - Generating prompt...
2025-04-08 20:12:16,493 - app.services.chatbot - INFO - Calling LLM for answer...
2025-04-08 20:12:43,516 - app.services.chatbot - INFO - LLM processing time: 27.02s
2025-04-08 20:12:43,516 - app.services.chatbot - INFO - Total processing time: 27.02s
2025-04-08 20:12:43,516 - app.api.endpoints.chat - INFO - Generated response for user 3 in 27.0244300365448 seconds
2025-04-08 20:14:43,642 - app.api.endpoints.chat - INFO - Received chat-direct request from user 3: 'Kết phiên giao dịch ngày 10-2, chỉ số VN-Index như thế nào'
2025-04-08 20:14:43,642 - app.api.endpoints.chat - INFO - Using Local model with model: mistral-7b-instruct-v0.1.Q2_K.gguf
2025-04-08 20:14:43,642 - app.services.chatbot - INFO - Processing query: Kết phiên giao dịch ngày 10-2, chỉ số VN-Index như thế nào
2025-04-08 20:14:43,642 - app.services.chatbot - INFO - Retriever not available, skipping document retrieval
2025-04-08 20:14:43,642 - app.services.chatbot - INFO - Generating prompt...
2025-04-08 20:14:43,642 - app.services.chatbot - INFO - Calling LLM for answer...
2025-04-08 20:14:58,482 - app.services.chatbot - INFO - LLM processing time: 14.84s
2025-04-08 20:14:58,482 - app.services.chatbot - INFO - Total processing time: 14.84s
2025-04-08 20:14:58,482 - app.api.endpoints.chat - INFO - Generated response for user 3 in 14.840807437896729 seconds
2025-04-08 20:18:00,918 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 20:18:00,983 - app.services.chatbot - INFO - Cleaned GPU memory: allocated=0.00MB, reserved=0.00MB
2025-04-08 20:18:00,983 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-08 20:18:00,984 - app.services.chatbot - INFO - Free GPU memory: 0.00MB reserved, 0.00MB allocated
2025-04-08 20:18:00,984 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 20:18:03,456 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 20:18:05,689 - app.services.chatbot - INFO - Loading vector store from vector_db
2025-04-08 20:18:05,689 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-08 20:18:05,689 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-08 20:18:05,689 - faiss.loader - INFO - Loading faiss.
2025-04-08 20:18:05,715 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-08 20:18:05,728 - app.services.chatbot - ERROR - Error loading embeddings/vectorstore: '__fields_set__'
2025-04-08 20:18:05,728 - app.services.chatbot - WARNING - Continuing without embeddings/vectorstore
2025-04-08 20:18:05,732 - app.services.chatbot - INFO - Detected VRAM: 4.00 GB
2025-04-08 20:18:05,732 - app.services.chatbot - INFO - FORCE_GPU enabled: Using maximum GPU layers
2025-04-08 20:18:05,733 - app.services.chatbot - INFO - Using n_gpu_layers=32
2025-04-08 20:18:05,733 - app.services.chatbot - INFO - Using optimized GPU parameters
2025-04-08 20:18:05,733 - app.services.chatbot - INFO - Creating LlamaCpp model with parameters: n_gpu_layers=32, n_batch=512, use_mmap=False
2025-04-08 20:18:08,748 - app.services.chatbot - INFO - After model loading: 0.00MB allocated, 0.00MB reserved
2025-04-08 20:18:08,748 - app.services.chatbot - WARNING - Warning: Model might not be using GPU (low VRAM usage)
2025-04-08 20:18:08,748 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 20:18:45,589 - app.api.endpoints.chat - INFO - Received chat-direct request from user 3: 'Kết phiên giao dịch ngày 10-2, chỉ số VN-Index như thế nào'
2025-04-08 20:18:45,590 - app.api.endpoints.chat - INFO - Using Local model with model: mistral-7b-instruct-v0.1.Q2_K.gguf
2025-04-08 20:18:45,590 - app.services.chatbot - INFO - Processing query: Kết phiên giao dịch ngày 10-2, chỉ số VN-Index như thế nào
2025-04-08 20:18:45,591 - app.services.chatbot - INFO - Retriever not available, skipping document retrieval
2025-04-08 20:18:45,591 - app.services.chatbot - INFO - Generating prompt...
2025-04-08 20:18:45,591 - app.services.chatbot - INFO - Calling LLM for answer...
2025-04-08 20:19:17,933 - app.services.chatbot - INFO - LLM processing time: 32.34s
2025-04-08 20:19:17,933 - app.services.chatbot - INFO - Total processing time: 32.34s
2025-04-08 20:19:17,933 - app.api.endpoints.chat - INFO - Generated response for user 3 in 32.343019008636475 seconds
2025-04-08 20:25:30,328 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 20:25:30,380 - app.services.chatbot - INFO - Cleaned GPU memory: allocated=0.00MB, reserved=0.00MB
2025-04-08 20:25:30,380 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-08 20:25:30,381 - app.services.chatbot - INFO - Free GPU memory: 0.00MB reserved, 0.00MB allocated
2025-04-08 20:25:30,381 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 20:25:39,526 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 20:25:41,683 - app.services.chatbot - INFO - Loading vector store from vector_db
2025-04-08 20:25:41,688 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-08 20:25:41,688 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-08 20:25:41,688 - faiss.loader - INFO - Loading faiss.
2025-04-08 20:25:41,711 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-08 20:25:41,728 - app.services.chatbot - ERROR - Error loading embeddings/vectorstore: '__fields_set__'
2025-04-08 20:25:41,729 - app.services.chatbot - WARNING - Continuing without embeddings/vectorstore
2025-04-08 20:25:41,730 - app.services.chatbot - INFO - Detected VRAM: 4.00 GB
2025-04-08 20:25:41,731 - app.services.chatbot - INFO - FORCE_GPU enabled: Using maximum GPU layers
2025-04-08 20:25:41,731 - app.services.chatbot - INFO - Using n_gpu_layers=32
2025-04-08 20:25:41,731 - app.services.chatbot - INFO - Using optimized GPU parameters
2025-04-08 20:25:41,732 - app.services.chatbot - INFO - Creating LlamaCpp model with parameters: n_gpu_layers=32, n_batch=512, use_mmap=False
2025-04-08 20:25:44,947 - app.services.chatbot - INFO - After model loading: 0.00MB allocated, 0.00MB reserved
2025-04-08 20:25:44,947 - app.services.chatbot - WARNING - Warning: Model might not be using GPU (low VRAM usage)
2025-04-08 20:25:44,948 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 20:26:30,179 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 20:26:30,229 - app.services.chatbot - INFO - Cleaned GPU memory: allocated=0.00MB, reserved=0.00MB
2025-04-08 20:26:30,230 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-08 20:26:30,231 - app.services.chatbot - INFO - Free GPU memory: 0.00MB reserved, 0.00MB allocated
2025-04-08 20:26:30,231 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 20:26:32,751 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 20:26:42,350 - app.services.chatbot - INFO - Loading vector store from vector_db
2025-04-08 20:26:42,355 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-08 20:26:42,356 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-08 20:26:42,356 - faiss.loader - INFO - Loading faiss.
2025-04-08 20:26:42,470 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-08 20:26:42,485 - app.services.chatbot - ERROR - Error loading embeddings/vectorstore: '__fields_set__'
2025-04-08 20:26:42,485 - app.services.chatbot - WARNING - Continuing without embeddings/vectorstore
2025-04-08 20:26:42,486 - app.services.chatbot - INFO - Detected VRAM: 4.00 GB
2025-04-08 20:26:42,487 - app.services.chatbot - INFO - FORCE_GPU enabled: Using maximum GPU layers
2025-04-08 20:26:42,487 - app.services.chatbot - INFO - Using n_gpu_layers=32
2025-04-08 20:26:42,487 - app.services.chatbot - INFO - Using optimized GPU parameters
2025-04-08 20:26:42,487 - app.services.chatbot - INFO - Creating LlamaCpp model with parameters: n_gpu_layers=32, n_batch=512, use_mmap=False
2025-04-08 20:26:46,082 - app.services.chatbot - INFO - After model loading: 0.00MB allocated, 0.00MB reserved
2025-04-08 20:26:46,082 - app.services.chatbot - WARNING - Warning: Model might not be using GPU (low VRAM usage)
2025-04-08 20:26:46,082 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 20:27:41,211 - app.api.endpoints.chat - INFO - Received chat-direct request from user 3: 'Kết phiên giao dịch ngày 10-2, chỉ số VN-Index như thế nào'
2025-04-08 20:27:41,212 - app.api.endpoints.chat - INFO - Using Local model with model: mistral-7b-instruct-v0.1.Q2_K.gguf
2025-04-08 20:27:41,212 - app.services.chatbot - INFO - Processing query: Kết phiên giao dịch ngày 10-2, chỉ số VN-Index như thế nào
2025-04-08 20:27:41,213 - app.services.chatbot - INFO - Retriever not available, skipping document retrieval
2025-04-08 20:27:41,213 - app.services.chatbot - INFO - Generating prompt...
2025-04-08 20:27:41,213 - app.services.chatbot - INFO - Calling LLM for answer...
2025-04-08 20:28:23,861 - app.services.chatbot - INFO - LLM processing time: 42.65s
2025-04-08 20:28:23,861 - app.services.chatbot - INFO - Total processing time: 42.65s
2025-04-08 20:28:23,861 - app.api.endpoints.chat - INFO - Generated response for user 3 in 42.649189710617065 seconds
2025-04-08 21:10:47,962 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 21:10:47,962 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 21:10:51,538 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 21:10:51,539 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 21:10:52,682 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 21:10:52,745 - app.services.chatbot - INFO - GPU memory cleaned successfully
2025-04-08 21:10:52,745 - app.services.chatbot - INFO - Initializing Gemini API...
2025-04-08 21:10:52,746 - app.services.chatbot - INFO - Gemini API initialized successfully
2025-04-08 21:10:52,746 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 21:11:36,912 - app.api.endpoints.chat - INFO - Received chat-direct request from user 3: 'Kết phiên giao dịch ngày 10-2, chỉ số VN-Index như thế nào'
2025-04-08 21:11:36,912 - app.api.endpoints.chat - INFO - Using API with model: gemini-2.0-flash
2025-04-08 21:11:36,917 - app.services.api_service - INFO - Sending request to Google API: gemini-2.0-flash
2025-04-08 21:11:37,976 - app.services.api_service - INFO - Google API response received in 1.06 seconds
2025-04-08 21:11:37,977 - app.api.endpoints.chat - INFO - Generated response for user 3 in 1.0643019676208496 seconds
2025-04-08 21:14:30,364 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 21:14:30,364 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 21:14:33,792 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 21:14:33,792 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 21:14:34,920 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 21:14:34,989 - app.services.chatbot - INFO - GPU memory cleaned successfully
2025-04-08 21:14:34,989 - app.services.chatbot - INFO - Initializing Gemini API...
2025-04-08 21:14:34,989 - app.services.chatbot - INFO - Gemini API initialized successfully
2025-04-08 21:14:34,989 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 21:15:06,198 - app.api.endpoints.chat - INFO - Received chat-direct request from user 3: 'Kết phiên giao dịch ngày 10-2, chỉ số VN-Index như thế nào'
2025-04-08 21:15:06,198 - app.api.endpoints.chat - INFO - Using API with model: gemini-2.0-flash
2025-04-08 21:15:06,198 - app.services.api_service - INFO - Sending request to Google API: gemini-2.0-flash
2025-04-08 21:15:08,025 - app.services.api_service - INFO - Google API response received in 1.83 seconds
2025-04-08 21:15:08,026 - app.api.endpoints.chat - INFO - Generated response for user 3 in 1.828434705734253 seconds
2025-04-08 21:28:42,173 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 21:28:42,236 - app.services.chatbot - INFO - GPU memory cleaned successfully
2025-04-08 21:28:42,236 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-08 21:28:42,236 - app.services.chatbot - INFO - Free GPU memory: 0.00MB reserved, 0.00MB allocated
2025-04-08 21:28:42,236 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 21:28:44,089 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 21:28:45,987 - app.services.chatbot - INFO - Loading vector store from vector_db
2025-04-08 21:28:45,990 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-08 21:28:45,990 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-08 21:28:45,991 - faiss.loader - INFO - Loading faiss.
2025-04-08 21:28:46,009 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-08 21:28:46,016 - app.services.chatbot - ERROR - Error loading embeddings/vectorstore: FAISS.__init__() got an unexpected keyword argument 'allow_dangerous_deserialization'
2025-04-08 21:28:46,016 - app.services.chatbot - WARNING - Continuing without embeddings/vectorstore
2025-04-08 21:28:46,017 - app.services.chatbot - INFO - Detected VRAM: 4.00 GB
2025-04-08 21:28:46,017 - app.services.chatbot - INFO - FORCE_GPU enabled: Using maximum GPU layers
2025-04-08 21:28:46,017 - app.services.chatbot - INFO - Using n_gpu_layers=32
2025-04-08 21:28:46,017 - app.services.chatbot - INFO - Using optimized GPU parameters
2025-04-08 21:28:46,018 - app.services.chatbot - INFO - Creating LlamaCpp model with parameters: n_gpu_layers=32, n_batch=512, use_mmap=False
2025-04-08 21:28:49,441 - app.services.chatbot - INFO - After model loading: 0.00MB allocated, 0.00MB reserved
2025-04-08 21:28:49,441 - app.services.chatbot - WARNING - Warning: Model might not be using GPU (low VRAM usage)
2025-04-08 21:28:49,442 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 21:29:26,408 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 21:29:26,473 - app.services.chatbot - INFO - GPU memory cleaned successfully
2025-04-08 21:29:26,473 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-08 21:29:26,473 - app.services.chatbot - INFO - Free GPU memory: 0.00MB reserved, 0.00MB allocated
2025-04-08 21:29:26,473 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 21:29:28,881 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 21:29:31,393 - app.services.chatbot - INFO - Loading vector store from vector_db
2025-04-08 21:29:31,397 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-08 21:29:31,397 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-08 21:29:31,397 - faiss.loader - INFO - Loading faiss.
2025-04-08 21:29:31,416 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-08 21:29:31,418 - app.services.chatbot - ERROR - Error loading embeddings/vectorstore: FAISS.__init__() got an unexpected keyword argument 'allow_dangerous_deserialization'
2025-04-08 21:29:31,418 - app.services.chatbot - WARNING - Continuing without embeddings/vectorstore
2025-04-08 21:29:31,418 - app.services.chatbot - INFO - Detected VRAM: 4.00 GB
2025-04-08 21:29:31,418 - app.services.chatbot - INFO - FORCE_GPU enabled: Using maximum GPU layers
2025-04-08 21:29:31,418 - app.services.chatbot - INFO - Using n_gpu_layers=32
2025-04-08 21:29:31,418 - app.services.chatbot - INFO - Using optimized GPU parameters
2025-04-08 21:29:31,418 - app.services.chatbot - INFO - Creating LlamaCpp model with parameters: n_gpu_layers=32, n_batch=512, use_mmap=False
2025-04-08 21:29:34,718 - app.services.chatbot - INFO - After model loading: 0.00MB allocated, 0.00MB reserved
2025-04-08 21:29:34,718 - app.services.chatbot - WARNING - Warning: Model might not be using GPU (low VRAM usage)
2025-04-08 21:29:34,726 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 21:30:00,927 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 21:30:00,927 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 21:30:04,598 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 21:30:04,598 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 21:30:05,762 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 21:30:05,826 - app.services.chatbot - INFO - GPU memory cleaned successfully
2025-04-08 21:30:05,826 - app.services.chatbot - INFO - Initializing Gemini API...
2025-04-08 21:30:05,826 - app.services.chatbot - INFO - Gemini API initialized successfully
2025-04-08 21:30:05,826 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 21:30:34,833 - app.api.endpoints.chat - INFO - Received chat-direct request from user 3: 'kinh tế học là gì'
2025-04-08 21:30:34,834 - app.api.endpoints.chat - INFO - Using API with model: gemini-2.0-flash
2025-04-08 21:30:34,835 - app.services.api_service - INFO - Sending request to Google API: gemini-2.0-flash
2025-04-08 21:30:39,067 - app.services.api_service - INFO - Google API response received in 4.23 seconds
2025-04-08 21:30:39,067 - app.api.endpoints.chat - INFO - Generated response for user 3 in 4.233837366104126 seconds
2025-04-08 21:35:31,350 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 21:35:31,350 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 21:35:34,897 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 21:35:34,897 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 21:35:36,017 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 21:35:36,082 - app.services.chatbot - INFO - GPU memory cleaned successfully
2025-04-08 21:35:36,083 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-08 21:35:36,083 - app.services.chatbot - INFO - Free GPU memory: 0.00MB reserved, 0.00MB allocated
2025-04-08 21:35:36,083 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 21:35:38,497 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 21:35:40,947 - app.services.chatbot - INFO - Loading vector store from vector_db
2025-04-08 21:35:40,947 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-08 21:35:40,947 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-08 21:35:40,947 - faiss.loader - INFO - Loading faiss.
2025-04-08 21:35:40,972 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-08 21:35:40,980 - app.services.chatbot - ERROR - Error loading embeddings/vectorstore: FAISS.__init__() got an unexpected keyword argument 'allow_dangerous_deserialization'
2025-04-08 21:35:40,980 - app.services.chatbot - WARNING - Continuing without embeddings/vectorstore
2025-04-08 21:35:40,981 - app.services.chatbot - INFO - Initializing Gemini API...
2025-04-08 21:35:40,981 - app.services.chatbot - INFO - Gemini API initialized successfully
2025-04-08 21:35:40,981 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 21:36:06,220 - app.api.endpoints.chat - INFO - Received chat-direct request from user 3: 'kinh tế học là gì'
2025-04-08 21:36:06,221 - app.api.endpoints.chat - INFO - Using API with model: gemini-2.0-flash
2025-04-08 21:36:06,221 - app.services.api_service - INFO - Sending request to Google API: gemini-2.0-flash
2025-04-08 21:36:10,657 - app.services.api_service - INFO - Google API response received in 4.44 seconds
2025-04-08 21:36:10,657 - app.api.endpoints.chat - INFO - Generated response for user 3 in 4.435338973999023 seconds
2025-04-08 21:37:31,076 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 21:37:31,076 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 21:37:34,659 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 21:37:34,659 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 21:37:35,771 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 21:37:35,827 - app.services.chatbot - INFO - GPU memory cleaned successfully
2025-04-08 21:37:35,827 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-08 21:37:35,827 - app.services.chatbot - INFO - Free GPU memory: 0.00MB reserved, 0.00MB allocated
2025-04-08 21:37:35,827 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 21:37:37,709 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 21:37:39,736 - app.services.chatbot - INFO - Loading vector store from vector_db
2025-04-08 21:37:39,736 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-08 21:37:39,736 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-08 21:37:39,736 - faiss.loader - INFO - Loading faiss.
2025-04-08 21:37:39,755 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-08 21:37:39,762 - app.services.chatbot - ERROR - Error loading embeddings/vectorstore: FAISS.__init__() got an unexpected keyword argument 'allow_dangerous_deserialization'
2025-04-08 21:37:39,763 - app.services.chatbot - WARNING - Continuing without embeddings/vectorstore
2025-04-08 21:37:39,763 - app.services.chatbot - INFO - Initializing Gemini API...
2025-04-08 21:37:39,763 - app.services.chatbot - INFO - Gemini API initialized successfully
2025-04-08 21:37:39,763 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 21:38:01,860 - app.api.endpoints.chat - INFO - Received chat-direct request from user 3: 'kinh tế học là gì'
2025-04-08 21:38:01,860 - app.api.endpoints.chat - INFO - Using API with model: gemini-2.0-flash
2025-04-08 21:38:01,861 - app.services.api_service - INFO - Sending request to Google API: gemini-2.0-flash
2025-04-08 21:38:05,916 - app.services.api_service - INFO - Google API response received in 4.06 seconds
2025-04-08 21:38:05,916 - app.api.endpoints.chat - INFO - Generated response for user 3 in 4.0557050704956055 seconds
2025-04-08 21:38:39,011 - app.api.endpoints.chat - INFO - Received chat-direct request from user 3: 'Kinh tế học phát triển là gì'
2025-04-08 21:38:39,011 - app.api.endpoints.chat - INFO - Using API with model: gemini-2.0-flash
2025-04-08 21:38:39,011 - app.services.api_service - INFO - Sending request to Google API: gemini-2.0-flash
2025-04-08 21:38:42,536 - app.services.api_service - INFO - Google API response received in 3.53 seconds
2025-04-08 21:38:42,536 - app.api.endpoints.chat - INFO - Generated response for user 3 in 3.5255239009857178 seconds
2025-04-08 21:39:27,225 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 21:39:27,286 - app.services.chatbot - INFO - GPU memory cleaned successfully
2025-04-08 21:39:27,286 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-08 21:39:27,286 - app.services.chatbot - INFO - Free GPU memory: 0.00MB reserved, 0.00MB allocated
2025-04-08 21:39:27,286 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 21:39:29,104 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 21:39:30,966 - app.services.chatbot - INFO - Loading vector store from vector_db
2025-04-08 21:39:30,966 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-08 21:39:30,976 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-08 21:39:30,976 - faiss.loader - INFO - Loading faiss.
2025-04-08 21:39:30,986 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-08 21:39:30,997 - app.services.chatbot - ERROR - Error loading embeddings/vectorstore: FAISS.__init__() got an unexpected keyword argument 'allow_dangerous_deserialization'
2025-04-08 21:39:30,997 - app.services.chatbot - WARNING - Continuing without embeddings/vectorstore
2025-04-08 21:39:30,997 - app.services.chatbot - INFO - Detected VRAM: 4.00 GB
2025-04-08 21:39:30,998 - app.services.chatbot - INFO - FORCE_GPU enabled: Using maximum GPU layers
2025-04-08 21:39:30,998 - app.services.chatbot - INFO - Using n_gpu_layers=32
2025-04-08 21:39:30,998 - app.services.chatbot - INFO - Using optimized GPU parameters
2025-04-08 21:39:30,998 - app.services.chatbot - INFO - Creating LlamaCpp model with parameters: n_gpu_layers=32, n_batch=512, use_mmap=False
2025-04-08 21:39:34,293 - app.services.chatbot - INFO - After model loading: 0.00MB allocated, 0.00MB reserved
2025-04-08 21:39:34,293 - app.services.chatbot - WARNING - Warning: Model might not be using GPU (low VRAM usage)
2025-04-08 21:39:34,293 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 21:39:57,640 - app.api.endpoints.chat - INFO - Received chat-direct request from user 3: 'Kinh tế học phát triển là gì'
2025-04-08 21:39:57,640 - app.api.endpoints.chat - INFO - Using API with model: gemini-2.0-flash
2025-04-08 21:39:57,640 - app.services.api_service - INFO - Sending request to Google API: gemini-2.0-flash
2025-04-08 21:40:02,014 - app.services.api_service - INFO - Google API response received in 4.37 seconds
2025-04-08 21:40:02,014 - app.api.endpoints.chat - INFO - Generated response for user 3 in 4.374788522720337 seconds
2025-04-08 21:40:32,569 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 21:40:32,569 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 21:40:36,221 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 21:40:36,221 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 21:40:37,350 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 21:40:37,407 - app.services.chatbot - INFO - GPU memory cleaned successfully
2025-04-08 21:40:37,407 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-08 21:40:37,407 - app.services.chatbot - INFO - Free GPU memory: 0.00MB reserved, 0.00MB allocated
2025-04-08 21:40:37,407 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 21:40:39,786 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 21:40:42,276 - app.services.chatbot - INFO - Loading vector store from vector_db
2025-04-08 21:40:42,281 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-08 21:40:42,281 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-08 21:40:42,281 - faiss.loader - INFO - Loading faiss.
2025-04-08 21:40:42,301 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-08 21:40:42,310 - app.services.chatbot - ERROR - Error loading embeddings/vectorstore: FAISS.__init__() got an unexpected keyword argument 'allow_dangerous_deserialization'
2025-04-08 21:40:42,311 - app.services.chatbot - WARNING - Continuing without embeddings/vectorstore
2025-04-08 21:40:42,311 - app.services.chatbot - INFO - Initializing Gemini API...
2025-04-08 21:40:42,312 - app.services.chatbot - INFO - Gemini API initialized successfully
2025-04-08 21:40:42,312 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 21:41:33,523 - app.api.endpoints.chat - INFO - Received chat-direct request from user 3: 'Kinh tế học vĩ mô'
2025-04-08 21:41:33,523 - app.api.endpoints.chat - INFO - Using API with model: gemini-2.0-flash
2025-04-08 21:41:33,523 - app.services.api_service - INFO - Sending request to Google API: gemini-2.0-flash
2025-04-08 21:41:36,977 - app.services.api_service - INFO - Google API response received in 3.45 seconds
2025-04-08 21:41:36,978 - app.api.endpoints.chat - INFO - Generated response for user 3 in 3.4557113647460938 seconds
2025-04-08 21:45:58,509 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 21:45:58,510 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 21:45:59,322 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 21:45:59,381 - app.services.chatbot - INFO - GPU memory cleaned successfully
2025-04-08 21:45:59,382 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-08 21:45:59,382 - app.services.chatbot - INFO - Free GPU memory: 0.00MB reserved, 0.00MB allocated
2025-04-08 21:45:59,382 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 21:46:01,296 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 21:46:03,150 - app.services.chatbot - INFO - Loading vector store from vector_db
2025-04-08 21:46:03,150 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-08 21:46:03,155 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-08 21:46:03,155 - faiss.loader - INFO - Loading faiss.
2025-04-08 21:46:03,165 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-08 21:46:03,174 - app.services.chatbot - ERROR - Error loading embeddings/vectorstore: FAISS.__init__() got an unexpected keyword argument 'allow_dangerous_deserialization'
2025-04-08 21:46:03,175 - app.services.chatbot - WARNING - Continuing without embeddings/vectorstore
2025-04-08 21:46:03,175 - app.services.chatbot - INFO - Initializing Gemini API...
2025-04-08 21:46:03,176 - app.services.chatbot - INFO - Gemini API initialized successfully
2025-04-08 21:46:03,176 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 21:46:08,325 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 21:46:08,325 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 21:46:09,145 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 21:46:09,211 - app.services.chatbot - INFO - GPU memory cleaned successfully
2025-04-08 21:46:09,211 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-08 21:46:09,212 - app.services.chatbot - INFO - Free GPU memory: 0.00MB reserved, 0.00MB allocated
2025-04-08 21:46:09,212 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 21:46:11,065 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 21:46:12,974 - app.services.chatbot - INFO - Loading vector store from vector_db
2025-04-08 21:46:12,978 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-08 21:46:12,978 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-08 21:46:12,979 - faiss.loader - INFO - Loading faiss.
2025-04-08 21:46:12,996 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-08 21:46:13,003 - app.services.chatbot - ERROR - Error loading embeddings/vectorstore: FAISS.__init__() got an unexpected keyword argument 'allow_dangerous_deserialization'
2025-04-08 21:46:13,003 - app.services.chatbot - WARNING - Continuing without embeddings/vectorstore
2025-04-08 21:46:13,004 - app.services.chatbot - INFO - Initializing Gemini API...
2025-04-08 21:46:13,004 - app.services.chatbot - INFO - Gemini API initialized successfully
2025-04-08 21:46:13,004 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 21:46:18,195 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 21:46:18,195 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 21:46:19,015 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 21:46:19,074 - app.services.chatbot - INFO - GPU memory cleaned successfully
2025-04-08 21:46:19,074 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-08 21:46:19,075 - app.services.chatbot - INFO - Free GPU memory: 0.00MB reserved, 0.00MB allocated
2025-04-08 21:46:19,075 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 21:46:20,895 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 21:46:51,315 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 21:46:51,315 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 21:46:54,895 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 21:46:54,895 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 21:46:56,015 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 21:46:56,075 - app.services.chatbot - INFO - GPU memory cleaned successfully
2025-04-08 21:46:56,075 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-08 21:46:56,080 - app.services.chatbot - INFO - Free GPU memory: 0.00MB reserved, 0.00MB allocated
2025-04-08 21:46:56,080 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 21:46:57,995 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 21:46:59,945 - app.services.chatbot - INFO - Loading vector store from vector_db
2025-04-08 21:46:59,948 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-08 21:46:59,948 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-08 21:46:59,948 - faiss.loader - INFO - Loading faiss.
2025-04-08 21:46:59,965 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-08 21:46:59,969 - app.services.chatbot - ERROR - Error loading embeddings/vectorstore: FAISS.__init__() got an unexpected keyword argument 'allow_dangerous_deserialization'
2025-04-08 21:46:59,970 - app.services.chatbot - WARNING - Continuing without embeddings/vectorstore
2025-04-08 21:46:59,970 - app.services.chatbot - INFO - Initializing Gemini API...
2025-04-08 21:46:59,970 - app.services.chatbot - INFO - Gemini API initialized successfully
2025-04-08 21:46:59,971 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 21:47:19,570 - app.api.endpoints.chat - INFO - Received chat-direct request from user 3: 'Kinh tế học vĩ mô'
2025-04-08 21:47:19,571 - app.api.endpoints.chat - INFO - Using API with model: gemini-2.0-flash
2025-04-08 21:47:19,571 - app.services.api_service - INFO - Sending request to Google API: gemini-2.0-flash
2025-04-08 21:47:19,985 - app.services.api_service - INFO - Google API response received in 0.41 seconds
2025-04-08 21:47:19,985 - app.services.api_service - ERROR - API error: 400 - {'error': {'code': 400, 'message': 'API key not valid. Please pass a valid API key.', 'status': 'INVALID_ARGUMENT', 'details': [{'@type': 'type.googleapis.com/google.rpc.ErrorInfo', 'reason': 'API_KEY_INVALID', 'domain': 'googleapis.com', 'metadata': {'service': 'generativelanguage.googleapis.com'}}, {'@type': 'type.googleapis.com/google.rpc.LocalizedMessage', 'locale': 'en-US', 'message': 'API key not valid. Please pass a valid API key.'}]}}
2025-04-08 21:47:19,985 - app.api.endpoints.chat - INFO - Generated response for user 3 in 0.4135434627532959 seconds
2025-04-08 21:47:44,477 - app.api.endpoints.chat - INFO - Received chat-direct request from user 3: 'Kinh tế học vĩ mô'
2025-04-08 21:47:44,477 - app.api.endpoints.chat - INFO - Using API with model: gemini-2.0-flash
2025-04-08 21:47:44,477 - app.services.api_service - INFO - Sending request to Google API: gemini-2.0-flash
2025-04-08 21:47:44,835 - app.services.api_service - INFO - Google API response received in 0.36 seconds
2025-04-08 21:47:44,835 - app.services.api_service - ERROR - API error: 400 - {'error': {'code': 400, 'message': 'API key not valid. Please pass a valid API key.', 'status': 'INVALID_ARGUMENT', 'details': [{'@type': 'type.googleapis.com/google.rpc.ErrorInfo', 'reason': 'API_KEY_INVALID', 'domain': 'googleapis.com', 'metadata': {'service': 'generativelanguage.googleapis.com'}}, {'@type': 'type.googleapis.com/google.rpc.LocalizedMessage', 'locale': 'en-US', 'message': 'API key not valid. Please pass a valid API key.'}]}}
2025-04-08 21:47:44,835 - app.api.endpoints.chat - INFO - Generated response for user 3 in 0.35782885551452637 seconds
2025-04-08 21:48:22,405 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 21:48:22,405 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 21:48:23,239 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 21:48:23,304 - app.services.chatbot - INFO - GPU memory cleaned successfully
2025-04-08 21:48:23,304 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-08 21:48:23,304 - app.services.chatbot - INFO - Free GPU memory: 0.00MB reserved, 0.00MB allocated
2025-04-08 21:48:23,308 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 21:48:25,184 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 21:48:27,075 - app.services.chatbot - INFO - Loading vector store from vector_db
2025-04-08 21:48:27,083 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-08 21:48:27,083 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-08 21:48:27,085 - faiss.loader - INFO - Loading faiss.
2025-04-08 21:48:27,100 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-08 21:48:27,105 - app.services.chatbot - ERROR - Error loading embeddings/vectorstore: FAISS.__init__() got an unexpected keyword argument 'allow_dangerous_deserialization'
2025-04-08 21:48:27,105 - app.services.chatbot - WARNING - Continuing without embeddings/vectorstore
2025-04-08 21:48:27,105 - app.services.chatbot - INFO - Initializing Gemini API...
2025-04-08 21:48:27,106 - app.services.chatbot - INFO - Gemini API initialized successfully
2025-04-08 21:48:27,106 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 21:48:41,294 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 21:48:41,294 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 21:48:44,900 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 21:48:44,900 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 21:48:46,021 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 21:48:46,082 - app.services.chatbot - INFO - GPU memory cleaned successfully
2025-04-08 21:48:46,083 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-08 21:48:46,083 - app.services.chatbot - INFO - Free GPU memory: 0.00MB reserved, 0.00MB allocated
2025-04-08 21:48:46,083 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 21:48:47,973 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 21:48:49,835 - app.services.chatbot - INFO - Loading vector store from vector_db
2025-04-08 21:48:49,838 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-08 21:48:49,839 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-08 21:48:49,839 - faiss.loader - INFO - Loading faiss.
2025-04-08 21:48:49,848 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-08 21:48:49,860 - app.services.chatbot - ERROR - Error loading embeddings/vectorstore: FAISS.__init__() got an unexpected keyword argument 'allow_dangerous_deserialization'
2025-04-08 21:48:49,860 - app.services.chatbot - WARNING - Continuing without embeddings/vectorstore
2025-04-08 21:48:49,860 - app.services.chatbot - INFO - Initializing Gemini API...
2025-04-08 21:48:49,861 - app.services.chatbot - INFO - Gemini API initialized successfully
2025-04-08 21:48:49,861 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 21:49:12,504 - app.api.endpoints.chat - INFO - Received chat-direct request from user 3: 'Kinh tế học vĩ mô'
2025-04-08 21:49:12,504 - app.api.endpoints.chat - INFO - Using API with model: gemini-2.0-flash
2025-04-08 21:49:12,504 - app.services.api_service - INFO - Sending request to Google API: gemini-2.0-flash
2025-04-08 21:49:12,855 - app.services.api_service - INFO - Google API response received in 0.35 seconds
2025-04-08 21:49:12,855 - app.services.api_service - ERROR - API error: 400 - {'error': {'code': 400, 'message': 'API key not valid. Please pass a valid API key.', 'status': 'INVALID_ARGUMENT', 'details': [{'@type': 'type.googleapis.com/google.rpc.ErrorInfo', 'reason': 'API_KEY_INVALID', 'domain': 'googleapis.com', 'metadata': {'service': 'generativelanguage.googleapis.com'}}, {'@type': 'type.googleapis.com/google.rpc.LocalizedMessage', 'locale': 'en-US', 'message': 'API key not valid. Please pass a valid API key.'}]}}
2025-04-08 21:49:12,855 - app.api.endpoints.chat - INFO - Generated response for user 3 in 0.3504343032836914 seconds
2025-04-08 21:51:05,361 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 21:51:05,361 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 21:51:08,958 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 21:51:08,958 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 21:51:10,074 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 21:51:10,134 - app.services.chatbot - INFO - GPU memory cleaned successfully
2025-04-08 21:51:10,134 - app.services.chatbot - INFO - Initializing Gemini API...
2025-04-08 21:51:10,134 - app.services.chatbot - INFO - Gemini API initialized successfully
2025-04-08 21:51:10,141 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 21:51:45,778 - app.api.endpoints.chat - INFO - Received chat-direct request from user 3: 'Kinh tế học vĩ mô'
2025-04-08 21:51:45,778 - app.api.endpoints.chat - INFO - Using API with model: gemini-2.0-flash
2025-04-08 21:51:45,779 - app.services.api_service - INFO - Sending request to Google API: gemini-2.0-flash
2025-04-08 21:51:46,137 - app.services.api_service - INFO - Google API response received in 0.36 seconds
2025-04-08 21:51:46,137 - app.services.api_service - ERROR - API error: 400 - {'error': {'code': 400, 'message': 'API key not valid. Please pass a valid API key.', 'status': 'INVALID_ARGUMENT', 'details': [{'@type': 'type.googleapis.com/google.rpc.ErrorInfo', 'reason': 'API_KEY_INVALID', 'domain': 'googleapis.com', 'metadata': {'service': 'generativelanguage.googleapis.com'}}, {'@type': 'type.googleapis.com/google.rpc.LocalizedMessage', 'locale': 'en-US', 'message': 'API key not valid. Please pass a valid API key.'}]}}
2025-04-08 21:51:46,137 - app.api.endpoints.chat - INFO - Generated response for user 3 in 0.3582160472869873 seconds
2025-04-08 21:52:36,841 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 21:52:36,841 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 21:52:40,433 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 21:52:40,433 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 21:52:41,541 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 21:52:41,606 - app.services.chatbot - INFO - GPU memory cleaned successfully
2025-04-08 21:52:41,606 - app.services.chatbot - INFO - Initializing Gemini API...
2025-04-08 21:52:41,606 - app.services.chatbot - INFO - Gemini API initialized successfully
2025-04-08 21:52:41,607 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 21:53:07,851 - app.api.endpoints.chat - INFO - Received chat-direct request from user 3: 'Kinh tế học vĩ mô'
2025-04-08 21:53:07,851 - app.api.endpoints.chat - INFO - Using API with model: gemini-2.0-flash
2025-04-08 21:53:07,851 - app.services.api_service - INFO - Sending request to Google API: gemini-2.0-flash
2025-04-08 21:53:11,191 - app.services.api_service - INFO - Google API response received in 3.34 seconds
2025-04-08 21:53:11,191 - app.api.endpoints.chat - INFO - Generated response for user 3 in 3.33966326713562 seconds
2025-04-08 22:05:52,476 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 22:05:52,476 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 22:05:56,095 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 22:05:56,095 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 22:05:57,205 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 22:05:57,271 - app.services.chatbot - INFO - GPU memory cleaned successfully
2025-04-08 22:05:57,271 - app.services.chatbot - INFO - Initializing Gemini API...
2025-04-08 22:05:57,272 - app.services.chatbot - INFO - Gemini API initialized successfully
2025-04-08 22:05:57,272 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 22:06:13,587 - app.api.endpoints.chat - INFO - Received chat-direct request from user 3: 'Kinh tế học vĩ mô'
2025-04-08 22:06:13,587 - app.api.endpoints.chat - INFO - Using API with model: gemini-2.0-flash
2025-04-08 22:06:13,589 - app.services.api_service - INFO - Sending request to Google API: gemini-2.0-flash
2025-04-08 22:06:16,950 - app.services.api_service - INFO - Google API response received in 3.36 seconds
2025-04-08 22:06:16,950 - app.api.endpoints.chat - INFO - Generated response for user 3 in 3.3630588054656982 seconds
2025-04-08 22:13:13,228 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 22:13:13,229 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 22:13:16,909 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 22:13:16,910 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 22:13:18,013 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 22:13:18,077 - app.services.chatbot - INFO - GPU memory cleaned successfully
2025-04-08 22:13:18,083 - app.services.chatbot - INFO - Initializing Gemini API...
2025-04-08 22:13:19,590 - app.services.chatbot - ERROR - Error initializing Gemini API: 404 models/gemini-pro is not found for API version v1beta, or is not supported for generateContent. Call ListModels to see the list of available models and their supported methods.
2025-04-08 22:13:19,591 - app.services.chatbot - WARNING - Falling back to local model
2025-04-08 22:13:19,591 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-08 22:13:19,592 - app.services.chatbot - INFO - Free GPU memory: 0.00MB reserved, 0.00MB allocated
2025-04-08 22:13:19,592 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 22:13:21,512 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 22:13:23,415 - app.services.chatbot - INFO - Loading vector store from vector_db
2025-04-08 22:13:23,425 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-08 22:13:23,425 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-08 22:13:23,426 - faiss.loader - INFO - Loading faiss.
2025-04-08 22:13:23,447 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-08 22:13:23,456 - app.services.chatbot - ERROR - Error loading embeddings/vectorstore: FAISS.__init__() got an unexpected keyword argument 'allow_dangerous_deserialization'
2025-04-08 22:13:23,457 - app.services.chatbot - WARNING - Continuing without embeddings/vectorstore
2025-04-08 22:13:23,457 - app.services.chatbot - INFO - Detected VRAM: 4.00 GB
2025-04-08 22:13:23,458 - app.services.chatbot - INFO - FORCE_GPU enabled: Using maximum GPU layers
2025-04-08 22:13:23,458 - app.services.chatbot - INFO - Using n_gpu_layers=32
2025-04-08 22:13:23,458 - app.services.chatbot - INFO - Using optimized GPU parameters
2025-04-08 22:13:23,458 - app.services.chatbot - INFO - Creating LlamaCpp model with parameters: n_gpu_layers=32, n_batch=512, use_mmap=False
2025-04-08 22:13:27,017 - app.services.chatbot - INFO - After model loading: 0.00MB allocated, 0.00MB reserved
2025-04-08 22:13:27,017 - app.services.chatbot - WARNING - Warning: Model might not be using GPU (low VRAM usage)
2025-04-08 22:13:27,017 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 22:14:07,561 - app.api.endpoints.chat - INFO - Received chat-direct request from user 3: 'Kinh tế học vĩ mô'
2025-04-08 22:14:07,561 - app.api.endpoints.chat - INFO - Using API with model: gemini-2.0-flash
2025-04-08 22:14:07,563 - app.services.api_service - INFO - Sending request to Google API: gemini-2.0-flash
2025-04-08 22:14:11,873 - app.services.api_service - INFO - Google API response received in 4.31 seconds
2025-04-08 22:14:11,880 - app.api.endpoints.chat - INFO - Generated response for user 3 in 4.318709135055542 seconds
2025-04-08 22:15:57,373 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 22:15:57,373 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 22:16:01,025 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 22:16:01,025 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 22:16:02,177 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 22:16:02,242 - app.services.chatbot - INFO - GPU memory cleaned successfully
2025-04-08 22:16:02,242 - app.services.chatbot - INFO - Initializing Gemini API...
2025-04-08 22:16:03,592 - app.services.chatbot - ERROR - Error initializing Gemini API: 404 models/gemini-pro is not found for API version v1beta, or is not supported for generateContent. Call ListModels to see the list of available models and their supported methods.
2025-04-08 22:16:03,592 - app.services.chatbot - WARNING - Falling back to local model
2025-04-08 22:16:03,592 - app.services.chatbot - INFO - GPU detected: NVIDIA GeForce GTX 1650 with Max-Q Design with 4.00GB VRAM
2025-04-08 22:16:03,593 - app.services.chatbot - INFO - Free GPU memory: 0.00MB reserved, 0.00MB allocated
2025-04-08 22:16:03,593 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 22:16:06,062 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 22:16:08,502 - app.services.chatbot - INFO - Loading vector store from vector_db
2025-04-08 22:16:08,502 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-08 22:16:08,502 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-08 22:16:08,502 - faiss.loader - INFO - Loading faiss.
2025-04-08 22:16:08,532 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-08 22:16:08,542 - app.services.chatbot - ERROR - Error loading embeddings/vectorstore: FAISS.__init__() got an unexpected keyword argument 'allow_dangerous_deserialization'
2025-04-08 22:16:08,542 - app.services.chatbot - WARNING - Continuing without embeddings/vectorstore
2025-04-08 22:16:08,543 - app.services.chatbot - INFO - Detected VRAM: 4.00 GB
2025-04-08 22:16:08,543 - app.services.chatbot - INFO - FORCE_GPU enabled: Using maximum GPU layers
2025-04-08 22:16:08,543 - app.services.chatbot - INFO - Using n_gpu_layers=32
2025-04-08 22:16:08,543 - app.services.chatbot - INFO - Using optimized GPU parameters
2025-04-08 22:16:08,544 - app.services.chatbot - INFO - Creating LlamaCpp model with parameters: n_gpu_layers=32, n_batch=512, use_mmap=False
2025-04-08 22:16:11,731 - app.services.chatbot - INFO - After model loading: 0.00MB allocated, 0.00MB reserved
2025-04-08 22:16:11,732 - app.services.chatbot - WARNING - Warning: Model might not be using GPU (low VRAM usage)
2025-04-08 22:16:11,733 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 22:20:34,239 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 22:20:34,239 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 22:20:37,741 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 22:20:37,741 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 22:20:38,900 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 22:20:38,962 - app.services.chatbot - INFO - GPU memory cleaned successfully
2025-04-08 22:20:38,962 - app.services.chatbot - INFO - Initializing Gemini API...
2025-04-08 22:20:39,700 - app.services.chatbot - ERROR - Error initializing Gemini API: 404 models/gemini-pro is not found for API version v1beta, or is not supported for generateContent. Call ListModels to see the list of available models and their supported methods.
2025-04-08 22:20:39,700 - app.services.chatbot - ERROR - Error initializing ChatbotService components: Failed to initialize Gemini API. Please check your API key and internet connection.
2025-04-08 22:20:39,759 - app.services.chatbot - ERROR - Traceback (most recent call last):
  File "D:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 68, in _initialize_components
    test_response = test_chat.send_message("Test connection")
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\google\generativeai\generative_models.py", line 578, in send_message
    response = self.model.generate_content(
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.NotFound: 404 models/gemini-pro is not found for API version v1beta, or is not supported for generateContent. Call ListModels to see the list of available models and their supported methods.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 81, in _initialize_components
    raise RuntimeError("Failed to initialize Gemini API. Please check your API key and internet connection.")
RuntimeError: Failed to initialize Gemini API. Please check your API key and internet connection.

2025-04-08 22:22:07,627 - app.api.endpoints.chat - INFO - Received chat-direct request from user 3: 'Kinh tế học vĩ mô'
2025-04-08 22:22:07,627 - app.api.endpoints.chat - INFO - Using API with model: gemini-2.0-flash
2025-04-08 22:22:07,629 - app.services.api_service - INFO - Sending request to Google API: gemini-2.0-flash
2025-04-08 22:22:11,199 - app.services.api_service - INFO - Google API response received in 3.57 seconds
2025-04-08 22:22:11,199 - app.api.endpoints.chat - INFO - Generated response for user 3 in 3.5716397762298584 seconds
2025-04-08 22:27:04,468 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 22:27:04,468 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 22:27:08,138 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 22:27:08,138 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 22:27:09,268 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 22:27:09,328 - app.services.chatbot - INFO - GPU memory cleaned successfully
2025-04-08 22:27:09,328 - app.services.chatbot - INFO - Initializing Gemini API...
2025-04-08 22:27:09,328 - app.services.chatbot - INFO - Gemini API initialized successfully
2025-04-08 22:27:09,328 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 22:27:11,772 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 22:27:14,274 - app.services.chatbot - INFO - Loading vector store from vector_db
2025-04-08 22:27:14,278 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-08 22:27:14,278 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-08 22:27:14,278 - faiss.loader - INFO - Loading faiss.
2025-04-08 22:27:14,299 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-08 22:27:14,309 - app.services.chatbot - ERROR - Error loading embeddings/vectorstore: FAISS.__init__() got an unexpected keyword argument 'allow_dangerous_deserialization'
2025-04-08 22:27:14,309 - app.services.chatbot - ERROR - Error initializing ChatbotService components: Failed to initialize vector database. Please check your vector store files.
2025-04-08 22:27:14,327 - app.services.chatbot - ERROR - Traceback (most recent call last):
  File "D:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 82, in _initialize_components
    self._db = FAISS.load_local(
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\langchain_community\vectorstores\faiss.py", line 1065, in load_local
    return cls(embeddings, index, docstore, index_to_docstore_id, **kwargs)
TypeError: FAISS.__init__() got an unexpected keyword argument 'allow_dangerous_deserialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 97, in _initialize_components
    raise RuntimeError("Failed to initialize vector database. Please check your vector store files.")
RuntimeError: Failed to initialize vector database. Please check your vector store files.

2025-04-08 22:29:14,060 - app.api.endpoints.chat - INFO - Received chat-direct request from user 3: 'Kinh tế học vĩ mô'
2025-04-08 22:29:14,061 - app.api.endpoints.chat - INFO - Using API with model: gemini-2.0-flash
2025-04-08 22:29:14,061 - app.services.api_service - INFO - Sending request to Google API: gemini-2.0-flash
2025-04-08 22:29:17,731 - app.services.api_service - INFO - Google API response received in 3.67 seconds
2025-04-08 22:29:17,732 - app.api.endpoints.chat - INFO - Generated response for user 3 in 3.6702089309692383 seconds
2025-04-08 22:31:13,805 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 22:31:13,805 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 22:31:17,302 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 22:31:17,302 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 22:31:18,416 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 22:31:18,482 - app.services.chatbot - INFO - GPU memory cleaned successfully
2025-04-08 22:31:18,483 - app.services.chatbot - INFO - Initializing Gemini API...
2025-04-08 22:31:18,483 - app.services.chatbot - INFO - Gemini API initialized successfully
2025-04-08 22:31:18,483 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 22:31:20,355 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 22:31:22,278 - app.services.chatbot - INFO - Loading vector store from vector_db
2025-04-08 22:31:22,282 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-08 22:31:22,282 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-08 22:31:22,283 - faiss.loader - INFO - Loading faiss.
2025-04-08 22:31:22,299 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-08 22:31:22,305 - app.services.chatbot - ERROR - Error loading embeddings/vectorstore: FAISS.__init__() got an unexpected keyword argument 'allow_dangerous_deserialization'
2025-04-08 22:31:22,306 - app.services.chatbot - ERROR - Error initializing ChatbotService components: Failed to initialize vector database. Please check your vector store files.
2025-04-08 22:31:22,306 - app.services.chatbot - ERROR - Traceback (most recent call last):
  File "D:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 82, in _initialize_components
    self._db = FAISS.load_local(
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\langchain_community\vectorstores\faiss.py", line 1065, in load_local
    return cls(embeddings, index, docstore, index_to_docstore_id, **kwargs)
TypeError: FAISS.__init__() got an unexpected keyword argument 'allow_dangerous_deserialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 97, in _initialize_components
    raise RuntimeError("Failed to initialize vector database. Please check your vector store files.")
RuntimeError: Failed to initialize vector database. Please check your vector store files.

2025-04-08 22:37:12,201 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 22:37:12,201 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 22:37:15,826 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 22:37:15,826 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 22:37:16,961 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 22:37:17,046 - app.services.chatbot - INFO - GPU memory cleaned successfully
2025-04-08 22:37:17,046 - app.services.chatbot - INFO - Initializing Gemini API...
2025-04-08 22:37:17,046 - app.services.chatbot - INFO - Gemini API initialized successfully
2025-04-08 22:37:17,046 - app.services.chatbot - INFO - Vector store path: ./vector_db
2025-04-08 22:37:17,046 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 22:37:18,943 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 22:37:20,821 - app.services.chatbot - INFO - Loading vector store from ./vector_db
2025-04-08 22:37:20,826 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-08 22:37:20,826 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-08 22:37:20,826 - faiss.loader - INFO - Loading faiss.
2025-04-08 22:37:20,848 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-08 22:37:20,854 - app.services.chatbot - ERROR - Error loading FAISS index: FAISS.__init__() got an unexpected keyword argument 'allow_dangerous_deserialization'
2025-04-08 22:37:20,854 - app.services.chatbot - ERROR - Error loading embeddings/vectorstore: Failed to load FAISS index: FAISS.__init__() got an unexpected keyword argument 'allow_dangerous_deserialization'
2025-04-08 22:37:20,855 - app.services.chatbot - ERROR - Stacktrace: Traceback (most recent call last):
  File "D:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 99, in _initialize_components
    self._db = FAISS.load_local(
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\langchain_community\vectorstores\faiss.py", line 1065, in load_local
    return cls(embeddings, index, docstore, index_to_docstore_id, **kwargs)
TypeError: FAISS.__init__() got an unexpected keyword argument 'allow_dangerous_deserialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 113, in _initialize_components
    raise RuntimeError(f"Failed to load FAISS index: {str(faiss_err)}")
RuntimeError: Failed to load FAISS index: FAISS.__init__() got an unexpected keyword argument 'allow_dangerous_deserialization'

2025-04-08 22:37:20,857 - app.services.chatbot - ERROR - Error initializing ChatbotService components: Failed to initialize vector database: Failed to load FAISS index: FAISS.__init__() got an unexpected keyword argument 'allow_dangerous_deserialization'
2025-04-08 22:37:20,858 - app.services.chatbot - ERROR - Traceback (most recent call last):
  File "D:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 99, in _initialize_components
    self._db = FAISS.load_local(
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\langchain_community\vectorstores\faiss.py", line 1065, in load_local
    return cls(embeddings, index, docstore, index_to_docstore_id, **kwargs)
TypeError: FAISS.__init__() got an unexpected keyword argument 'allow_dangerous_deserialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 113, in _initialize_components
    raise RuntimeError(f"Failed to load FAISS index: {str(faiss_err)}")
RuntimeError: Failed to load FAISS index: FAISS.__init__() got an unexpected keyword argument 'allow_dangerous_deserialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 135, in _initialize_components
    raise RuntimeError(f"Failed to initialize vector database: {str(emb_err)}")
RuntimeError: Failed to initialize vector database: Failed to load FAISS index: FAISS.__init__() got an unexpected keyword argument 'allow_dangerous_deserialization'

2025-04-08 22:41:04,209 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 22:41:04,210 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 22:41:07,830 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 22:41:07,830 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 22:41:08,942 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 22:41:09,004 - app.services.chatbot - INFO - GPU memory cleaned successfully
2025-04-08 22:41:09,004 - app.services.chatbot - INFO - Initializing Gemini API...
2025-04-08 22:41:09,004 - app.services.chatbot - INFO - Gemini API initialized successfully
2025-04-08 22:41:09,004 - app.services.chatbot - INFO - Vector store path: ./vector_db
2025-04-08 22:41:09,004 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 22:41:10,916 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 22:41:12,815 - app.services.chatbot - INFO - Loading vector store from ./vector_db
2025-04-08 22:41:12,819 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-08 22:41:12,819 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-08 22:41:12,819 - faiss.loader - INFO - Loading faiss.
2025-04-08 22:41:12,834 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-08 22:41:12,840 - app.services.chatbot - ERROR - Error loading FAISS index: FAISS.__init__() got an unexpected keyword argument 'allow_dangerous_deserialization'
2025-04-08 22:41:12,840 - app.services.chatbot - ERROR - Error loading embeddings/vectorstore: Failed to load FAISS index: FAISS.__init__() got an unexpected keyword argument 'allow_dangerous_deserialization'
2025-04-08 22:41:12,842 - app.services.chatbot - ERROR - Stacktrace: Traceback (most recent call last):
  File "d:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 99, in _initialize_components
    self._db = FAISS.load_local(
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\langchain_community\vectorstores\faiss.py", line 1065, in load_local
    return cls(embeddings, index, docstore, index_to_docstore_id, **kwargs)
TypeError: FAISS.__init__() got an unexpected keyword argument 'allow_dangerous_deserialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "d:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 113, in _initialize_components
    raise RuntimeError(f"Failed to load FAISS index: {str(faiss_err)}")
RuntimeError: Failed to load FAISS index: FAISS.__init__() got an unexpected keyword argument 'allow_dangerous_deserialization'

2025-04-08 22:41:12,842 - app.services.chatbot - ERROR - Error initializing ChatbotService components: Failed to initialize vector database: Failed to load FAISS index: FAISS.__init__() got an unexpected keyword argument 'allow_dangerous_deserialization'
2025-04-08 22:41:12,843 - app.services.chatbot - ERROR - Traceback (most recent call last):
  File "d:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 99, in _initialize_components
    self._db = FAISS.load_local(
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\langchain_community\vectorstores\faiss.py", line 1065, in load_local
    return cls(embeddings, index, docstore, index_to_docstore_id, **kwargs)
TypeError: FAISS.__init__() got an unexpected keyword argument 'allow_dangerous_deserialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "d:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 113, in _initialize_components
    raise RuntimeError(f"Failed to load FAISS index: {str(faiss_err)}")
RuntimeError: Failed to load FAISS index: FAISS.__init__() got an unexpected keyword argument 'allow_dangerous_deserialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "d:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 135, in _initialize_components
    raise RuntimeError(f"Failed to initialize vector database: {str(emb_err)}")
RuntimeError: Failed to initialize vector database: Failed to load FAISS index: FAISS.__init__() got an unexpected keyword argument 'allow_dangerous_deserialization'

2025-04-08 22:41:56,325 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 22:41:56,325 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 22:41:59,815 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 22:41:59,815 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 22:42:00,935 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 22:42:00,995 - app.services.chatbot - INFO - GPU memory cleaned successfully
2025-04-08 22:42:00,995 - app.services.chatbot - INFO - Initializing Gemini API...
2025-04-08 22:42:00,995 - app.services.chatbot - INFO - Gemini API initialized successfully
2025-04-08 22:42:00,995 - app.services.chatbot - INFO - Vector store path: ./vector_db
2025-04-08 22:42:00,995 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 22:42:02,837 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 22:42:04,671 - app.services.chatbot - INFO - Loading vector store from ./vector_db
2025-04-08 22:42:04,675 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-08 22:42:04,675 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-08 22:42:04,675 - faiss.loader - INFO - Loading faiss.
2025-04-08 22:42:04,691 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-08 22:42:04,696 - app.services.chatbot - ERROR - Error loading FAISS index: FAISS.__init__() got an unexpected keyword argument 'allow_dangerous_deserialization'
2025-04-08 22:42:04,696 - app.services.chatbot - ERROR - Error loading embeddings/vectorstore: Failed to load FAISS index: FAISS.__init__() got an unexpected keyword argument 'allow_dangerous_deserialization'
2025-04-08 22:42:04,696 - app.services.chatbot - ERROR - Stacktrace: Traceback (most recent call last):
  File "D:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 99, in _initialize_components
    self._db = FAISS.load_local(
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\langchain_community\vectorstores\faiss.py", line 1065, in load_local
    return cls(embeddings, index, docstore, index_to_docstore_id, **kwargs)
TypeError: FAISS.__init__() got an unexpected keyword argument 'allow_dangerous_deserialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 113, in _initialize_components
    raise RuntimeError(f"Failed to load FAISS index: {str(faiss_err)}")
RuntimeError: Failed to load FAISS index: FAISS.__init__() got an unexpected keyword argument 'allow_dangerous_deserialization'

2025-04-08 22:42:04,696 - app.services.chatbot - ERROR - Error initializing ChatbotService components: Failed to initialize vector database: Failed to load FAISS index: FAISS.__init__() got an unexpected keyword argument 'allow_dangerous_deserialization'
2025-04-08 22:42:04,696 - app.services.chatbot - ERROR - Traceback (most recent call last):
  File "D:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 99, in _initialize_components
    self._db = FAISS.load_local(
  File "D:\ThucTap\ChatBotKinhTe\venv\lib\site-packages\langchain_community\vectorstores\faiss.py", line 1065, in load_local
    return cls(embeddings, index, docstore, index_to_docstore_id, **kwargs)
TypeError: FAISS.__init__() got an unexpected keyword argument 'allow_dangerous_deserialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 113, in _initialize_components
    raise RuntimeError(f"Failed to load FAISS index: {str(faiss_err)}")
RuntimeError: Failed to load FAISS index: FAISS.__init__() got an unexpected keyword argument 'allow_dangerous_deserialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\ThucTap\ChatBotKinhTe\app\services\chatbot.py", line 135, in _initialize_components
    raise RuntimeError(f"Failed to initialize vector database: {str(emb_err)}")
RuntimeError: Failed to initialize vector database: Failed to load FAISS index: FAISS.__init__() got an unexpected keyword argument 'allow_dangerous_deserialization'

2025-04-08 22:44:08,567 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 22:44:08,568 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 22:44:09,382 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 22:44:09,455 - app.services.chatbot - INFO - GPU memory cleaned successfully
2025-04-08 22:44:09,456 - app.services.chatbot - INFO - Initializing Gemini API...
2025-04-08 22:44:09,456 - app.services.chatbot - INFO - Gemini API initialized successfully
2025-04-08 22:44:09,456 - app.services.chatbot - INFO - Vector store path: ./vector_db
2025-04-08 22:44:09,457 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 22:44:11,315 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 22:44:13,252 - app.services.chatbot - INFO - Loading vector store from ./vector_db
2025-04-08 22:44:13,255 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-08 22:44:13,255 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-08 22:44:13,255 - faiss.loader - INFO - Loading faiss.
2025-04-08 22:44:13,268 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-08 22:44:13,275 - app.services.chatbot - INFO - Vector store loaded successfully with 27 vectors
2025-04-08 22:44:13,275 - app.services.chatbot - INFO - Configuring retriever
2025-04-08 22:44:13,275 - app.services.chatbot - INFO - Retriever configured successfully
2025-04-08 22:44:14,844 - app.services.chatbot - INFO - Retriever test successful, found 4 document(s)
2025-04-08 22:44:14,844 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 22:44:49,725 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 22:44:49,725 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 22:44:53,357 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 22:44:53,357 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 22:44:54,176 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 22:44:54,238 - app.services.chatbot - INFO - GPU memory cleaned successfully
2025-04-08 22:44:54,238 - app.services.chatbot - INFO - Initializing Gemini API...
2025-04-08 22:44:54,239 - app.services.chatbot - INFO - Gemini API initialized successfully
2025-04-08 22:44:54,239 - app.services.chatbot - INFO - Vector store path: ./vector_db
2025-04-08 22:44:54,240 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 22:44:56,035 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 22:44:57,909 - app.services.chatbot - INFO - Loading vector store from ./vector_db
2025-04-08 22:44:57,914 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-08 22:44:57,914 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-08 22:44:57,914 - faiss.loader - INFO - Loading faiss.
2025-04-08 22:44:57,942 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-08 22:44:57,951 - app.services.chatbot - INFO - Vector store loaded successfully with 27 vectors
2025-04-08 22:44:57,951 - app.services.chatbot - INFO - Configuring retriever
2025-04-08 22:44:57,952 - app.services.chatbot - INFO - Retriever configured successfully
2025-04-08 22:44:59,001 - app.services.chatbot - INFO - Retriever test successful, found 4 document(s)
2025-04-08 22:44:59,001 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 22:45:26,192 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 22:45:26,192 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 22:45:29,705 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 22:45:29,705 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 22:45:30,803 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 22:45:30,865 - app.services.chatbot - INFO - GPU memory cleaned successfully
2025-04-08 22:45:30,865 - app.services.chatbot - INFO - Initializing Gemini API...
2025-04-08 22:45:30,865 - app.services.chatbot - INFO - Gemini API initialized successfully
2025-04-08 22:45:30,865 - app.services.chatbot - INFO - Vector store path: ./vector_db
2025-04-08 22:45:30,865 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 22:45:32,720 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 22:45:34,555 - app.services.chatbot - INFO - Loading vector store from ./vector_db
2025-04-08 22:45:34,558 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-08 22:45:34,558 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-08 22:45:34,559 - faiss.loader - INFO - Loading faiss.
2025-04-08 22:45:34,572 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-08 22:45:34,577 - app.services.chatbot - INFO - Vector store loaded successfully with 27 vectors
2025-04-08 22:45:34,577 - app.services.chatbot - INFO - Configuring retriever
2025-04-08 22:45:34,577 - app.services.chatbot - INFO - Retriever configured successfully
2025-04-08 22:45:34,974 - app.services.chatbot - INFO - Retriever test successful, found 4 document(s)
2025-04-08 22:45:34,974 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 22:46:28,527 - app.api.endpoints.chat - INFO - Received chat-direct request from user 3: 'Kinh tế học vĩ mô'
2025-04-08 22:46:28,527 - app.api.endpoints.chat - INFO - Using API with model: gemini-2.0-flash
2025-04-08 22:46:28,528 - app.services.api_service - INFO - Sending request to Google API: gemini-2.0-flash
2025-04-08 22:46:32,045 - app.services.api_service - INFO - Google API response received in 3.52 seconds
2025-04-08 22:46:32,045 - app.api.endpoints.chat - INFO - Generated response for user 3 in 3.5170860290527344 seconds
2025-04-08 22:49:26,374 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 22:49:26,374 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 22:49:29,899 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 22:49:29,899 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 22:49:31,014 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 22:49:31,074 - app.services.chatbot - INFO - GPU memory cleaned successfully
2025-04-08 22:49:31,074 - app.services.chatbot - INFO - Initializing Gemini API...
2025-04-08 22:49:31,074 - app.services.chatbot - INFO - Gemini API initialized successfully
2025-04-08 22:49:31,074 - app.services.chatbot - INFO - Vector store path: ./vector_db
2025-04-08 22:49:31,074 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 22:49:32,860 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 22:49:34,694 - app.services.chatbot - INFO - Loading vector store from ./vector_db
2025-04-08 22:49:34,698 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-08 22:49:34,698 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-08 22:49:34,698 - faiss.loader - INFO - Loading faiss.
2025-04-08 22:49:34,716 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-08 22:49:34,722 - app.services.chatbot - INFO - Vector store loaded successfully with 27 vectors
2025-04-08 22:49:34,723 - app.services.chatbot - INFO - Configuring retriever
2025-04-08 22:49:34,724 - app.services.chatbot - INFO - Retriever configured successfully
2025-04-08 22:49:35,729 - app.services.chatbot - INFO - Retriever test successful, found 4 document(s)
2025-04-08 22:49:35,729 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 22:51:13,884 - app.api.endpoints.chat - INFO - Received chat-direct request from user 3: 'Kinh tế học là một ngành học rộng và phức tạp'
2025-04-08 22:51:13,884 - app.api.endpoints.chat - INFO - Using API with model: gemini-2.0-flash
2025-04-08 22:51:13,884 - app.services.api_service - INFO - Sending request to Google API: gemini-2.0-flash
2025-04-08 22:51:17,184 - app.services.api_service - INFO - Google API response received in 3.30 seconds
2025-04-08 22:51:17,184 - app.api.endpoints.chat - INFO - Generated response for user 3 in 3.3002734184265137 seconds
2025-04-08 22:51:46,464 - app.api.endpoints.chat - INFO - Received chat-direct request from user 3: 'Kinh tế học vĩ mô nghiên cứu gì'
2025-04-08 22:51:46,464 - app.api.endpoints.chat - INFO - Using API with model: gemini-2.0-flash
2025-04-08 22:51:46,464 - app.services.api_service - INFO - Sending request to Google API: gemini-2.0-flash
2025-04-08 22:51:49,435 - app.services.api_service - INFO - Google API response received in 2.97 seconds
2025-04-08 22:51:49,435 - app.api.endpoints.chat - INFO - Generated response for user 3 in 2.9706661701202393 seconds
2025-04-08 22:55:47,631 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 22:55:47,631 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 22:55:51,554 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 22:55:51,554 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 22:55:52,693 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 22:55:52,763 - app.services.chatbot - INFO - GPU memory cleaned successfully
2025-04-08 22:55:52,763 - app.services.chatbot - INFO - Initializing Gemini API...
2025-04-08 22:55:52,763 - app.services.chatbot - INFO - Gemini API initialized successfully with model gemini-1.5-pro
2025-04-08 22:55:52,763 - app.services.chatbot - INFO - Vector store path: ./vector_db
2025-04-08 22:55:52,763 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 22:55:54,634 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 22:55:56,493 - app.services.chatbot - INFO - Loading vector store from ./vector_db
2025-04-08 22:55:56,496 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-08 22:55:56,496 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-08 22:55:56,497 - faiss.loader - INFO - Loading faiss.
2025-04-08 22:55:56,512 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-08 22:55:56,518 - app.services.chatbot - INFO - Vector store loaded successfully with 27 vectors
2025-04-08 22:55:56,518 - app.services.chatbot - INFO - Configuring retriever
2025-04-08 22:55:56,518 - app.services.chatbot - INFO - Retriever configured successfully
2025-04-08 22:55:57,614 - app.services.chatbot - INFO - Retriever test successful, found 4 document(s)
2025-04-08 22:55:57,614 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 22:57:01,073 - app.api.endpoints.chat - INFO - Received chat-direct request from user 3: 'Kinh tế học vĩ mô nghiên cứu gì'
2025-04-08 22:57:01,073 - app.api.endpoints.chat - INFO - Using API with model: gemini-2.0-flash
2025-04-08 22:57:01,073 - app.services.api_service - INFO - Sending request to Google API: gemini-2.0-flash
2025-04-08 22:57:04,632 - app.services.api_service - INFO - Google API response received in 3.56 seconds
2025-04-08 22:57:04,632 - app.api.endpoints.chat - INFO - Generated response for user 3 in 3.559831380844116 seconds
2025-04-08 23:00:39,451 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 23:00:39,451 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 23:00:43,262 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 23:00:43,262 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 23:00:44,372 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 23:00:44,442 - app.services.chatbot - INFO - GPU memory cleaned successfully
2025-04-08 23:00:44,442 - app.services.chatbot - INFO - Initializing Gemini API...
2025-04-08 23:00:44,442 - app.services.chatbot - INFO - Gemini API initialized successfully with model gemini-1.5-pro
2025-04-08 23:00:44,442 - app.services.chatbot - INFO - Vector store path: ./vector_db
2025-04-08 23:00:44,442 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 23:00:46,473 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 23:00:48,477 - app.services.chatbot - INFO - Loading vector store from ./vector_db
2025-04-08 23:00:48,477 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-08 23:00:48,477 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-08 23:00:48,482 - faiss.loader - INFO - Loading faiss.
2025-04-08 23:00:48,492 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-08 23:00:48,517 - app.services.chatbot - INFO - Vector store loaded successfully with 6 vectors
2025-04-08 23:00:48,517 - app.services.chatbot - INFO - Configuring retriever
2025-04-08 23:00:48,519 - app.services.chatbot - INFO - Retriever configured successfully
2025-04-08 23:00:49,647 - app.services.chatbot - INFO - Retriever test successful, found 4 document(s)
2025-04-08 23:00:49,647 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 23:01:13,753 - app.api.endpoints.chat - INFO - Received chat-direct request from user 3: 'Kinh tế học vĩ mô nghiên cứu gì'
2025-04-08 23:01:13,753 - app.api.endpoints.chat - INFO - Using API with model: gemini-2.0-flash
2025-04-08 23:01:13,753 - app.services.api_service - INFO - Sending request to Google API: gemini-2.0-flash
2025-04-08 23:01:16,502 - app.services.api_service - INFO - Google API response received in 2.75 seconds
2025-04-08 23:01:16,507 - app.api.endpoints.chat - INFO - Generated response for user 3 in 2.7540957927703857 seconds
2025-04-08 23:50:11,385 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 23:50:11,386 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 23:50:15,141 - app.api.endpoints.chat - INFO - Initializing API service with type: google
2025-04-08 23:50:15,141 - app.services.api_service - INFO - Initialized Google API service with model: gemini-2.0-flash
2025-04-08 23:50:16,261 - app.services.chatbot - INFO - Initializing ChatbotService components...
2025-04-08 23:50:16,327 - app.services.chatbot - INFO - GPU memory cleaned successfully
2025-04-08 23:50:16,328 - app.services.chatbot - INFO - Initializing Gemini API...
2025-04-08 23:50:16,328 - app.services.chatbot - INFO - Gemini API initialized successfully with model gemini-1.5-pro
2025-04-08 23:50:16,329 - app.services.chatbot - INFO - Vector store path: ./vector_db
2025-04-08 23:50:16,329 - app.services.chatbot - INFO - Loading embedding model: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 23:50:18,299 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-04-08 23:50:20,245 - app.services.chatbot - INFO - Loading vector store from ./vector_db
2025-04-08 23:50:20,248 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-08 23:50:20,249 - faiss.loader - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2025-04-08 23:50:20,249 - faiss.loader - INFO - Loading faiss.
2025-04-08 23:50:20,263 - faiss.loader - INFO - Successfully loaded faiss.
2025-04-08 23:50:20,270 - app.services.chatbot - INFO - Vector store loaded successfully with 6 vectors
2025-04-08 23:50:20,270 - app.services.chatbot - INFO - Configuring retriever
2025-04-08 23:50:20,270 - app.services.chatbot - INFO - Retriever configured successfully
2025-04-08 23:50:21,285 - app.services.chatbot - INFO - Retriever test successful, found 4 document(s)
2025-04-08 23:50:21,286 - app.services.chatbot - INFO - ChatbotService components initialized successfully
2025-04-08 23:50:51,544 - app.api.endpoints.chat - INFO - Received chat-direct request from user 3: 'Lý thuyết tiêu dùng'
2025-04-08 23:50:51,545 - app.api.endpoints.chat - INFO - Using API with model: gemini-2.0-flash
2025-04-08 23:50:51,546 - app.services.api_service - INFO - Sending request to Google API: gemini-2.0-flash
2025-04-08 23:50:56,130 - app.services.api_service - INFO - Google API response received in 4.58 seconds
2025-04-08 23:50:56,130 - app.api.endpoints.chat - INFO - Generated response for user 3 in 4.5840277671813965 seconds
